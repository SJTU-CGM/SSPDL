{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/amd-define.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./node_modules/@baliga-lab/sequencelogo.js/seqlogo.js","webpack:///./node_modules/file-saver/FileSaver.js","webpack:///./src/DistributionEditor.ts","webpack:///./src/ElementEditor.ts","webpack:///./src/Menubar.ts","webpack:///./src/ModelEditor.ts","webpack:///./src/ModuleViewer.ts","webpack:///./src/MotifEditor.ts","webpack:///./src/NamespaceViewer.ts","webpack:///./src/SMDL/Utility.ts","webpack:///./src/SpacerEditor.ts","webpack:///./src/Widget/Button.ts","webpack:///./src/Widget/ColorEditor.ts","webpack:///./src/Widget/Pile.ts","webpack:///./src/Widget/StringEditor.ts","webpack:///./src/Widget/Utility.ts","webpack:///./src/Widget/Widget.ts","webpack:///./src/html.ts","webpack:///./src/index.ts","webpack:///./src/utility/JSUtility.ts","webpack:///./src/utility/svg.ts","webpack:///./src/widget.ts","webpack:///external \"Snap\""],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;ACnEA;AACA;AACA;;;;;;;;;;;;ACFA;AACA;;;;;;;;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB,oCAAoC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0BAA0B,+BAA+B;AACzD;AACA;AACA;AACA;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,wBAAwB;AAC7C,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,UAAU;AAClD,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mBAAmB,cAAc;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA,mBAAmB,0BAA0B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE,wDAAwD;AACxD,kCAAkC;AAClC,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2KAAgK,gBAAgB,EAAE;AAAA;AAClL,CAAC;;;;;;;;;;;;AChVD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA,KAAK,OAAO;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D,0DAA0D,gBAAgB;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,GAAG,yBAAyB;AAC7G;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;AACA,GAAG;AAAA;AACH;;;;;;;;;;;;;;;AC3LA,sFAAsF;AAEtF,kEAA8B;AAC9B,wGAAqD;AAErD,sFAAoD;AACpD,gFAAsC;AACtC,2DAAiC;AACjC,iGAAyD;AACzD,+EAAoC;AACpC,yFAAkD;AAGlD,wBAAgC,SAAQ,eAAoB;IAGxD,IAAI;QACA,IAAI,CAAC,MAAM,GAAG,IAAI,OAAO,EAAE,CAAC;QAC5B,IAAI,CAAC,MAAM,GAAG,IAAI,OAAO,EAAE,CAAC;QAC5B,WAAI,CAAC,CAAC,CAAC;YACH,CAAC,EAAE,IAA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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","module.exports = function() {\r\n\tthrow new Error(\"define cannot be used indirect\");\r\n};\r\n","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n","/* seqlogo.js - see README and LICENSE for details */\n(function (glob) {\n    \"use strict\";\n    // some default settings\n    var MARGIN_LEFT = 40, MARGIN_TOP = 20, MARGIN_RIGHT = 20,\n        MARGIN_BOTTOM = 30, DEFAULT_OPTIONS, NUCLEOTIDE_COLORS,\n        AMINO_COLORS, MEASURE_CANVAS, STRETCH = 0.65;\n    NUCLEOTIDE_COLORS = {\n        'A': 'rgb(0, 128, 0)',\n        'G': 'rgb(255, 165, 0)',\n        'T': 'rgb(255, 0, 0)',\n        'U': 'rgb(255, 0, 0)',\n        'C': 'rgb(0, 0, 255)'\n    };\n    AMINO_COLORS = {\n        // polar amino acids\n        'G': 'rgb(0, 200, 50)',\n        'S': 'rgb(0, 200, 50)',\n        'T': 'rgb(0, 200, 50)',\n        'Y': 'rgb(0, 200, 50)',\n        'C': 'rgb(0, 200, 50)',\n        'Q': 'rgb(0, 200, 50)',\n        'N': 'rgb(0, 200, 50)',\n        // basic\n        'K': 'rgb(0, 0, 230)',\n        'R': 'rgb(0, 0, 230)',\n        'H': 'rgb(0, 0, 230)',\n        // acidic\n        'D': 'rgb(255, 0, 0)',\n        'E': 'rgb(255, 0, 0)',\n        // hydrophobic\n        'A': 'rgb(0, 0, 0)',\n        'V': 'rgb(0, 0, 0)',\n        'L': 'rgb(0, 0, 0)',\n        'I': 'rgb(0, 0, 0)',\n        'P': 'rgb(0, 0, 0)',\n        'W': 'rgb(0, 0, 0)',\n        'F': 'rgb(0, 0, 0)',\n        'M': 'rgb(0, 0, 0)'\n    };\n    DEFAULT_OPTIONS = {\n        type: 'canvas',\n        width: 400,\n        height: 300,\n        style: {\n            width: 400,\n            height: 300,\n            font: '20pt Helvetica'\n        }\n    };\n    MEASURE_CANVAS = document.createElement('canvas');\n    MEASURE_CANVAS.setAttribute('width', 500);\n    MEASURE_CANVAS.setAttribute('height', 500);\n\n    // **********************************************************************\n    // ****** Common Functions\n    // **********************************************************************\n\n    function rank(arr) {\n        var result = [], i;\n        for (i = 0; i < arr.length; i += 1) {\n            result.push([i, arr[i]]);\n        }\n        return result.sort(function (a, b) {\n            return a[1] - b[1];\n        });\n    }\n\n    function log(n, base) {\n        return Math.log(n) / Math.log(base);\n    }\n    function uncertaintyAt(pssm, motifPos) {\n        var row, freq, sum = 0;\n        for (row = 0; row < pssm.values[motifPos].length; row += 1) {\n            freq = pssm.values[motifPos][row];\n            if (freq > 0) {\n                sum += freq * log(freq, 2);\n            }\n        }\n        return -sum;\n    }\n    function rsequence(pssm, motifPos) {\n        var correctionFactor = 0.0, numBits;\n        numBits = Math.ceil(log(pssm.alphabet.length, 2));\n        return numBits - (uncertaintyAt(pssm, motifPos) + correctionFactor);\n    }\n\n    // Generic PSSM drawing function\n    function drawPSSM(pssm, scalex, y0, yHeight, drawFun) {\n        var x, y, motifPos, size, columnRanks, currentGlyph, row, maxWidth, rseq;\n        x = MARGIN_LEFT;\n\n        for (motifPos = 0; motifPos < pssm.values.length; motifPos += 1) {\n            y = y0;\n            columnRanks = rank(pssm.values[motifPos]);\n            maxWidth = 0;\n            rseq = rsequence(pssm, motifPos);\n            for (row = 0; row < columnRanks.length; row += 1) {\n                currentGlyph = pssm.alphabet[columnRanks[row][0]];\n                size = drawFun(currentGlyph, x, y, scalex, yHeight,\n                               rseq * columnRanks[row][1]);\n                if (size.width > maxWidth) {\n                    maxWidth = size.width;\n                }\n                y -= size.height;\n            }\n            x += maxWidth;\n        }\n        return x;\n    }\n\n    // **********************************************************************\n    // ****** Canvas-based Implementation\n    // **********************************************************************\n\n    function firstLine(imageData) {\n        var pixels = imageData.data, row, col, index;\n        for (row = 0; row < imageData.height; row += 1) {\n            for (col = 0; col < imageData.width; col += 1) {\n                index = (row * imageData.width * 4) + col * 4;\n                if (pixels[index + 3] !== 0) {\n                    return row;\n                }\n            }\n        }\n        return imageData.height;\n    }\n    function lastLine(imageData) {\n        var pixels = imageData.data, row, col, index;\n        for (row = imageData.height - 1; row >= 0; row -= 1) {\n            for (col = 0; col < imageData.width; col += 1) {\n                index = (row * imageData.width * 4) + col * 4;\n                if (pixels[index + 3] !== 0) {\n                    return row;\n                }\n            }\n        }\n        return imageData.height - 1;\n    }\n\n    function measureText(text, font, scalex, scaley) {\n        var imageData, context, first;\n        if (scaley === 0) {\n            return 0;\n        }\n        context = MEASURE_CANVAS.getContext('2d');\n        context.fillStyle = \"rgb(0, 0, 0)\";\n        context.font = font;\n        context.textBaseline = 'top';\n        context.save();\n        context.scale(scalex, scaley);\n        context.fillText(text, 0, 0);\n        context.restore();\n\n        imageData = context.getImageData(0, 0, MEASURE_CANVAS.width, MEASURE_CANVAS.height);\n        first = firstLine(imageData);\n        context.clearRect(0, 0, MEASURE_CANVAS.width, MEASURE_CANVAS.height);\n        return lastLine(imageData) - first + 1;\n    }\n\n    function drawLabelsY(context, numBits, x0, y0, yHeight) {\n        var i, label, ydist = yHeight / numBits, y = y0;\n\n        context.font = '12pt Arial';\n        context.fillText('bits', x0 + 10, MARGIN_TOP - 5);\n        var textHeight = measureText('M', context.font, 1.0, 1.0);\n        y += textHeight / 2;\n\n        for (i = 0; i <= numBits; i += 1) {\n            label = i.toString();\n            context.fillText(label, x0, y);\n            y -= ydist;\n        }\n    }\n\n    function drawMinorTicksY(context, y0, y1, numDivisions) {\n        var interval = (y1 - y0) / numDivisions, y = y0, i;\n        for (i = 0; i < numDivisions; i += 1) {\n            if (i > 0) {\n                context.beginPath();\n                context.moveTo(MARGIN_LEFT - 5, y);\n                context.lineTo(MARGIN_LEFT, y);\n                context.stroke();\n            }\n            y += interval;\n        }\n    }\n\n    function drawTicksY(context, numBits, bottom) {\n        var mainIntervalY = (bottom - MARGIN_TOP) / numBits;\n        var y = MARGIN_TOP, i;\n        for (i = 0; i <= numBits; i += 1) {\n            context.beginPath();\n            context.moveTo(MARGIN_LEFT - 10, y);\n            context.lineTo(MARGIN_LEFT, y);\n            context.stroke();\n            if (i < numBits) {\n                drawMinorTicksY(context, y, y + mainIntervalY, 5);\n            }\n            y += mainIntervalY;\n        }\n    }\n\n    function drawAxis(context, numBits, right, bottom) {\n        // main axis\n        context.beginPath();\n        context.moveTo(MARGIN_LEFT, MARGIN_TOP);\n        context.lineTo(MARGIN_LEFT, bottom);\n        context.lineTo(right, bottom);\n        context.stroke();\n\n        drawTicksY(context, numBits, bottom);\n    }\n\n    function drawScale(canvas, pssm) {\n        var context = canvas.getContext('2d'), right = canvas.width - MARGIN_RIGHT,\n            numBits = Math.ceil(log(pssm.alphabet.length, 2)),\n            bottom = canvas.height - MARGIN_BOTTOM;\n        drawAxis(context, numBits, right, bottom);\n        drawLabelsY(context, numBits, MARGIN_LEFT - 25, bottom, bottom - MARGIN_TOP);\n    }\n\n    function drawGlyph(context, glyph, colors, x, y, scalex,\n                       yHeight, maxFontHeightNormal,\n                       weight) {\n        var glyphWidth, scaley, glyphHeightScaled;\n        glyphWidth = context.measureText(glyph).width * scalex;\n        scaley = weight * (yHeight / maxFontHeightNormal) * STRETCH;\n        glyphHeightScaled = measureText(glyph, context.font, scalex, scaley);\n        if (scaley > 0) {\n            context.fillStyle = colors[glyph];\n            context.save();\n            context.translate(x, y);\n            context.scale(scalex, scaley);\n            context.translate(-x, -y);\n            context.fillText(glyph, x, y);\n            context.restore();\n        }\n        return { width: glyphWidth, height: glyphHeightScaled };\n    }\n\n    function colorTableFor(pssm) {\n        var i, c;\n        for (i = 0; i < pssm.alphabet.length; i += 1) {\n            c = pssm.alphabet[i];\n            if (c !== 'A' && c !== 'G' && c !== 'T' && c !== 'C' && c !== 'U') {\n                return AMINO_COLORS;\n            }\n        }\n        return NUCLEOTIDE_COLORS;\n    }\n\n    function drawGlyphs(canvas, options, pssm) {\n        var context, yHeight, maxFontHeightNormal, sumColumnWidthsNormal, xWidth, scalex;\n        context = canvas.getContext('2d');\n        context.textBaseline = 'alphabetic';\n        if (options.style && options.style.font) {\n            context.font = options.style.font;\n        } else {\n            context.font = DEFAULT_OPTIONS.style.font;\n        }\n        yHeight = canvas.height - (MARGIN_BOTTOM + MARGIN_TOP);\n        maxFontHeightNormal = measureText('Mg', context.font, 1.0, 1.0);\n        sumColumnWidthsNormal = context.measureText('W').width * pssm.values.length;\n        xWidth = canvas.width - (MARGIN_LEFT + MARGIN_RIGHT);\n        scalex = xWidth / sumColumnWidthsNormal;\n        var lastX = drawPSSM(pssm, scalex,\n                             canvas.height - MARGIN_BOTTOM, yHeight,\n                             function (currentGlyph, x, y, scalex, yHeight, weight) {\n                                 return drawGlyph(context, currentGlyph,\n                                                  colorTableFor(pssm), x, y,\n                                                  scalex, yHeight,\n                                                  maxFontHeightNormal, weight);\n                             });\n        return (lastX - MARGIN_LEFT) / pssm.values.length;\n    }\n\n    function drawTicksX(canvas, pssm, interval) {\n        var context = canvas.getContext('2d'), bottom = canvas.height - MARGIN_BOTTOM, i, x, xi, tickHeight, label, textdim, textHeight;\n        context.font = '12pt Arial';\n        context.fillStyle = 'black';\n        for (i = 1; i <= pssm.values.length; i += 1) {\n            x = MARGIN_LEFT + i * interval;\n            xi = x - interval / 2;\n            tickHeight = (i % 5 === 0) ? 10 : 5;\n            context.beginPath();\n            context.moveTo(xi, bottom);\n            context.lineTo(xi, bottom + tickHeight);\n            context.stroke();\n            if (i % 5 === 0) {\n                label = i.toString();\n                textdim = context.measureText(label);\n                // the TextMetrics object currently does not have any other attributes\n                // than width, so we simply specify a text height\n                textHeight = 14;\n                context.fillText(label, xi - textdim.width / 2, bottom + tickHeight + textHeight);\n            }\n        }\n    }\n\n    function makeCanvas(id, options, pssm) {\n        var elem = document.getElementById(id);\n        var canvas = document.createElement(\"canvas\");\n        canvas.setAttribute('width', options.width);\n        canvas.setAttribute('height', options.height);\n        if (options.style) {\n            canvas.setAttribute('style', 'border: 1px solid black; width: ' +\n                                options.style.width + '; height: ' + options.style.height +\n                                '; font: ' + options.font);\n        } else {\n            canvas.setAttribute('style', 'border: 1px solid black');\n        }\n        elem.parentNode.replaceChild(canvas, elem);\n        canvas.id = id;\n        drawScale(canvas, pssm);\n        var interval = drawGlyphs(canvas, options, pssm);\n        drawTicksX(canvas, pssm, interval);\n    }\n\n    // **********************************************************************\n    // ****** Public API\n    // **********************************************************************\n    var seqlogo = { };\n    seqlogo.version = '1.0.0';\n    seqlogo.makeLogo = function (id, pssm, options) {\n        if (options === null) {\n            options = DEFAULT_OPTIONS;\n        }\n        // TODO: copy the options from DEFAULT_OPTIONS that are missing\n        makeCanvas(id, options, pssm);\n    };\n\n    // These lines needed to support a NPM/ES6 environment, the define() call\n    // is to support RequireJS\n    glob.seqlogo = seqlogo;\n    typeof module != 'undefined' && module.exports ? module.exports = seqlogo : typeof define === \"function\" && define.amd ? define(\"seqlogo\", [], function () { return seqlogo; }) : glob.seqlogo = seqlogo;\n})(typeof window != \"undefined\" ? window : this);\n","/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 1.3.2\n * 2016-06-16 18:25:19\n *\n * By Eli Grey, http://eligrey.com\n * License: MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\nvar saveAs = saveAs || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof view === \"undefined\" || typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = new MouseEvent(\"click\");\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, is_safari = /constructor/i.test(view.HTMLElement) || view.safari\n\t\t, is_chrome_ios =/CriOS\\/[\\d]+/.test(navigator.userAgent)\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t// the Blob API is fundamentally broken as there is no \"downloadfinished\" event to subscribe to\n\t\t, arbitrary_revoke_timeout = 1000 * 40 // in ms\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, auto_bom = function(blob) {\n\t\t\t// prepend BOM for UTF-8 XML and text/* types (including HTML)\n\t\t\t// note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\t\t\tif (/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n\t\t\t\treturn new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});\n\t\t\t}\n\t\t\treturn blob;\n\t\t}\n\t\t, FileSaver = function(blob, name, no_auto_bom) {\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, force = type === force_saveable_type\n\t\t\t\t, object_url\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\tif ((is_chrome_ios || (force && is_safari)) && view.FileReader) {\n\t\t\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\t\treader.onloadend = function() {\n\t\t\t\t\t\t\tvar url = is_chrome_ios ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\t\t\tvar popup = view.open(url, '_blank');\n\t\t\t\t\t\t\tif(!popup) view.location.href = url;\n\t\t\t\t\t\t\turl=undefined; // release reference before dispatching\n\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\tdispatch_all();\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (!object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (force) {\n\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar opened = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (!opened) {\n\t\t\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\n\t\t\tif (can_use_save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tsave_link.href = object_url;\n\t\t\t\t\tsave_link.download = name;\n\t\t\t\t\tclick(save_link);\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfs_error();\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name, no_auto_bom) {\n\t\t\treturn new FileSaver(blob, name || blob.name || \"download\", no_auto_bom);\n\t\t}\n\t;\n\t// IE 10+ (native saveAs)\n\tif (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n\t\treturn function(blob, name, no_auto_bom) {\n\t\t\tname = name || blob.name || \"download\";\n\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tFS_proto.abort = function(){};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this.content\n));\n// `self` is undefined in Firefox for Android content script context\n// while `this` is nsIContentFrameMessageManager\n// with an attribute `content` that corresponds to the window\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports.saveAs = saveAs;\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd !== null)) {\n  define(\"FileSaver.js\", function() {\n    return saveAs;\n  });\n}\n","import { Editor, Controllee, Viewer, Controller_, Controller } from \"./Widget/Widget\";\nimport { Distribution } from \"./SMDL/SMDL\";\nimport { HTML } from \"./html\";\nimport { StringEditor } from \"./Widget/StringEditor\";\nimport { StringViewer } from \"./Widget/StringViewer\";\nimport { Button, ButtonCmd } from \"./Widget/Button\";\nimport { HPile } from \"./Widget/Pile\";\nimport Snap = require(\"snapsvg\");\nimport { later, format, sum } from \"./utility/JSUtility\";\nimport { SVG } from \"./utility/svg\";\nimport { popup, confirm } from \"./Widget/Utility\";\n\n\nexport class DistributionEditor extends Editor<Distribution> {\n    private viewer: DViewer;\n    private editor: DEditor;\n    init(): void {\n        this.viewer = new DViewer();\n        this.editor = new DEditor();\n        HTML.b({\n            p: this.getDOM(),\n            ch: [\n                \"Distribution:\",\n                this.viewer.getDOM()\n            ]\n        });\n        this.viewer.bind({\n            handle: (cmd)=>{\n                confirm(this.editor, {\n                    ok: () => {\n                        const newData = this.editor.getData();\n                        if (newData.probs.every((n)=>{ return 0 <= n && n <= 1; }) && sum(...newData.probs) === 1) {\n                            this.viewer.setData(this.editor.getData());\n                        } else {\n                            alert(\"invalid distribution: either some probability is out of [0,1] or their sum does not equal to 1.\");\n                        }\n                    },\n                    cancel: ()=>{\n                    }\n                });\n            }\n        })\n    }\n    getData(): Distribution {\n        return this.viewer.getData();\n    }\n    displayData(container: HTMLElement, data: Distribution): void {\n        this.viewer.setData(data);\n        this.editor.setData(data);\n    }\n}\n\n\nclass DViewer extends Controller<Distribution, \"click\"> {\n    private svg: SVGElement;\n    private paper: Snap.Paper;\n    init(): void {\n        super.init();\n        this.svg = SVG.svg({\n            \"stroke\": \"black\",\n            \"fill\": \"white\"\n        });\n        this.paper = Snap(this.svg);\n        HTML.inner(this.getDOM(), [this.svg]);\n\n        this.svg.addEventListener(\"click\", ()=>{\n            this.send(\"click\");\n        })\n    }\n    displayData(container: HTMLElement, data: Distribution): void {\n        const contentHeight = 100;\n        const unitWidth = 30;\n        const topPadding = 20;\n        const bottomPadding = 20;\n        const leftPadding = 10;\n        const rightPadding = 10;\n        const height = contentHeight + topPadding + bottomPadding;\n\n        const heightProbRatio = contentHeight / Math.max(0, ...data.probs);\n        const width = leftPadding + unitWidth * data.probs.length + rightPadding;\n\n        SVG.attr(this.svg, {\n            \"width\": width,\n            \"height\": height\n        });\n        SVG.build({\n            p: this.svg,\n            ch: [\n                ... data.probs.map((p, i)=>{\n                    const index = data.from + i;\n                    const h = p * heightProbRatio;\n                    const w = unitWidth;\n                    const top = topPadding + contentHeight;\n                    const left = leftPadding + unitWidth * i;\n                    return SVG.build({\n                        p: {\n                            tag: \"g\",\n                            attr: {\n                                \"transform\": format(\"translate(%,%)\", left, top)\n                            }\n                        },\n                        ch: [\n                            {\n                                tag: \"rect\",\n                                attr: {\n                                    \"x\": 0, \"y\": -h, \"width\": w, \"height\": h,\n                                    \"fill\": \"lightblue\",\n                                    \"stroke\": \"white\"\n                                }\n                            },\n                            {\n                                p: {\n                                    tag: \"text\",\n                                    attr: {\n                                        \"x\": unitWidth / 2, \"y\": -h,\n                                        \"fill\": \"black\",\n                                        \"stroke\": \"black\",\n                                        \"dominant-baseline\": \"baseline\",\n                                        \"text-anchor\": \"middle\",\n                                        \"pointer-events\": \"none\",\n                                        \"font-size\": \"0.8em\"\n                                    }\n                                },\n                                ch: [ p.toFixed(3) ]\n                            },\n                            {\n                                p: {\n                                    tag: \"text\",\n                                    attr: {\n                                        \"x\": unitWidth / 2, \"y\": 0,\n                                        \"fill\": \"black\",\n                                        \"stroke\": \"black\",\n                                        \"dominant-baseline\": \"hanging\",\n                                        \"text-anchor\": \"middle\",\n                                        \"pointer-events\": \"none\"\n                                    }\n                                },\n                                ch: [ index ]\n                            }\n                        ]\n                    });\n                }),\n                {\n                    tag: \"line\",\n                    attr: {\n                        \"x1\": 0, \"y1\": topPadding + contentHeight, \"x2\": width, \"y2\": topPadding + contentHeight,\n                        \"stroke\": \"black\",\n                        \"fill\": \"black\"\n                    }\n                }\n            ]\n        })\n    }\n}\n\n\nclass DEditor extends Editor<Distribution> {\n    private fromInput: HTMLInputElement;\n    private probsEr: ProbsEditor;\n    init(): void {\n        super.init();\n        this.fromInput = HTML.e({\n            tag: \"input\",\n            attr: {\n                \"type\": \"number\",\n                \"step\": \"1\",\n                \"min\": \"0\"\n            }\n        }) as HTMLInputElement;\n        this.fromInput.addEventListener(\"change\", ()=>{\n            this.probsEr.setData(Object.assign({}, this.probsEr.getData(), {\n                \"from\": parseInt(this.fromInput.value)\n            }));\n        })\n        this.probsEr = new ProbsEditor();\n        HTML.b({\n            p: this.getDOM(),\n            ch: [\n                {\n                    p: {\n                        tag: \"label\"\n                    },\n                    ch: [\n                        \"From\",\n                        this.fromInput\n                    ]\n                },\n                this.probsEr.getDOM()\n            ]\n        });\n    }\n    getData(): Distribution {\n        return this.probsEr.getData();\n    }\n    displayData(container: HTMLElement, data: Distribution): void {\n        this.fromInput.value = data.from + \"\";\n        this.probsEr.setData(data);\n    }\n}\n\n\nclass ProbsEditor extends Editor<Distribution> implements Controllee<ButtonCmd> {\n    handle(cmd: ButtonCmd): void {\n        switch (cmd.message) {\n            case \"add-row\": {\n                const data = this.getData()\n                this.setData({\n                    from: data.from,\n                    probs: [...data.probs, 0]\n                });\n                return;\n            }\n            case \"del-row\": {\n                const data = this.getData()\n                this.setData({\n                    from: data.from,\n                    probs: (data.probs.length > 0) ? data.probs.slice(0, data.probs.length - 1) : []\n                });\n                return;\n            }\n        }\n    }\n    private editors: StringEditor[];\n    private addRowButton: Button;\n    private delRowButton: Button;\n    init(): void {\n        super.init();\n        this.addRowButton = new Button();\n        this.addRowButton.setData({\n            label: \"+\",\n            message: \"add-row\"\n        });\n        this.addRowButton.bind(this);\n        this.delRowButton = new Button();\n        this.delRowButton.setData({\n            label: \"-\",\n            message: \"del-row\"\n        });\n        this.delRowButton.bind(this);\n    }\n    getData(): Distribution {\n        return {\n            from: this.data.from,\n            probs: this.editors.map((e)=>{ return parseFloat(e.getData()); })\n        };\n    }\n    displayData(container: HTMLElement, data: Distribution): void {\n        const len = data.probs.length;\n        this.editors = [];\n        for (let i = 0; i < len; i++) {\n            this.editors.push(new StringEditor());\n        }\n        for (let i = 0; i < len; i++) {\n            this.editors[i].setData({\n                label: (data.from + i).toString(),\n                content: data.probs[i].toFixed(3)\n            });\n        }\n        const pile = new HPile();\n        pile.setChildren([this.addRowButton, this.delRowButton]);\n        HTML.b({\n            p: container,\n            ch: [...this.editors.map(e => e.getDOM()), pile.getDOM()]\n        })\n    }\n}","import { Editor } from \"./Widget/Widget\";\nimport { ElementDef } from \"./SMDL/SMDL\";\nimport { HTML } from \"./html\";\nimport { StringEditor } from \"./Widget/StringEditor\";\nimport { MotifEditor, GMotifEditor } from \"./MotifEditor\";\nimport { SpacerEditor } from \"./SpacerEditor\";\n\n\ntype NamedElementDef = {\n    name: string;\n    def: ElementDef;\n}\n\nexport class ElementEditor extends Editor<NamedElementDef> {\n    private nameEd: StringEditor;\n    private gmotifEd: GMotifEditor;\n    private motifEd: MotifEditor;\n    private spacerEd: SpacerEditor;\n    constructor(container: HTMLElement) {\n        super(container);\n        this.nameEd = new StringEditor(HTML.box());\n        this.motifEd = new MotifEditor(HTML.box());\n        this.gmotifEd = new GMotifEditor(HTML.box());\n        this.spacerEd = new SpacerEditor(HTML.box());\n        this.gmotifEd.getDOM().style.display = \"none\";\n        this.motifEd.getDOM().style.display = \"none\";\n        this.spacerEd.getDOM().style.display = \"none\";\n        HTML.inner(container, [\n            this.nameEd.getDOM(), this.motifEd.getDOM(), this.gmotifEd.getDOM(), this.spacerEd.getDOM()\n        ]);\n    }\n    getData(): NamedElementDef {\n        const getDef = () => {\n            switch (this.data.def.kind) {\n                case \"motif\": {\n                    return Object.assign(this.motifEd.getData(), { kind: \"motif\" } as { kind: \"motif\" });\n                }\n                case \"g-motif\": {\n                    return Object.assign(this.gmotifEd.getData(), { kind: \"g-motif\" } as { kind: \"g-motif\" });\n                }\n                case \"spacer\":{\n                    return Object.assign(this.spacerEd.getData(), { kind: \"spacer\" } as { kind: \"spacer\" });\n                }\n            }\n        }\n        return {\n            name: this.nameEd.getData(),\n            def: getDef()\n        };\n    }\n    displayData(container: HTMLElement, data: { name: string; def: ElementDef; }): void {\n        this.nameEd.setData({\n            label: \"Name\",\n            content: data.name\n        });\n        const def = data.def;\n        switch (def.kind) {\n            case \"motif\": {\n                this.motifEd.getDOM().style.display = \"unset\";\n                this.gmotifEd.getDOM().style.display = \"none\";\n                this.spacerEd.getDOM().style.display = \"none\";\n                this.motifEd.setData({\n                    color: def.color,\n                    matrix: def.matrix\n                });\n                return;\n            }\n            case \"g-motif\": {\n                this.motifEd.getDOM().style.display = \"none\";\n                this.gmotifEd.getDOM().style.display = \"unset\";\n                this.spacerEd.getDOM().style.display = \"none\";\n                this.gmotifEd.setData({\n                    distribution: def.distribution,\n                    color: def.color,\n                    matrix: def.matrix\n                });\n                return;\n            }\n            case \"spacer\": {\n                // spacer\n                this.motifEd.getDOM().style.display = \"none\";\n                this.gmotifEd.getDOM().style.display = \"none\";\n                this.spacerEd.getDOM().style.display = \"unset\";\n                this.spacerEd.setData({\n                    distribution: def.distribution\n                });\n                return;\n            }\n        }\n    }\n}","import { Controller } from \"./Widget/Widget\";\nimport { HTML } from \"./html\";\n\n\nexport interface MenuCommand {\n    kind: \"menu\";\n    firstLevel: string;\n    secondLevel: string;\n}\n\n\ntype MenuData = {\n    name: string;\n    content: string[];\n}[];\n\n\nexport class Menubar extends Controller<MenuData, MenuCommand> {\n    displayData(container: HTMLElement, data: { name: string; content: string[]; }[]): void {\n        const buildMenu = (menu: { name: string, content: string[] }): HTMLElement => {\n            const box = HTML.element(\"div\", {}, {\n                \"display\": \"inline-block\"\n            });\n            const first = HTML.element(\"div\", {\n                \"class\": \"w3-button\"\n            }, {\n                \"cursor\": \"pointer\",\n                \"position\": \"relative\",\n                \"padding\": \"0.2em 1em\"\n            }, [menu.name]);\n            const second = HTML.element(\"div\", {}, {\n                \"position\": \"absolute\",\n                \"display\": \"none\",\n                \"background-color\": \"white\",\n                \"box-shadow\": \"0px 8px 16px 0px rgba(0,0,0,0.2)\"\n            }, menu.content.map((s: string) => {\n                const sec = HTML.element(\"div\", {\n                    \"class\": \"w3-button\"\n                }, {\n                    \"display\": \"block\",\n                    \"cursor\": \"pointer\",\n                    \"padding\": \"0.2em 1em\"\n                }, [s]);\n                sec.addEventListener(\"click\", () => {\n                    this.send({\n                        kind: \"menu\",\n                        firstLevel: menu.name,\n                        secondLevel: s\n                    })\n                });\n                return sec;\n            }));\n            HTML.inner(box, [first, second]);\n            box.addEventListener(\"mouseenter\", () => {\n                second.style.display = \"block\";\n            });\n            box.addEventListener(\"mouseleave\", () => {\n                second.style.display = \"none\";\n            });\n            return box;\n        }\n        HTML.inner(container, data.map(buildMenu));\n    }\n}\n\n","import { ModuleViewer, ColoredElement } from \"./ModuleViewer\";\nimport { Rider, StandardRider, Path, transformModule } from \"./SMDL/Utility\";\nimport { ListViewer } from \"./Widget/ListViewer\";\nimport { equal, min, max, sum, zip2, requestFile } from \"./utility/JSUtility\";\nimport { StringViewer } from \"./Widget/StringViewer\";\nimport { NamespaceViewer } from \"./NamespaceViewer\";\nimport { Menubar, MenuCommand } from \"./Menubar\";\n\nimport { HTML } from \"./html\";\nimport { Controllee, Editor } from \"./Widget/Widget\";\nimport { Model, Namespace, Element, ModuleItem, ElementDef, Module } from \"./SMDL/SMDL\";\nimport { popup } from \"./Widget/Utility\";\nimport { Pile } from \"./Widget/Pile\";\nimport { StringEditor } from \"./Widget/StringEditor\";\nimport { Button, ButtonCmd } from \"./Widget/Button\";\nimport FileSaver = require('file-saver');\n\n\ntype NodePath = {\n    kind: \"node\";\n    path: Path;\n    index: number;\n}\ntype ElementPath = {\n    kind: \"element\";\n    path: Path;\n}\ninterface AlterPath {\n    kind: \"alternation\",\n    path: Path\n}\ninterface RepetPath {\n    kind: \"repetition\",\n    path: Path\n}\nexport type UPath = NodePath | ElementPath | AlterPath | RepetPath | { kind: \"background\" };\n\n\ninterface DragCmd {\n    kind: \"drag\";\n    path1: UPath;\n    path2: UPath;\n    ctrlPressed: boolean\n}\ninterface ClickCmd {\n    kind: \"click\";\n    path: UPath;\n}\n\nexport type ModuleEditCmd = InspectElemCmd | CopyElemCmd | MoveElemCmd | LinkCmd | EditAlterCmd | EditRepetCmd | EditElemCmd | EditNodeCmd;\ninterface InspectElemCmd {\n    kind: \"insp\";\n    path: Path;\n}\ninterface CopyElemCmd {\n    kind: \"copy\";\n    epath: Path;\n    mpath: Path;\n    mindex: number;\n}\ninterface MoveElemCmd {\n    kind: \"move\";\n    epath: Path;\n    mpath: Path;\n    mindex: number;\n}\ninterface LinkCmd {\n    kind: \"link\";\n    mpath: Path;\n    p: number;\n    q: number;\n}\ninterface EditAlterCmd {\n    kind: \"edit-alternation\";\n    path: Path;\n}\ninterface EditRepetCmd {\n    kind: \"edit-repetition\";\n    path: Path;\n}\ninterface EditElemCmd {\n    kind: \"edit-element\";\n    path: Path;\n}\ninterface EditNodeCmd {\n    kind: \"edit-node\";\n    path: Path;\n    index: number;\n}\n\n\nexport type NamespaceEditCmd = RedefCmd | DefineCmd;\ninterface RedefCmd {\n    kind: \"redef\",\n    oldName: string;\n    newName: string;\n    def: ElementDef;\n}\ninterface DefineCmd {\n    kind: \"define\",\n    name: string;\n    def: ElementDef\n}\n\n\nexport class ModelEditor extends Editor<Model> implements Controllee<ModuleEditCmd | MenuCommand | NamespaceEditCmd> {\n    private undoCount = 0;\n    private undoStack: Model[] = [];\n    private redoStack: Model[] = [];\n    private handleUndo(): void {\n        if (this.undoStack.length > 0) {\n            this.redoStack.push(this.getData());\n            this.setData(this.undoStack.pop() as Model);\n        } else {\n            alert(\"no more undoable action\");\n        }\n    }\n    private handleRedo(): void {\n        if (this.redoStack.length > 0) {\n            this.undoStack.push(this.getData());\n            this.setData(this.redoStack.pop() as Model);\n        } else {\n            alert(\"no more redoable action\");\n        }\n    }\n    private handleNeitherUndoNorRedo(): void {\n        this.undoStack.push(this.getData());\n        this.redoStack = [];\n    }\n    interpreteEditNode(path: Path, index: number): void {\n        const model = this.getData();\n        let insertedElement: string | null = null;\n        const chooserHandler = new class implements Controllee<ButtonCmd> {\n            handle(cmd: ButtonCmd): void {\n                insertedElement = cmd.message;\n                popupHandler.handle(\"close\");\n            }\n        }\n        const buttons = Object.keys(model.namespace).map((nm) => {\n            const b = new Button();\n            b.setData({\n                label: nm,\n                message: nm\n            });\n            b.bind(chooserHandler);\n            return b;\n        });\n        const pile = new Pile();\n        pile.setChildren(buttons);\n        const popupHandler = popup(pile, {\n            onclose: () => {\n                if (insertedElement) {\n                    const rider = new StandardRider(model.root, path);\n                    rider.getModule().splice(index, 0, {\n                        kind: \"element\",\n                        name: insertedElement\n                    });\n                    this.setData(model);\n                }\n            }\n        })\n    }\n    interpreteEditElement(path: Path): void {\n        const deleteButton = new Button();\n        let deleteFlag = false;\n        deleteButton.setData({\n            label: HTML.span(\"delete\", { \"color\": \"red\" }),\n            message: \"delete\"\n        });\n        deleteButton.bind(new class implements Controllee<ButtonCmd> {\n            handle(cmd: ButtonCmd): void {\n                deleteFlag = true;\n                popupHandle.handle(\"close\");\n            }\n        });\n        const popupHandle = popup(deleteButton, {\n            onclose: () => {\n                if (deleteFlag) {\n                    // delete Element\n                    const data = this.getData();\n                    const rider = new StandardRider(data.root, path);\n                    console.log(rider.getNodeKind(), rider, path);\n                    // return;\n                    rider.up()\n                    rider.getModule().splice(path[path.length - 1], 1);\n                    this.setData(data);\n                    return;\n                }\n            }\n        })\n    }\n    interpreteEditRepetition(path: Path): void {\n\n        class RepetetionEditor extends Editor<number> {\n            private editor: StringEditor;\n            init() {\n                this.editor = new StringEditor();\n                this.editor.registerHandler((data) => {\n                    this.emitDataChange();\n                })\n                HTML.b({\n                    p: this.getDOM(),\n                    ch: [this.editor.getDOM()]\n                });\n            }\n            setData(data: number) {\n                this.editor.setData(data.toFixed(3));\n            }\n            getData(): number {\n                return parseFloat(this.editor.getData());\n            }\n            displayData(container: HTMLElement, data: number): void {\n            }\n        }\n\n        const data = this.getData();\n        const rider = new StandardRider(data.root, path);\n        const repet = rider.getRepetition();\n        const ed = new RepetetionEditor();\n        ed.setData(repet.prob);\n\n        function validProb(p: number) {\n            return 0 <= p && p <= 1;\n        }\n\n        // delete button\n        const btn = new Button();\n        let delFlag: boolean = false;\n        btn.setData({\n            label: HTML.e({\n                tag: \"span\",\n                style: {\n                    \"color\": \"red\"\n                },\n                ch: [\"Delete\"]\n            }),\n            message: \"delete\"\n        });\n        btn.bind(new class implements Controllee<ButtonCmd> {\n            handle(cmd: ButtonCmd): void {\n                delFlag = true;\n                popupHandle.handle(\"close\");\n            }\n        })\n        const pile = new Pile();\n        pile.setChildren([ed, btn]);\n\n        const popupHandle = popup(pile, {\n            onclose: () => {\n                if (delFlag) {\n                    const path = rider.getPath()\n                    const index = path[path.length - 1];\n                    rider.up();\n                    const m = rider.getModule();\n                    m.splice(index, 1);\n                    this.setData(data);\n                } else {\n                    const prob_ = ed.getData();\n                    if (validProb(prob_)) {\n                        repet.prob = prob_;\n                        this.setData(data);\n                    } else {\n                        alert(\"invalid probability\");\n                    }\n                }\n            }\n        });\n    }\n    interpreteEditAlternation(path: Path): void {\n\n        type AlternationProbs = number[];\n        class AlternationProbsEditor extends Editor<AlternationProbs> {\n            private pile: Pile;\n            private editors: StringEditor[];\n            init() {\n                this.pile = new Pile();\n                HTML.b({\n                    p: this.getDOM(),\n                    ch: [this.pile.getDOM()]\n                });\n            }\n            displayData(container: HTMLElement, data: number[]): void {\n                this.editors = data.map((p) => {\n                    const ed = new StringEditor(HTML.box());\n                    ed.setData(p.toFixed(3));\n                    return ed;\n                })\n                this.pile.setChildren(this.editors);\n            }\n            getData(): AlternationProbs {\n                return this.editors.map((ed) => {\n                    return parseFloat(ed.getData());\n                });\n            }\n        }\n\n        const data = this.getData()\n        const rider = new StandardRider(data.root, path);\n        const alter = rider.getAlternation();\n        const probs = alter.psubs.map(ps => ps.prob);\n\n        const ed = new AlternationProbsEditor(HTML.box());\n        ed.setData(probs);\n        function validDistribution(dist: number[]) {\n            return (dist.every(x => (x >= 0)) && sum(...dist) === 1);\n        }\n        const btn = new Button();\n        let delFlag: boolean = false;\n        btn.setData({\n            label: HTML.e({\n                tag: \"span\",\n                style: {\n                    \"color\": \"red\"\n                },\n                ch: [\"Delete\"]\n            }),\n            message: \"delete\"\n        });\n        btn.bind(new class implements Controllee<ButtonCmd> {\n            handle(cmd: ButtonCmd): void {\n                delFlag = true;\n                popupHandle.handle(\"close\");\n            }\n        })\n        const pile = new Pile();\n        pile.setChildren([ed, btn]);\n        const popupHandle = popup(pile, {\n            onclose: () => {\n                if (delFlag) {\n                    const path = rider.getPath()\n                    const index = path[path.length - 1];\n                    rider.up();\n                    const m = rider.getModule();\n                    m.splice(index, 1);\n                    this.setData(data);\n                } else {\n                    const newDist = ed.getData();\n                    if (validDistribution(newDist)) {\n                        alter.psubs = zip2(alter.psubs, newDist).map((x) => {\n                            const [ps, p] = x;\n                            return {\n                                prob: p,\n                                mod: ps.mod\n                            };\n                        });\n                        this.setData({\n                            namespace: data.namespace,\n                            root: data.root\n                        });\n                        return;\n                    } else {\n                        alert(\"invalid distribution\");\n                    }\n                }\n            }\n        });\n    }\n    interpreteDefineElement(name: string, def: ElementDef): void {\n        const data = this.getData();\n        if (name.length === 0) {\n            alert(\"name too short\");\n            return;\n        } else if (name in data.namespace) {\n            alert(\"name conflict\");\n            return;\n        } else {\n            data.namespace[name] = def;\n            this.setData(data);\n            return;\n        }\n    }\n    interpreteRedefineElement(oldName: string, newName: string, def: ElementDef): void {\n        function redef(ns: Namespace, n1: string, n2: string, def: ElementDef): Namespace {\n            delete ns[n1];\n            ns[n2] = def;\n            return ns;\n        }\n        function rename(m: Module, n1: string, n2: string): Module {\n            return transformModule<Element, Element>(m, (e) => {\n                const nm = e.name === n1 ? n2 : e.name;\n                return {\n                    name: nm\n                };\n            });\n        }\n        const data = this.getData();\n        return this.setData({\n            namespace: redef(data.namespace, oldName, newName, def),\n            root: rename(data.root, oldName, newName)\n        });\n    }\n    moduleVr: ModuleViewer;\n    namespaceVr: NamespaceViewer;\n    constructor(container: HTMLElement) {\n        super(container);\n\n        const menubar = new Menubar(HTML.ref(\"menu\"));\n        menubar.setData([\n            {\n                name: \"File\",\n                content: [\"New\", \"Load\", \"Save\"]\n            },\n            {\n                name: \"Edit\",\n                content: [\"Undo\", \"Redo\"]\n            },\n            {\n                name: \"About\",\n                content: [\"Website\"]\n            }\n        ]);\n        menubar.bind(this);\n\n        this.moduleVr = new ModuleViewer(HTML.ref(\"viewer-wrapper\"));\n        this.moduleVr.bind(this);\n\n        this.namespaceVr = new NamespaceViewer(HTML.ref(\"namespace-viewer\"));\n        this.namespaceVr.bind(this);\n\n        // HTML.inner(container, [ menubar.getContainer(), this.moduleVr.getContainer(), this.namespaceVr.getContainer() ]);\n    }\n    displayData(container: HTMLElement, data: Model): void {\n        this.moduleVr.setData(transformModule<Element, ColoredElement>(data.root, (e: Element) => {\n            const name = e.name;\n            const elem = data.namespace[name];\n            switch (elem.kind) {\n                case \"motif\": {\n                    return {\n                        type: \"motif\",\n                        name: name,\n                        color: elem.color,\n                    };\n                }\n                case \"g-motif\": {\n                    return {\n                        type: \"g-motif\",\n                        name: name,\n                        dist: elem.distribution,\n                        color: elem.color,\n                    };\n                }\n                case \"spacer\": {\n                    return {\n                        type: \"spacer\",\n                        name: name\n                    };\n                }\n            }\n        }));\n        // this.namespaceVr.setData({ ns: data.namespace, elem: Object.keys(data.namespace)[0] })\n        this.namespaceVr.setData(data.namespace);\n    }\n    handle(cmd: MenuCommand | ModuleEditCmd | NamespaceEditCmd): void {\n        console.log(\"ModelEditor\", cmd);\n        if (cmd.kind === \"menu\") {\n            const cmdString = cmd.firstLevel + \".\" + cmd.secondLevel;\n            if (cmdString === \"Edit.Undo\") {\n                this.handleUndo();\n                return;\n            } else if (cmdString === \"Edit.Redo\") {\n                this.handleRedo();\n                return;\n            } else {\n                this.handleNeitherUndoNorRedo();\n                switch (cmdString) {\n                    case \"File.New\": {\n                        this.setData({\n                            namespace: {},\n                            root: []\n                        });\n                        return;\n                    }\n                    case \"File.Load\": {\n                        const file = requestFile((file: File | null) => {\n                            if (file) {\n                                const reader = new FileReader();\n                                reader.addEventListener(\"load\", () => {\n                                    const text = reader.result as string;\n                                    const json = JSON.parse(text);\n                                    this.setData(json as Model);\n                                })\n                                reader.readAsText(file)\n                            }\n                        });\n                        return;\n                    }\n                    case \"File.Save\": {\n                        const blob = new Blob([JSON.stringify(this.getData(), null, \"\\t\")], { type: \"text/plain;charset=utf-8\" });\n                        FileSaver.saveAs(blob, \"model.json\");\n                        return;\n                    }\n                    default: {\n                        console.log(\"unhandled menu command\");\n                        return;\n                    }\n                }\n            }\n        }\n        else {\n            this.handleNeitherUndoNorRedo();\n            switch (cmd.kind) {\n                case \"insp\": {\n                    return this.interpreteInspect(cmd.path);\n                }\n                case \"move\": {\n                    return this.interpreteMoveElementToNode(cmd.epath, cmd.mpath, cmd.mindex);\n                }\n                case \"copy\": {\n                    return this.interpreteCopyElementToNode(cmd.epath, cmd.mpath, cmd.mindex);\n                }\n                case \"link\": {\n                    return this.interpreteLinkNodes(cmd.mpath, cmd.p, cmd.q);\n                }\n                case \"edit-alternation\": {\n                    return this.interpreteEditAlternation(cmd.path);\n                }\n                case \"edit-repetition\": {\n                    return this.interpreteEditRepetition(cmd.path);\n                }\n                case \"edit-element\": {\n                    return this.interpreteEditElement(cmd.path);\n                }\n                case \"edit-node\": {\n                    return this.interpreteEditNode(cmd.path, cmd.index);\n                }\n                case \"redef\": {\n                    return this.interpreteRedefineElement(cmd.oldName, cmd.newName, cmd.def);\n                }\n                case \"define\": {\n                    return this.interpreteDefineElement(cmd.name, cmd.def);\n                }\n                default: {\n                    console.log(cmd);\n                    return;\n                }\n            }\n        }\n    }\n    interpreteInspect(path: Path): void {\n        const r = new StandardRider(this.data.root, path);\n        const name = r.getElementContent().name;\n        // this.namespaceVr.setData({\n        //     ns: this.data.namespace,\n        //     elem: name\n        // })\n        this.namespaceVr.handle({\n            kind: \"focus\",\n            name: name\n        });\n    }\n    interpreteMoveElementToNode(ePath: Path, nPath: Path, nindex: number) {\n        const root1 = this.getData().root;\n        if (equal(ePath.slice(0, ePath.length - 1), nPath)) {\n            // same parent\n            const parentPath = nPath;\n            const eindex = ePath[ePath.length - 1];\n            const m = new StandardRider(root1, parentPath).getModule();\n            const e = m[eindex];\n            m.splice(eindex, 1);\n            m.splice((nindex <= eindex) ? nindex : (nindex - 1), 0, e);\n        } else {\n            const rider = new StandardRider(root1, ePath.slice(0, ePath.length - 1));\n            const m = rider.getModule();\n            const eindex = ePath[ePath.length - 1];\n            const e = m[eindex];\n            m.splice(eindex, 1);\n            rider.go(nPath);\n            rider.getModule().splice(nindex, 0, e);\n        }\n        this.setData({\n            namespace: this.data.namespace,\n            root: root1\n        });\n    }\n    interpreteCopyElementToNode(ePath: Path, nPath: Path, nindex: number) {\n        const data = this.getData()\n        const root1 = data.root;\n        if (equal(ePath.slice(0, ePath.length - 1), nPath)) {\n            // same parent\n            const parentPath = nPath;\n            const eindex = ePath[ePath.length - 1];\n            const m = new StandardRider(root1, parentPath).getModule();\n            const e = m[eindex];\n            m.splice(nindex, 0, e);\n        } else {\n            const rider = new StandardRider(root1, ePath);\n            const e = rider.getItem();\n            rider.go(nPath);\n            rider.getModule().splice(nindex, 0, e);\n        }\n        this.setData({\n            namespace: data.namespace,\n            root: root1\n        });\n    }\n    interpreteLinkNodes(path: Path, p: number, q: number): void {\n        const data = this.getData()\n        const root1 = data.root;\n        const rider = new StandardRider(root1, path);\n        const module = rider.getModule();\n        const piece = module.slice(min(p, q), max(p, q));\n        const item: ModuleItem = ((p < q)\n            ? { kind: \"alternation\", psubs: [{ prob: 0.5, mod: piece }, { prob: 0.5, mod: [] }] }\n            : { kind: \"repetition\", prob: 0.5, sub: piece });\n        module.splice(min(p, q), Math.abs(p-q), item);\n        return this.setData({\n            namespace: data.namespace,\n            root: root1\n        });\n    }\n}","import { Paper } from \"snapsvg\";\nimport { maxof, equal, zip, zip2, sum } from \"./utility/JSUtility\";\nimport Snap = require(\"snapsvg\");\nimport { PWMBox, InternalBox, SpacerBox, HandlerGroup } from \"./widget\";\nimport { UPath, ModuleEditCmd } from \"./ModelEditor\";\nimport { Controller, Editor } from \"./Widget/Widget\";\nimport { HTML } from \"./html\";\n\nimport { QuasiModule } from \"./SMDL/SMDL\";\nimport { Rider, Path } from \"./SMDL/Utility\";\n\n\nexport type ColoredElement = ColoredMotif | ColoredGMotif | ColoredSpacer;\n\n\ninterface ColoredMotif {\n    type: \"motif\";\n    name: string;\n    color: string;\n}\n\n\ninterface ColoredGMotif {\n    type: \"g-motif\";\n    name: string;\n    color: string;\n}\n\n\ninterface ColoredSpacer {\n    type: \"spacer\";\n    name: string;\n}\n\n\ntype ModelRider = Rider<ColoredElement>;\n\n\nexport class ModuleViewer extends Controller<QuasiModule<ColoredElement>, ModuleEditCmd>{\n    svg: SVGElement;\n    paper: Paper;\n    constructor(container: HTMLElement) {\n        super(container);\n        this.svg = HTML.ref(\"viewer\") as Node as SVGElement;\n        this.paper = Snap(this.svg);\n    }\n    displayData(container: HTMLElement, data: QuasiModule<ColoredElement>): void {\n        this.paper.clear();\n        const go = renderModel(this.paper, data, {\n            onDoubleClick: (path: UPath) => {\n                // snap cannot distinguish click and double click\n\n                // switch (path.kind) {\n                //     case \"element\": {\n                //         this.send({\n                //             kind: \"insp\",\n                //             path: path.path\n                //         });\n                //         return;\n                //     }\n                // }\n            },\n            onClick: (path: UPath) => {\n                switch (path.kind) {\n                    case \"node\": {\n                        return this.send({\n                            kind: \"edit-node\",\n                            path: path.path,\n                            index: path.index\n                        });\n                    }\n                    case \"element\": {\n                        return this.send({\n                            kind: \"edit-element\",\n                            path: path.path\n                        });\n                    }\n                    case \"alternation\": {\n                        this.send({\n                            kind: \"edit-alternation\",\n                            path: path.path\n                        });\n                        return;\n                    }\n                    case \"repetition\": {\n                        this.send({\n                            kind: \"edit-repetition\",\n                            path: path.path\n                        });\n                        return;\n                    }\n                    default: {\n                        return;\n                    }\n                }\n            },\n            onDragStart: (path: UPath) => { },\n            onDrop: (path1: UPath, path2: UPath, ctrlPressed: boolean) => {\n                if (path2 === null) {\n                    return;\n                } else if (path1.kind === \"element\" && path2.kind === \"node\") {\n                    if (ctrlPressed) {\n                        return this.send({\n                            kind: \"copy\",\n                            epath: path1.path,\n                            mpath: path2.path,\n                            mindex: path2.index\n                        });\n                    } else {\n                        return this.send({\n                            kind: \"move\",\n                            epath: path1.path,\n                            mpath: path2.path,\n                            mindex: path2.index\n                        });\n                    }\n                } else if (path1.kind === \"node\" && path2.kind === \"node\") {\n                    if (equal(path1.path, path2.path) && path1.index !== path2.index) {\n                        return this.send({\n                            kind: \"link\",\n                            mpath: path1.path,\n                            p: path1.index,\n                            q: path2.index\n                        });\n                    }\n                } else {\n                    return;\n                }\n            }\n        });\n        this.svg.setAttribute(\"width\", go.w.toString());\n        this.svg.setAttribute(\"height\", (go.a + go.d).toString());\n    }\n}\n\n\ninterface HighLevelHandlerGroup {\n    onDoubleClick: (path: UPath) => void;\n    onClick: (path: UPath) => void;\n    onDragStart: (path: UPath) => void;\n    onDrop: (path1: UPath, path2: UPath, ctrlPressed: boolean) => void;\n}\n\n\ninterface GObject {\n    a: number; // vertical distance above baseline \n    d: number; // vertical distance below baseline\n    w: number; // width\n    node: Snap.Element;\n}\n\n\nfunction renderModel(paper: Paper, m: QuasiModule<ColoredElement>, hg: HighLevelHandlerGroup) {\n\n    function profaneHandlerGroup(path: UPath): HandlerGroup {\n        return {\n            onDoubleClick: () => {\n                hg.onDoubleClick(path);\n            },\n            onClick: () => {\n                hg.onClick(path);\n            },\n            onDragStart: () => {\n                hg.onDragStart(path);\n            },\n            onDrop: (node: Node, ctrlPressed: boolean) => {\n                let attr;\n                if (node instanceof SVGElement && (attr = node.getAttribute(\"smdl-path\"))) {\n                    const path1 = JSON.parse(attr);\n                    hg.onDrop(path, path1, ctrlPressed);\n                    return;\n                } else {\n                    // hg.onDrop(path, null, ctrlPressed);\n                    return;\n                }\n            }\n        }\n    }\n\n    function renderModule(paper: Paper, rider: ModelRider): GObject {\n        paper.attr({\n            \"stroke\": \"black\",\n            \"fill\": \"black\"\n        });\n        const subs = rider.getChildRiders().map((rider) => {\n            return renderModuleItem(paper.g(), rider);\n        });\n        const a = subs.length == 0 ? 30 : maxof(subs.map((s) => s.a));\n        const d = subs.length == 0 ? 30 : maxof(subs.map((s) => s.d));\n\n        const len = 60;\n        let w = 0;\n        let n = 0;\n        const pushInternalElements = (w: number, pos: number): void => {\n            paper.line(w, a, w + len, a);\n            // little triangle\n            paper.path(Snap.format(\"M{x},{y} l-10,-5 v10\", {\n                \"x\": w + len,\n                \"y\": a\n            })).attr({\n                \"fill\": \"black\"\n            });\n\n            const path: UPath = {\n                kind: \"node\",\n                path: rider.getPath(),\n                index: n\n            }\n            InternalBox(paper, JSON.stringify(path), w + len / 2, a, len / 8, profaneHandlerGroup(path));\n        }\n        pushInternalElements(w, 0);\n        w += len;\n        n++;\n        for (const x of subs) {\n            // childElements.push(transloc(x.node, w, a - x.a));\n            x.node.transform(Snap.format(\"translate({x},{y})\", {\n                \"x\": w,\n                \"y\": a - x.a\n            }));\n            w += x.w;\n            pushInternalElements(w, n);\n            w += len;\n            n++;\n        }\n        return {\n            a: a,\n            d: d,\n            w: w,\n            node: paper\n        };\n    }\n\n    function renderModuleItem(paper: Paper, rider: ModelRider): GObject {\n        switch (rider.getItemKind()) {\n            case \"element\": {\n                return renderElement(paper, rider);\n            }\n            case \"alternation\": {\n                return renderAlternation(paper, rider);\n            }\n            case \"repetition\": {\n                return renderRepetition(paper, rider);\n            }\n            default: {\n                throw new Error();\n            }\n        }\n    }\n\n    function renderElement(paper: Paper, rider: ModelRider): GObject {\n\n        const renderMotif = (p: Path, name: string, color: string): GObject => {\n            const w = 70;\n            const h = 30;\n            const path: UPath = {\n                kind: \"element\",\n                path: rider.getPath()\n            };\n            PWMBox(paper, name, color, JSON.stringify(path), w, h, profaneHandlerGroup(path));\n            return {\n                a: h / 2,\n                d: h / 2,\n                w: w,\n                node: paper\n            };\n        }\n\n        const renderGMotif = (p: Path, name: string, color: string): GObject => {\n            const w = 100;\n            const h = 30;\n            const path: UPath = {\n                kind: \"element\",\n                path: rider.getPath()\n            };\n            PWMBox(paper, name, color, JSON.stringify(path), w, h, profaneHandlerGroup(path));\n            // PWMBox(paper, name, color, JSON.stringify(path), w, h, profaneHandlerGroup(path));\n            return {\n                a: h / 2,\n                d: h / 2,\n                w: w,\n                node: paper\n            };\n        }\n\n        const renderSpacer = (p: Path, name: string): GObject => {\n            const w = 50;\n            const h = 15;\n            const path: UPath = {\n                kind: \"element\",\n                path: rider.getPath()\n            };\n            SpacerBox(paper, name, JSON.stringify(path), w, h, profaneHandlerGroup(path));\n            return {\n                a: h / 2,\n                d: h / 2,\n                w: w,\n                node: paper\n            };\n        }\n\n        const elem = rider.getElementContent();\n        switch (elem.type) {\n            case \"motif\": {\n                return renderMotif(rider.getPath(), elem.name, elem.color);\n            }\n            case \"g-motif\": {\n                return renderGMotif(rider.getPath(), elem.name, elem.color);\n            }\n            case \"spacer\": {\n                return renderSpacer(rider.getPath(), elem.name);\n            }\n        }\n    }\n\n    function renderAlternation(paper: Paper, rider: ModelRider): GObject {\n        const leftPadding = 20;\n        const rightPadding = 10;\n        const topPadding = 10;\n        const botPadding = 10;\n        const interModulePadding = 15;\n        const probLabelOffset = -3;\n\n        const alter = rider.getAlternation();\n        const subGOs: GObject[] = rider.getChildRiders().map((m) => renderModule(paper.g(), m));\n        const subWidth = maxof(subGOs.map((go) => {\n            return go.w;\n        }));\n        const subLayoutParas: { x0: number; x1: number; y: number; z: number, prob: number; elem: Snap.Element }[] = [];\n        let offsetY = topPadding;\n        for (const [go, ps] of zip2(subGOs, alter.psubs)) {\n            subLayoutParas.push({\n                x0: leftPadding + (subWidth - go.w) / 2,\n                x1: leftPadding + (subWidth + go.w) / 2,\n                y: offsetY,\n                z: offsetY + go.a,\n                prob: ps.prob,\n                elem: go.node\n            });\n            offsetY += go.a + go.d + interModulePadding;\n        }\n        const totalHeight = offsetY - interModulePadding + botPadding;\n        const totalWidth = leftPadding + subWidth + rightPadding;\n        const leftEnd = 0;\n        const rightEnd = leftPadding + subWidth + rightPadding;\n        for (const para of subLayoutParas) {\n            // translate position\n            paper.add(para.elem.transform(Snap.format(\"translate({x},{y})\", {\n                \"x\": para.x0,\n                \"y\": para.y\n            })));\n            // left/right extension\n            paper.line(leftEnd, para.z, para.x0, para.z);\n            paper.line(para.x1, para.z, rightEnd, para.z);\n        }\n        // probability labels\n        const pp = paper.g();\n        const probs = subLayoutParas.map((para) => {\n            return para.prob;\n        });\n        for (const para of subLayoutParas) {\n            pp.text(leftEnd, para.z + probLabelOffset, para.prob.toFixed(3))\n        }\n        const jointTop = subGOs[0].a + topPadding;\n        const jointBot = totalHeight - subGOs[subGOs.length - 1].d - botPadding;\n        pp.line(leftEnd, jointTop, leftEnd, jointBot);\n        pp.line(rightEnd, jointTop, rightEnd, jointBot);\n        pp.hover(\n            () => {\n                pp.attr({\n                    \"stroke\": \"blue\",\n                    \"fill\": \"blue\"\n                });\n            },\n            () => {\n                pp.attr({\n                    \"stroke\": \"black\",\n                    \"fill\": \"black\"\n                });\n            })\n        pp.click(() => {\n            hg.onClick({\n                kind: \"alternation\",\n                path: rider.getPath()\n            });\n        });\n        return {\n            a: totalHeight / 2,\n            d: totalHeight / 2,\n            w: totalWidth,\n            node: paper\n        };\n    }\n\n    function renderRepetition(paper: Paper, rider: ModelRider): GObject {\n        const rep = rider.getRepetition();\n        const arrowHeight = 20;\n        const padding = 5;\n        const x = renderModule(paper.g(), rider.getChildRiders()[0]);\n        x.node.transform(Snap.format(\"translate({x},{y})\", {\n            \"x\": padding,\n            \"y\": arrowHeight\n        }));\n        const pp = paper.g();\n        // reverse arrow\n        pp.path(Snap.format(\"M{x},{y} v-{h} h{w} v{h}\", {\n            \"x\": padding / 2,\n            \"y\": x.a + arrowHeight,\n            \"h\": x.a + arrowHeight / 2,\n            \"w\": x.w + padding\n        })).attr({\n            \"fill\": \"none\"\n        });\n        // triangle\n        pp.path(Snap.format(\"M{x},{y} l-5,-10 h10\", {\n            \"x\": padding / 2,\n            \"y\": x.a + arrowHeight - padding / 2\n        }));\n        // dots\n        const dotRadius = padding / 2;\n        pp.circle(dotRadius, x.a + arrowHeight, dotRadius);\n        pp.circle(x.w + dotRadius * 3, x.a + arrowHeight, dotRadius);\n        // probability label\n        const labelX = x.w + dotRadius * 3;\n        const labelY = x.a + arrowHeight - 10;\n        pp.text(labelX, labelY, rep.prob.toFixed(3));\n        pp.hover(\n            () => {\n                pp.attr({\n                    \"stroke\": \"blue\",\n                    \"fill\": \"blue\"\n                });\n            },\n            () => {\n                pp.attr({\n                    \"stroke\": \"black\",\n                    \"fill\": \"black\"\n                });\n            }\n        )\n        pp.click(\n            () => {\n                hg.onClick({\n                    kind: \"repetition\",\n                    path: rider.getPath()\n                })\n            }\n        )\n        return {\n            a: x.a + arrowHeight,\n            d: x.d,\n            w: x.w + 2 * padding,\n            node: paper\n        }\n    }\n\n    return renderModule(paper, new Rider(m));\n}\n\n\n","import { Editor, Viewer } from \"./Widget/Widget\";\nimport { StringEditor } from \"./Widget/StringEditor\";\nimport { PWM, Distribution } from \"./SMDL/SMDL\";\nimport { HTML } from \"./html\";\nimport * as SeqLogo from \"@baliga-lab/sequencelogo.js\";\nimport { later } from \"./utility/JSUtility\";\nimport { ColorEditor } from \"./Widget/ColorEditor\";\nimport { DistributionEditor } from \"./DistributionEditor\";\n\n\ninterface Motif {\n    color: string;\n    matrix: PWM;\n}\n\n\nclass PWMEditor extends Editor<PWM> {\n    private tableEl: HTMLTableElement;\n    displayData(container: HTMLElement, data: PWM): void {\n\n        const buildTable = (pwm: PWM): HTMLTableElement => {\n            const el = HTML.element(\"table\", {\n                \"class\": \"w3-table-all w3-centered\"\n            });\n            el.addEventListener(\"input\", ()=>{\n                this.emitDataChange();\n            })\n            const thEl = HTML.build({\n                p: HTML.element(\"tr\"),\n                ch: [\"A\", \"C\", \"G\", \"T\"].map((n) => HTML.build({\n                    p: HTML.element(\"th\"),\n                    ch: [n]\n                }))\n            });\n            const rows = [];\n            for (const r of pwm) {\n                rows.push(HTML.build({\n                    p: HTML.element(\"tr\"),\n                    ch: [r.A, r.C, r.G, r.T].map((n) => HTML.build({\n                        p: HTML.element(\"td\", {\n                            \"contenteditable\": \"true\"\n                        }),\n                        ch: [n.toFixed(3)]\n                    }))\n                }));\n            }\n            const addRowBtn = HTML.element(\"div\", {\n                \"class\": \"w3-button\"\n            }, { \"display\": \"block\" }, [\"+\"]);\n            const delRowBtn = HTML.element(\"div\", {\n                \"class\": \"w3-button\"\n            }, { \"display\": \"block\" }, [\"-\"]);\n            const buttonRow = HTML.element(\"tr\", {}, {}, [\n                HTML.element(\"td\", { \"colspan\": \"2\" }, { \"padding\": \"0\" }, [addRowBtn]),\n                HTML.element(\"td\", { \"colspan\": \"2\" }, { \"padding\": \"0\" }, [delRowBtn]),\n            ]);\n            addRowBtn.addEventListener(\"click\", () => {\n                const data: PWM = this.getData();\n                this.setData(data.concat([{\n                    A: 0.25,\n                    C: 0.25,\n                    G: 0.25,\n                    T: 0.25,\n                }]));\n            });\n            delRowBtn.addEventListener(\"click\", () => {\n                const data: PWM = this.getData();\n                this.setData(data.slice(0, data.length-1));\n            });\n            return HTML.build({\n                p: el,\n                ch: [thEl].concat(rows, [buttonRow])\n            }) as HTMLTableElement;\n        }\n        this.tableEl = buildTable(data);\n        HTML.inner(container, [this.tableEl]);\n    }\n    getData(): PWM {\n        const rows = this.tableEl.rows;\n        const pwm: PWM = [];\n        for (let i = 1;  i < rows.length-1; i++) {\n            // overlook header and button row\n            pwm.push({\n                A: parseFloat(rows[i].cells[0].innerText),\n                C: parseFloat(rows[i].cells[1].innerText),\n                G: parseFloat(rows[i].cells[2].innerText),\n                T: parseFloat(rows[i].cells[3].innerText)\n            });\n        }\n        return pwm;\n    }\n}\n\n\nclass SeqLogoViewer extends Viewer<PWM> {\n    static count = 0;\n    static newID(): string {\n        SeqLogoViewer.count ++;\n        return \"motif-viewer-canvas\" + SeqLogoViewer.count.toString();\n    }\n    private id: string;\n    constructor(container: HTMLElement) {\n        super(container);\n        this.id = SeqLogoViewer.newID();\n        const logoEl = HTML.element(\"div\", { \"id\": this.id });\n        HTML.inner(container, [logoEl]);\n    }\n    displayData(container: HTMLElement, data: PWM): void {\n\n        function transformMotif(pwm: PWM): SeqLogo.PSSM {\n            return {\n                alphabet: [\"A\", \"C\", \"G\", \"T\"],\n                values: pwm.map((v) => [v.A, v.C, v.G, v.T])\n            };\n        }\n        SeqLogo.makeLogo(this.id, transformMotif(data), {});\n    }\n}\n\n\nexport class MotifEditor extends Editor<Motif> {\n    colorEr: ColorEditor;\n    pwmEr: PWMEditor;\n    seqlogoVr: SeqLogoViewer;\n    constructor(container: HTMLElement) {\n        super(container);\n        this.colorEr = new ColorEditor(HTML.box(), \"Color\");\n        this.pwmEr = new PWMEditor(HTML.box());\n        this.seqlogoVr = new SeqLogoViewer(HTML.box());\n        HTML.inner(container, [this.colorEr.getDOM(), \"PWM:\", this.pwmEr.getDOM(), this.seqlogoVr.getDOM()]);\n        this.pwmEr.registerHandler((data)=>{\n            this.seqlogoVr.setData(data);\n        })\n    }\n    displayData(container: HTMLElement, data: Motif): void {\n        this.colorEr.setData(data.color);\n        this.pwmEr.setData(data.matrix);\n        this.seqlogoVr.setData(data.matrix);\n    }\n    getData(): Motif {\n        return {\n            color: this.colorEr.getData(),\n            matrix: this.pwmEr.getData()\n        };\n    }\n}\n\n\ninterface GMotif {\n    distribution: Distribution;\n    color: string;\n    matrix: PWM;\n}\n\n\nexport class GMotifEditor extends Editor<GMotif> {\n    distEr: DistributionEditor;\n    colorEr: ColorEditor;\n    pwmEr: PWMEditor;\n    seqlogoVr: SeqLogoViewer;\n    constructor(container: HTMLElement) {\n        super(container);\n        this.distEr = new DistributionEditor();\n        this.colorEr = new ColorEditor(HTML.box(), \"Color\");\n        this.pwmEr = new PWMEditor(HTML.box());\n        this.seqlogoVr = new SeqLogoViewer(HTML.box());\n        HTML.inner(container, [this.distEr.getDOM(), this.colorEr.getDOM(), \"PWM:\", this.pwmEr.getDOM(), this.seqlogoVr.getDOM()]);\n        this.pwmEr.registerHandler((data)=>{\n            this.seqlogoVr.setData(data);\n        })\n    }\n    displayData(container: HTMLElement, data: GMotif): void {\n        this.distEr.setData(data.distribution);\n        this.colorEr.setData(data.color);\n        this.pwmEr.setData(data.matrix);\n        this.seqlogoVr.setData(data.matrix);\n    }\n    getData(): GMotif {\n        return {\n            distribution: this.distEr.getData(),\n            color: this.colorEr.getData(),\n            matrix: this.pwmEr.getData()\n        };\n    }\n}\n","import { Module, ModuleItem } from \"./SMDL/SMDL\";\nimport { HTML } from \"./html\";\nimport { Viewer, Editor, Controller, Controllee } from \"./Widget/Widget\";\nimport { ListViewer } from \"./Widget/ListViewer\";\nimport { StringViewer } from \"./Widget/StringViewer\";\nimport { MotifEditor } from \"./MotifEditor\";\nimport { SpacerEditor } from \"./SpacerEditor\";\nimport { ElementEditor } from \"./ElementEditor\";\n\n\nimport { Namespace } from \"./SMDL/SMDL\";\nimport { NamespaceEditCmd } from \"./ModelEditor\";\nexport { NamespaceViewer };\n\n\ntype FocusableNamespace = {\n    ns: Namespace;\n    elem: string;\n};\n\n\ntype ElementList = string[];\ntype FocusElement = {\n    kind: \"focus\"\n    name: string;\n}\nclass NameListViewer extends Controller<ElementList, FocusElement> {\n    displayData(container: HTMLElement, data: string[]): void {\n        HTML.inner(container, data.map((elem) => {\n            const e = HTML.element(\"div\",\n                {\n                    \"class\": \"w3-button\"\n                },\n                {\n                    \"border-bottom\": \"1px solid grey\"\n                },\n                [elem]\n            )\n            e.addEventListener(\"click\", () => {\n                this.send({\n                    kind: \"focus\",\n                    name: elem\n                });\n            });\n            return e;\n        }));\n    }\n}\n\n\nclass InspectorToolbar extends Controller<string[], string> {\n    displayData(container: HTMLElement, data: string[]): void {\n        HTML.inner(container, data.map((toolname) => {\n            const e = HTML.element(\"button\", {\n                \"class\": \"w3-button w3-border w3-small w3-teal\"\n            }, {}, [toolname]);\n            e.addEventListener(\"click\", () => {\n                this.send(toolname);\n            })\n            return e;\n        }))\n    }\n}\n\n\n// class NamespaceViewer extends Controller<FocusableNamespace, NamespaceEditCmd> implements Controllee<string>, Controllee<FocusElement> {\nclass NamespaceViewer extends Controller<Namespace, NamespaceEditCmd> implements Controllee<string | FocusElement> {\n    handleNewMotif(): void {\n\n        const defineMotif = (name: string) => {\n            const data = this.getData();\n            this.send({\n                kind: \"define\",\n                name: name,\n                def: {\n                    kind: \"motif\",\n                    color: \"#ffffff\",\n                    matrix: []\n                }\n            });\n        }\n\n        const name = window.prompt(\"The name of the new motif:\");\n        if (name !== null) {\n            defineMotif(name);\n        }\n    }\n    handleNewGMotif(): void {\n\n        const defineMotif = (name: string) => {\n            const data = this.getData();\n            this.send({\n                kind: \"define\",\n                name: name,\n                def: {\n                    kind: \"g-motif\",\n                    distribution: { from: 0, probs: [1] },\n                    color: \"#ffffff\",\n                    matrix: []\n                }\n            });\n        }\n\n        const name = window.prompt(\"The name of the new g-motif:\");\n        if (name !== null) {\n            defineMotif(name);\n        }\n    }\n    handleNewSpacer(): void {\n\n        const defineSpacer = (name: string) => {\n            const data = this.getData();\n            this.send({\n                kind: \"define\",\n                name: name,\n                def: {\n                    kind: \"spacer\",\n                    distribution: { from: 0, probs: [1] },\n                }\n            });\n        }\n\n        const name = window.prompt(\"The name of the new spacer:\");\n        if (name !== null) {\n            defineSpacer(name);\n        }\n    }\n    private nameListViewer: NameListViewer;\n    private elementEditor: ElementEditor;\n    private focus: string;\n    constructor(container: HTMLElement) {\n        super(container);\n        container.setAttribute(\"style\", HTML.style({\n            \"display\": \"flex\",\n            \"flex-direction\": \"row\"\n        }));\n        const nameListEl = HTML.element(\"div\", {\n            \"style\": HTML.style({\n                \"flex-grow\": \"2\",\n                \"width\": \"10em\",\n                \"display\": \"flex\",\n                \"flex-direction\": \"column\"\n            })\n        });\n        const toolbarEl = HTML.element(\"div\", {\n            \"class\": \"w3-bar w3-teal\"\n        }, {\n                \"flex-shrink\": \"0\",\n                \"padding\": \"0.2em\"\n            });\n        const elementEl = HTML.element(\"div\", {}, {\n            \"overflow-y\": \"scroll\",\n            \"flex-grow\": \"2\"\n        });\n\n        const newMotifEl = HTML.element(\"div\", {\n            \"class\": \"w3-button w3-border\"\n        }, {}, [\"New Motif\"]);\n        newMotifEl.addEventListener(\"click\", () => {\n            this.handleNewMotif();\n        });\n\n        const newGMotifEl = HTML.element(\"div\", {\n            \"class\": \"w3-button w3-border\"\n        }, {}, [\"New G-Motif\"]);\n        newGMotifEl.addEventListener(\"click\", () => {\n            this.handleNewGMotif();\n        });\n\n        const newSpacerEl = HTML.element(\"div\", {\n            \"class\": \"w3-button w3-border\"\n        }, {}, [\"New Spacer\"]);\n        newSpacerEl.addEventListener(\"click\", () => {\n            this.handleNewSpacer();\n        });\n\n\n        HTML.build({\n            p: container,\n            ch: [\n                {\n                    p: HTML.element(\"div\", {}, {\n                        \"display\": \"flex\",\n                        \"flex-direction\": \"column\"\n                    }),\n                    ch: [nameListEl, newMotifEl, newGMotifEl, newSpacerEl]\n                },\n                HTML.element(\"div\", {}, {\n                    \"display\": \"flex\",\n                    \"flex-direction\": \"column\"\n                }, [toolbarEl, elementEl])\n            ]\n        });\n\n        // setup name list\n        this.nameListViewer = new NameListViewer(nameListEl);\n        this.nameListViewer.bind(this);\n\n        // setup toolbar\n        const toolbar = new InspectorToolbar(toolbarEl);\n        toolbar.setData([\"save\", \"reset\", \"delete\"]);\n        toolbar.bind(this);\n\n        this.elementEditor = new ElementEditor(elementEl);\n    }\n    handle(cmd: string | FocusElement): void {\n        console.log(\"NSViewer\", cmd);\n        if (typeof cmd === \"string\") {\n            switch (cmd) {\n                case \"save\": {\n                    const data = this.getData();\n                    const edata = this.elementEditor.getData();\n                    return this.send({\n                        kind: \"redef\",\n                        oldName: this.focus,\n                        newName: edata.name,\n                        def: edata.def\n                    });\n                }\n                case \"reset\": {\n                    const data = this.getData();\n                    return this.elementEditor.setData({\n                        name: this.focus,\n                        def: data[this.focus]\n                    });\n                }\n                case \"delete\": {\n                    return;\n                }\n                default: {\n                    throw new Error();\n                }\n            }\n        } else {\n            // this.setData({\n            //     ns: this.getData().ns,\n            //     elem: cmd.name\n            // });\n            this.focus = cmd.name;\n            this.displayData(this.dom, this.data);\n        }\n    }\n    // displayData(container: HTMLElement, data: { ns: Namespace; elem: string; }): void {\n    displayData(container: HTMLElement, data: Namespace) {\n        const names = Object.keys(data).sort();\n        if (this.focus) {\n            this.nameListViewer.setData(names);\n            this.elementEditor.setData({\n                name: this.focus,\n                def: data[this.focus]\n            });\n        } else {\n            this.nameListViewer.setData(names);\n        }\n    }\n}\n","import { QuasiModule, QuasiModuleItem, Element, QuasiAlternation, QuasiRepetition } from \"./SMDL\";\n\nexport { StandardRider, Rider, Path };\n\n\ntype Path = number[];\ntype Node<E> = ModuleNode<E> | ModuleItemNode<E>;\ninterface ModuleNode<E> {\n    kind: \"module\";\n    module: QuasiModule<E>;\n};\ninterface ModuleItemNode<E> {\n    kind: \"item\";\n    item: QuasiModuleItem<E>;\n}\n\n\nclass Rider<E> {\n    private root: QuasiModule<E>;\n    node: Node<E>;\n    path: Path;\n    constructor(root: QuasiModule<E>, path: Path = [], node?: Node<E>) {\n        this.root = root;\n        if (node === undefined) {\n            this.path = [];\n            this.node = { kind: \"module\", module: root };\n            this.go(path);\n        } else {\n            this.path = path;\n            this.node = node;\n        }\n    }\n    copy(): Rider<E> {\n        return new Rider<E>(this.root, this.path);\n    }\n    up(): void {\n        this.go(this.path.slice(0, this.path.length-1));\n    }\n    go(path: Path): void {\n        this.node = travel({\n            kind: \"module\",\n            module: this.root\n        }, path);\n        this.path = path;\n    }\n    getPath(): Path {\n        return this.path;\n    }\n    getNodeKind(): \"module\" | \"item\" {\n        return this.node.kind;\n    }\n    getModule(): QuasiModule<E> {\n        if (this.node.kind == \"module\") {\n            return this.node.module;\n        }\n        else {\n            throw new Error(\"not a module\");\n        }\n    }\n    getItem(): QuasiModuleItem<E> {\n        if (this.node.kind == \"item\") {\n            return this.node.item;\n        }\n        else {\n            throw new Error(\"not an item\");\n        }\n    }\n    getAlternation(): QuasiAlternation<E> {\n        const item = this.getItem();\n        if (item.kind === \"alternation\") {\n            return item;\n        } else {\n            throw new Error(\"not an alternation\");\n        }\n    }\n    getRepetition(): QuasiRepetition<E> {\n        const item = this.getItem();\n        if (item.kind === \"repetition\") {\n            return item;\n        } else {\n            throw new Error(\"not a rep\");\n        }\n    }\n    getItemKind(): \"element\" | \"alternation\" | \"repetition\" {\n        return this.getItem().kind;\n    }\n    isElement(): boolean {\n        return this.getNodeKind() == \"item\" && this.getItem().kind == \"element\";\n    }\n    getElementContent(): E {\n        const it = this.getItem();\n        if (it.kind == \"element\") {\n            return it;\n        } else {\n            throw new Error();\n        }\n    }\n    getChildRiders(): Rider<E>[] {\n        const node = this.node;\n        if (node.kind == \"module\") {\n            const m = node.module;\n            let n = 0;\n            return m.map((item, index) => {\n                const node: ModuleItemNode<E> = { kind: \"item\", item: item };\n                const path = this.path.concat([index]);\n                return new Rider<E>(this.root, path, node);\n            })\n        } else if (node.kind == \"item\") {\n            const t = node.item;\n            if (t.kind == \"element\") {\n                throw new Error(\"elementary node has no child node\");\n            }\n            else if (t.kind == \"alternation\") {\n                return t.psubs.map((ps, i) => {\n                    const m = ps.mod;\n                    return new Rider<E>(this.root, this.path.concat([i]), { kind: \"module\", module: m });\n                });\n            }\n            else if (t.kind == \"repetition\") {\n                return [\n                    new Rider(this.root, this.path.concat([0]), { kind: \"module\", module: t.sub })\n                ];\n            } else {\n                throw new Error(\"bad item node\");\n            }\n        } else {\n            throw new Error(\"bad node\");\n        }\n    }\n}\n\n\nclass StandardRider extends Rider<Element> { };\n\n\nfunction travel<E>(node: Node<E>, path: Path): Node<E> {\n    for (let i = 0; i < path.length; i++) {\n        const n = path[i];\n        if (node.kind == \"module\") {\n            const m = node.module;\n            node = { kind: \"item\", item: m[n] };\n            continue;\n        } else if (node.kind == \"item\") {\n            const t = node.item;\n            switch (t.kind) {\n                case \"element\": {\n                    throw new Error(\"elementary node has no child node\");\n                }\n                case \"alternation\": {\n                    node = { kind: \"module\", module: t.psubs[n].mod };\n                    continue;\n                }\n                case \"repetition\": {\n                    if (n === 0) {\n                        node = { kind: \"module\", module: t.sub };\n                        continue\n                    } else {\n                        throw new Error(\"bad index\");\n                    }\n                }\n            }\n        } else {\n            throw new Error(\"bad node\");\n        }\n    }\n    return node;\n}\n\n\nexport function transformModule<E1, E2>(m: QuasiModule<E1>, p: (e: E1) => E2) {\n    return m.map((t): QuasiModuleItem<E2> => {\n        switch (t.kind) {\n            case \"element\": {\n                const sign: { kind: \"element\" } = { kind: \"element\" };\n                return Object.assign(p(t), sign);\n            }\n            case \"alternation\": {\n                return {\n                    kind: \"alternation\",\n                    psubs: t.psubs.map((ps) => {\n                        return {\n                            prob: ps.prob,\n                            mod: transformModule<E1, E2>(ps.mod, p)\n                        }\n                    })\n                };\n            }\n            case \"repetition\": {\n                return {\n                    kind: \"repetition\",\n                    prob: t.prob,\n                    sub: transformModule<E1, E2>(t.sub, p)\n                };\n            }\n        }\n    })\n}","import { Editor } from \"./Widget/Widget\";\nimport { HTML } from \"./html\";\nimport { StringEditor } from \"./Widget/StringEditor\";\nimport { DistributionEditor } from \"./DistributionEditor\";\nimport { Distribution } from \"./SMDL/SMDL\";\n\n\ninterface Spacer {\n    distribution: Distribution;\n};\n\n\nexport class SpacerEditor extends Editor<Spacer> {\n    distEd: DistributionEditor;\n    constructor(container: HTMLElement) {\n        super(container);\n        const nameEdEl = HTML.box();\n        const distEdEl = HTML.box();\n        const distEd = new DistributionEditor(distEdEl);\n        this.distEd = distEd;\n        HTML.build({\n            p: container,\n            ch: [ this.distEd.getDOM() ]\n        });\n    }\n    displayData(container: HTMLElement, data: Spacer): void {\n        this.distEd.setData(data.distribution);\n    }\n    getData(): Spacer {\n        return {\n            distribution: this.distEd.getData()\n        };\n    }\n}","import { Controller, $Controller, Viewer, Controller_, classof } from \"./Widget\";\nimport { HTML } from \"../html\";\n\n\nexport interface ButtonCmd {\n    kind: \"button\",\n    message: string;\n}\n\n\ninterface ButtonData {\n    label: string | Node | HTMLElement;\n    message: string;\n}\n\n\nclass ButtonBase extends Viewer<ButtonData> {\n    protected buttonEl: HTMLElement;\n    init() {\n        super.init();\n        this.buttonEl = HTML.element(\"button\", {}, {})\n        HTML.b({\n            p: this.getDOM(),\n            ch: [ this.buttonEl ]\n        })\n    }\n    displayData(container: HTMLElement, data: ButtonData): void {\n        HTML.b({\n            p: this.buttonEl,\n            ch: [data.label]\n        });\n    }\n}\n\n\nexport class Button extends $Controller<classof<ButtonBase>, ButtonCmd>(ButtonBase) {\n    init() {\n        super.init();\n        this.buttonEl.addEventListener(\"click\", () => {\n            this.send({\n                kind: \"button\",\n                message: this.getData().message\n            })\n        })\n    }\n}\n\n\n\n// class Button extends Viewer<ButtonData> implements Controller_<Cmd> {\n//     displayData(container: HTMLElement, data: ButtonData): void {\n//         const btn = HTML.element(\"button\", {}, {}, [data.label]);\n//         btn.addEventListener(\"click\", () => {\n//             this.send({\n//                 kind: \"button\",\n//                 message: data.message\n//             });\n//         });\n//         HTML.inner(container, [btn]);\n//     }\n// }","import { HTML } from \"../html\";\nimport { Editor } from \"./Widget\";\n\n\nexport type ColorData = string;\n\n\nexport class ColorEditor extends Editor<ColorData> {\n    inputElement: HTMLInputElement;\n    constructor(container: HTMLElement, label?: string) {\n        super(container);\n        this.inputElement = HTML.element(\"input\", {\n            \"type\": \"color\"\n        }) as HTMLInputElement;\n        this.inputElement.addEventListener(\"change\", ()=>{\n            this.emitDataChange();\n        });\n        label = label ? (label + \": \") : \"\";\n        HTML.build({\n            p: container,\n            ch: [\n                {\n                    p: HTML.element(\"label\"),\n                    ch: [ label, this.inputElement ]\n                }\n            ]\n        });\n    }\n    displayData(container: HTMLElement, data: ColorData): void {\n        this.inputElement.value = data;\n    }\n    getData(): ColorData {\n        return this.inputElement.value;\n    }\n}","import { Frame, Widget } from \"./Widget\";\nimport { HTML } from \"../html\";\n\n\nexport class Pile extends Frame {\n    position(container: HTMLElement, children: Widget[]): void {\n        HTML.b({\n            p: container,\n            ch: [{\n                p: {\n                    tag: \"div\",\n                    style: {\n                        \"display\": \"flex\",\n                        \"flex-direction\": \"column\"\n                    }\n                },\n                ch: children.map((c) => {\n                    return c.getDOM();\n                })\n            }]\n        })\n    }\n}\n\n\nexport class HPile extends Frame {\n    position(container: HTMLElement, children: Widget[]): void {\n        HTML.b({\n            p: container,\n            ch: [{\n                p: {\n                    tag: \"div\",\n                    style: {\n                        \"display\": \"flex\",\n                        \"flex-direction\": \"row\"\n                    }\n                },\n                ch: children.map((c) => {\n                    return c.getDOM();\n                })\n            }]\n        })\n    }\n}","import { Viewer, Editor } from \"./Widget\";\nimport { HTML } from \"../html\";\n\n\ntype LabeledString = {\n    label: string;\n    content: string;\n};\n\n\nexport class StringEditor extends Editor<string|LabeledString> {\n    private inputElement: HTMLInputElement;\n    private labelTextElement: HTMLSpanElement;\n    constructor(...x: any[]) {\n        super(...x);\n        const container = this.getDOM();\n        this.inputElement = HTML.element(\"input\", {\n            \"type\": \"text\"\n        }) as HTMLInputElement;\n        this.labelTextElement = HTML.element(\"span\") as HTMLSpanElement;\n        HTML.build({\n            p: container,\n            ch: [{\n                p: HTML.element(\"label\"),\n                ch: [ this.labelTextElement, this.inputElement ]\n            }]\n        });\n    }\n    displayData(container: HTMLElement, data: string|LabeledString): void {\n        this.inputElement.addEventListener(\"change\", ()=>{\n            this.emitDataChange();\n        });\n        if (typeof data === \"string\") {\n            HTML.inner(this.labelTextElement, []);\n            this.inputElement.value = data;\n        } else {\n            HTML.inner(this.labelTextElement, [ data.label + \": \" ]);\n            this.inputElement.value = data.content;\n        }\n    }\n    getData(): string {\n        return this.inputElement.value;\n    }\n}","import { Widget, Controllee } from \"./Widget\";\nimport { HTML } from \"../html\";\n\n\nexport function popup(widget: Widget, handlers: { onclose: ()=>void }): Controllee<\"close\"> {\n    const box = HTML.b({\n        tag: \"div\",\n        style: {\n            \"position\": \"fixed\",\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"top\": \"0\",\n            \"left\": \"0\",\n            \"background-color\": \"rgba(100,100,100,0.5)\",\n            \"display\": \"flex\",\n            \"align-items\": \"center\",\n            \"justify-content\": \"center\"\n        },\n        ch: [\n            {\n                tag: \"div\",\n                style: {\n                    \"background-color\": \"white\",\n                    \"border\": \"1px solid black\",\n                    \"padding\": \"1em\"\n                },\n                ch: [ widget.getDOM() ]\n            }\n        ]\n    });\n    const close = () => {\n        HTML.body().removeChild(box);\n        handlers.onclose();\n    }\n    box.addEventListener(\"click\", (e)=>{\n        if (e.target === box) {\n            close();\n        }\n    })\n    HTML.body().appendChild(box);\n    return new (class implements Controllee<\"close\"> {\n        handle(cmd: \"close\"): void {\n            close();\n        }\n    });\n}\n\n\nexport function confirm(widget: Widget, handlers: { cancel: () => void; ok: () => void }): Controllee<\"close\"> {\n    const okButton = HTML.e({\n        tag: \"button\",\n        attr: {\n            \"type\": \"button\"\n        },\n        style: {\n            \"color\": \"green\",\n            \"width\": \"100%\"\n        },\n        ch: [ \"OK\" ]\n    });\n    const box = HTML.b({\n        tag: \"div\",\n        style: {\n            \"position\": \"fixed\",\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"top\": \"0\",\n            \"left\": \"0\",\n            \"background-color\": \"rgba(100,100,100,0.5)\",\n            \"display\": \"flex\",\n            \"align-items\": \"center\",\n            \"justify-content\": \"center\"\n        },\n        ch: [\n            {\n                tag: \"div\",\n                style: {\n                    \"background-color\": \"white\",\n                    \"border\": \"1px solid black\",\n                    \"padding\": \"1em\"\n                },\n                ch: [\n                    widget.getDOM(),\n                    okButton\n                ]\n            }\n        ]\n    });\n    const remove = () => {\n        HTML.body().removeChild(box);\n    }\n    const close = () => {\n        remove();\n        handlers.cancel();\n    }\n    okButton.addEventListener(\"click\", ()=>{\n        remove();\n        handlers.ok();\n    })\n    box.addEventListener(\"click\", (e)=>{\n        if (e.target === box) {\n            close();\n        }\n    })\n    HTML.body().appendChild(box);\n    return new (class implements Controllee<\"close\"> {\n        handle(cmd: \"close\"): void {\n            close();\n        }\n    });\n}","import { later } from \"../utility/JSUtility\";\n\nexport {\n    Widget, Frame, Viewer, Editor, Controller, Controllee, classof, Controller_, $Controller\n}\n\n\nabstract class Widget {\n    protected dom: HTMLElement;\n    constructor(root?: HTMLElement) {\n        this.dom = root || document.createElement(\"div\");\n        this.init();\n    }\n    protected init(): void {\n        // for those who want to initialize without overriding constructor procedure\n    }\n    public getDOM(): HTMLElement {\n        return this.dom;\n    }\n}\n\n\nabstract class Frame extends Widget {\n    protected children: Widget[] = [];\n    abstract position(container: HTMLElement, children: Widget[]): void;\n    setChildren(children: Widget[]): void {\n        this.children = children;\n        this.position(this.getDOM(), children);\n    }\n    getChildren(): Widget[] {\n        return this.children.slice(0, this.children.length);\n    }\n}\n\n\nabstract class Viewer<D> extends Widget {\n    protected dataSetted: boolean = false;\n    protected data: D;\n    public setData(data: D): void {\n        this.dataSetted = true;\n        this.data = data;\n        this.displayData(this.dom, this.data);\n    }\n    public getData(): D {\n        if (this.dataSetted) {\n            return JSON.parse(JSON.stringify(this.data));\n        } else {\n            throw new Error(\"tried getting data before initialization\");\n        }\n    }\n    abstract displayData(container: HTMLElement, data: D): void;\n}\n\n\nabstract class Editor<D> extends Viewer<D> {\n    protected dataChangeHandlers: Set<(data: D) => void> = new Set();\n    public registerHandler(handler: (data: D) => void) {\n        this.dataChangeHandlers.add(handler);\n    }\n    public cancelHandler(handler: (data: D) => void) {\n        this.dataChangeHandlers.delete(handler);\n    }\n    public setData(data: D): void {\n        super.setData(data);\n        this.emitDataChange();\n    }\n    protected emitDataChange(): void {\n        const data = this.getData();\n        for (const handler of this.dataChangeHandlers) {\n            handler(data);\n        }\n    }\n}\n\n\ninterface Controllee<Command> {\n    handle(cmd: Command): void;\n}\n\n\nabstract class Controller<D, Command> extends Viewer<D> implements Controller_<Command> {\n    private eeSet = new Set<Controllee<Command>>();\n    bind(ee: Controllee<Command>): void {\n        this.eeSet.add(ee);\n    }\n    send(cmd: Command) {\n        for (const ee of this.eeSet) {\n            ee.handle(cmd);\n        }\n    }\n}\n\n\ninterface Controller_<Command> {\n    bind(ee: Controllee<Command>): void;\n    send(cmd: Command): void;\n}\n\n\ntype classof<C> = new (...x: any[]) => C;\n// function $Controller<BaseClass extends Widget, Command>(W: classof<BaseClass>): classof<BaseClass & Controller_<Command>> {\nfunction $Controller<BCConstructor extends classof<Widget>, Command>(bcc: BCConstructor) {\n    return class extends bcc implements Controller_<Command> {\n        private eeSet = new Set<Controllee<Command>>();\n        public bind(ee: Controllee<Command>): void {\n            this.eeSet.add(ee);\n        }\n        public send(cmd: Command): void {\n            for (const ee of this.eeSet) {\n                ee.handle(cmd);\n            }\n        }\n    };\n} ","import { format } from \"./utility/JSUtility\";\nimport { SVG } from \"./utility/svg\";\n\ninterface ElementAttr {\n    [key: string]: string;\n}\n\n\ntype BuildBlock = string | Node | {\n    p: HTMLElement,\n    ch: BuildBlock[]\n};\n\n\ntype StyleSpec = { [key: string]: string };\n\n\nfunction buildChild(block: BuildBlock): Node {\n    if (block instanceof Node) {\n        return block;\n    } else if (typeof block == \"string\") {\n        return HTML.text(block);\n    } else {\n        const pEl = block.p;\n        for (const c of block.ch) {\n            pEl.appendChild(buildChild(c));\n        }\n        return pEl;\n    }\n}\n\n\ntype BBlock = string | Node | ESpec | {\n    p: HTMLElement | ESpec,\n    ch: BBlock[]\n};\n\ntype ESpec = { tag: string, style?: StyleSpec, attr?: ElementAttr, ch?: BBlock[] };\n\nexport class HTML {\n    static body(): HTMLElement {\n        return document.getElementsByTagName(\"body\")[0];\n    }\n    static svg(): SVGSVGElement {\n        return SVG.svg();\n    }\n    static e(s: ESpec): HTMLElement {\n        const tag = s.tag;\n        const attr = s.attr || {};\n        const style = s.style || {};\n        const ch = s.ch || [];\n        const elem = document.createElement(tag);for (const key in attr) {\n            elem.setAttribute(key, attr[key]);\n        }\n        elem.setAttribute(\"style\", HTML.style(style) + (elem.getAttribute(\"style\") || \"\"));\n        elem.innerHTML = \"\";\n        for (const c of ch) {\n            elem.appendChild(HTML.b(c));\n        }\n        return elem;\n    }\n    static b(bb: BBlock): HTMLElement {\n        function bChild(bb: BBlock): Node {\n            if (bb instanceof Node) {\n                return bb;\n            } else if (typeof bb == \"string\") {\n                return HTML.text(bb);\n            } else if (\"tag\" in bb) {\n                return HTML.e(bb);\n            } else if (\"p\" in bb) {\n                const p = bb.p;\n                const pEl = (p instanceof HTMLElement) ? p : HTML.e(p);\n                pEl.innerHTML = \"\";\n                for (const c of bb.ch) {\n                    pEl.appendChild(bChild(c));\n                }\n                return pEl;\n            } else {\n                throw new Error();\n            }\n        }\n        if (typeof bb == \"string\") {\n            const spanEl = HTML.element(\"span\");\n            spanEl.appendChild(HTML.text(bb));\n            return spanEl;\n        } else if (bb instanceof HTMLElement) {\n            return bb;\n        } else if (bb instanceof Node) {\n            const divEl = HTML.element(\"div\");\n            divEl.appendChild(bb);\n            return divEl;\n        } else if (\"tag\" in bb) {\n            return HTML.e(bb);\n        } else if (\"p\" in bb) {\n            const p = bb.p;\n            const pEl = (p instanceof HTMLElement) ? p : HTML.e(p);\n            pEl.innerHTML = \"\";\n            for (const c of bb.ch) {\n                pEl.appendChild(bChild(c));\n            }\n            return pEl;\n        } else {\n            throw new Error();\n        }\n    }\n    static box(): HTMLElement {\n        return HTML.element(\"div\");\n    }\n    static ref(id: string): HTMLElement {\n        const e = document.getElementById(id);\n        if (e === null) {\n            throw new Error(id + \" is not defined\");\n        } else {\n            return e;\n        }\n    }\n    static style(s: StyleSpec): string {\n        return Object.keys(s).map((k) => format(\"%: %\", k, s[k])).join(\"; \") + \"; \";\n    }\n    static element(tag: string, attr: ElementAttr = {}, style: StyleSpec = {}, children: BuildBlock[] = []): HTMLElement {\n        const e = document.createElement(tag);\n        for (const key in attr) {\n            e.setAttribute(key, attr[key]);\n        }\n        e.setAttribute(\"style\", HTML.style(style) + (e.getAttribute(\"style\") || \"\"));\n        e.innerHTML = \"\";\n        for (const c of children) {\n            e.appendChild(buildChild(c));\n        }\n        return e;\n    }\n    static inner(parent: HTMLElement, children: BuildBlock[]): void {\n        HTML.build({\n            p: parent,\n            ch: children\n        });\n    }\n    static build(block: BuildBlock): HTMLElement {\n        if (typeof block == \"string\") {\n            const spanEl = HTML.element(\"span\");\n            spanEl.appendChild(HTML.text(block));\n            return spanEl;\n        } else if (block instanceof HTMLElement) {\n            return block;\n        } else if (block instanceof Node) {\n            const divEl = HTML.element(\"div\");\n            divEl.appendChild(block);\n            return divEl;\n        } else {\n            const pEl = block.p;\n            pEl.innerHTML = \"\";\n            for (const c of block.ch) {\n                pEl.appendChild(buildChild(c));\n            }\n            return pEl;\n        }\n    }\n    static text(content: string): Node {\n        return document.createTextNode(content);\n    }\n    static span(content: string, style: StyleSpec = {}): HTMLSpanElement {\n        return HTML.e({\n            tag: \"span\",\n            style: style,\n            ch: [ content ]\n        });\n    }\n    static group(x: UNodeList): HTMLElement {\n        // TODO\n        return HTML.element(\"div\");\n    }\n}\n\n\ntype UNodeElement = Node | string;\ninterface UNodeList_ {\n    [key: number]: UNodeElement | (UNodeList_ & Array<any>);\n};\ntype UNodeList = UNodeList_ & Array<any>;\ntype UNode = UNodeElement | UNodeList;","import { requestResource } from \"./utility/requestResource\";\nimport { ModuleViewer } from \"./ModuleViewer\";\nimport { ModelEditor } from \"./ModelEditor\";\nimport { Model } from \"./SMDL/SMDL\";\nimport { HTML } from \"./html\";\n\n\n// requestResource(\"GET\", \"./etc/sample_module.json\", \"json\", (mod: Model) => {\n//     const editor = new ModelEditor(HTML.ref(\"main\"));\n//     editor.setData(mod);\n// });\n\n\nconst editor = new ModelEditor(HTML.ref(\"main\"));\neditor.setData({\n    namespace: {},\n    root: []\n});\n\n// animation example\n\n\n// const s = Snap(\"#example\");\n// const c = s.circle(50, 50, 30);\n// c.drag(\n//     (dx, dy, x, y, e)=>{\n//         const elem = Snap.getElementByPoint(x, y);\n//         if (elem !== c) {\n//             elem.animate({\n//                 \"r\": 60\n//             }, 100);\n//         }\n//         console.log(\"move\");\n//     },\n//     (x, y, e)=>{\n//         console.log(\"started\");\n//     },\n//     (e) => {\n//         console.log(e);\n//     }\n// );\n\n// const c1 = s.circle(150, 50, 30);\n// c1.mouseout((e)=>{\n//     c1.animate({\n//         \"r\": 30\n//     }, 100);\n// })","export { sum, max, min, maxof, minof, format, later, assert, dummy, equal, enumerate, zip, zip2 };\n\n\nconst sum = (...nums: number[]): number => {\n    let s = 0;\n    for (let n of nums) {\n        s += n;\n    }\n    return s;\n}\n\n\nconst max = Math.max;\nconst min = Math.min;\nconst maxof = (a: number[]): number => max(...a);\nconst minof = (a: number[]): number => min(...a);\n\n\nconst format = (temp: string, ...fill: (string | number)[]): string => {\n    let result = \"\";\n    let i = 0;\n    let j = 0;\n    while (i < temp.length) {\n        if (temp[i] == \"%\") {\n            result += fill[j];\n            j++;\n            i++;\n        }\n        else {\n            result += temp[i];\n            i++;\n        }\n    }\n    return result;\n}\n\n\nconst later = (p: () => void): void => {\n    setTimeout(p, 100);\n}\n\n\nfunction assert(condition: boolean, message?: string) {\n    if (!condition) {\n        message = message || \"Assertion failed\";\n        if (typeof Error !== \"undefined\") {\n            throw new Error(message);\n        }\n        throw message; // Fallback\n    }\n}\n\n\nfunction dummy() {\n    return;\n}\n\n\nfunction equal(a: any, b: any): boolean {\n    return JSON.stringify(a) === JSON.stringify(b);\n}\n\n\nfunction enumerate(ls: any): { i: number, x: any }[] {\n    const items = [];\n    for (const [i, x] of Array.from(ls).entries()) {\n        items.push({\n            i: i,\n            x: x\n        });\n    };\n    return items;\n}\n\n\nfunction zip2<T1,T2>(ls0: T1[], ls1: T2[]): [T1, T2][] {\n    const lim = min(ls0.length, ls1.length);\n    const ls: [T1, T2][] = []\n    for (let i = 0; i < lim; i++) {\n        ls.push([ls0[i], ls1[i]]);\n    }\n    return ls;\n}\n\n\nfunction zip(... ls: any[][]): any[][] {\n    if (ls.length === 0) {\n        return [];\n    } else {\n        const ls1 = ls[0];\n        const r = [];\n        for (let i = 0; i < ls1.length; i++) {\n            if (ls.every((l)=>i<l.length)) {\n                r.push(ls.map(x => x[i]));\n            } else {\n                break;\n            }\n        }\n        return r;\n    }\n}\n\n\nexport function requestFile(callback: (f: File | null)=>void): void {\n    const inputElement = document.createElement(\"input\");\n    inputElement.setAttribute(\"type\", \"file\");\n    inputElement.addEventListener(\"change\", ()=>{\n        const fileList = inputElement.files;\n        callback(fileList ? fileList[0] : null);\n    })\n    inputElement.click();\n}","export namespace SVG {\n    interface SVGAttrSpec {\n        [key: string]: string | number;\n    }\n    export const namespace = \"http://www.w3.org/2000/svg\";\n    export function elem(tag: string, as: SVGAttrSpec = {}): SVGElement {\n        const e = document.createElementNS(namespace, tag) as SVGElement;\n        attr(e, as);\n        return e;\n    }\n    export function attr(e: SVGElement, as: SVGAttrSpec): void {\n        for (const key of Object.keys(as)) {\n            e.setAttributeNS(\"\", key, as[key] + \"\");\n        }\n        return;\n    }\n    export function svg(attr: SVGAttrSpec = {}): SVGSVGElement {\n        return elem(\"svg\", attr) as SVGSVGElement;\n    }\n    type BuildNode = BuildElement | BuildCompound;\n    type BuildElement = SVGElement | string | number | {\n        tag: string;\n        attr?: SVGAttrSpec;\n    }\n    interface BuildCompound {\n        p: BuildElement;\n        ch: BuildNode[];\n    }\n    export function build(n: BuildNode): SVGElement {\n        if (n instanceof SVGElement) {\n            return n;\n        } else if (typeof n === \"string\" || typeof n === \"number\") {\n            const e = elem(\"tspan\");\n            e.appendChild(document.createTextNode(n + \"\"));\n            return e;\n        } else if (\"tag\" in n) {\n            return elem(n.tag, n.attr || {});\n        } else if (\"p\" in n) {\n            const p = build(n.p);\n            p.innerHTML = \"\";\n            for (const c of n.ch) {\n                p.appendChild(build(c));\n            }\n            return p;\n        } else {\n            // n is never;\n            console.log(n);\n            throw new Error(n);\n        }\n    }\n}","import { Paper } from \"snapsvg\";\nimport { min, dummy } from \"./utility/JSUtility\";\nimport Snap = require(\"snapsvg\");\n\nexport type HandlerGroup = {\n    onDoubleClick: () => void;\n    onClick: () => void;\n    onDragStart: () => void;\n    onDrop: (n: Node, ctrlPressed: boolean) => void;\n}\n\n\nfunction registerHandlers(paper: Paper, handlerGroup: HandlerGroup): void {\n    let lastElement: HTMLElement | null = null;\n    paper.drag(\n        (dx, dy, x, y, e) => {\n            const elem = Snap.getElementByPoint(e.clientX, e.clientY);\n            lastElement = elem === null ? null : elem.node;\n        },\n        (x, y, e) => {\n            handlerGroup.onDragStart();\n            const elem = Snap.getElementByPoint(e.clientX, e.clientY);\n            lastElement = elem === null ? null : elem.node;\n        },\n        (e) => {\n            if (lastElement) {\n                handlerGroup.onDrop(lastElement, e.ctrlKey);\n            }\n        }\n    );\n    paper.click(handlerGroup.onClick);\n    // paper.dblclick(handlerGroup.onDoubleClick);\n}\n\n\nfunction registerHoverHandlers(paper: Paper, hg: { enter: () => void; leave: () => void; }) {\n    paper.hover(hg.enter, hg.leave);\n}\n\n\n// function registerHover(paper: Paper, attr: { [key: string]: string }): void {\n//     let oldAttr: { [key: string]: string };\n//     paper.hover(\n//         () => {\n//             oldAttr = {};\n//             for (const key of Object.keys(attr)) {\n//                 console.log(key, paper.attr(\"stroke\"));\n//                 oldAttr[key] = paper.attr(key);\n//             }\n//             paper.attr(attr);\n//         },\n//         () => {\n//             paper.attr(oldAttr);\n//         }\n//     );\n// }\n\n\nexport function InternalBox(paper: Paper, pathString: string, x: number, y: number, radius: number, handlerGroup: HandlerGroup) {\n    paper = paper.g();\n    const c = paper.circle(x, y, radius).attr({\n        \"fill\": \"white\",\n        \"stroke\": \"black\",\n        \"smdl-path\": pathString\n    });\n    c.hover(\n        () => {\n            c.animate({\n                \"r\": (radius * 1.5).toString()\n            }, 100);\n        },\n        () => {\n            c.animate({\n                \"r\": radius.toString()\n            }, 100)\n        }\n    )\n    registerHandlers(paper, handlerGroup);\n}\n\n\nexport function SpacerBox(paper: Paper, label: string, pathString: string, width: number, height: number, handlerGroup: HandlerGroup) {\n    paper = paper.g();\n    const r = paper.rect(0, 0, width, height).attr({\n        \"stroke\": \"white\",\n        \"fill\": \"white\",\n        \"smdl-path\": pathString\n    });\n    const p = paper.path(Snap.format(\"M0,0 V{h} M{w},0 V{h}\", {\n        \"w\": width,\n        \"h\": height\n    })).attr({\n        \"pointer-events\": \"none\"\n    });\n    paper.text(width / 2, height / 2, label).attr({\n        \"stroke\": \"black\",\n        \"fill\": \"black\",\n        \"text-anchor\": \"middle\",\n        \"dominant-baseline\": \"central\",\n        \"pointer-events\": \"none\",\n        \"font-size\": height * 0.6\n    });\n    registerHandlers(paper, handlerGroup);\n    r.hover(\n        () => {\n            p.attr({\n                \"stroke\": \"blue\"\n            });\n        },\n        () => {\n            p.attr({\n                \"stroke\": \"black\"\n            })\n        }\n    )\n}\n\n\nexport function PWMBox(paper: Paper, label: string, color: string, pathString: string, width: number, height: number, handlerGroup: HandlerGroup) {\n\n    function bgdColorToLabelColor(color: string): string {\n        const clr = Snap.color(color);\n        const lightness = clr.l;\n        return (lightness < 0.5) ? \"white\" : \"black\";\n    }\n\n    paper = paper.g();\n    const r = paper.rect(0, 0, width, height, min(width / 3, height / 3)).attr({\n        \"stroke\": \"none\",\n        \"fill\": color,\n        \"smdl-path\": pathString\n    });\n    const labelColor = bgdColorToLabelColor(color);\n    paper.text(width / 2, height / 2, label).attr({\n        \"stroke\": labelColor,\n        \"fill\": labelColor,\n        \"text-anchor\": \"middle\",\n        \"dominant-baseline\": \"central\",\n        \"pointer-events\": \"none\",\n        \"font-size\": height * 0.6\n    });\n    registerHandlers(paper, handlerGroup);\n    r.hover(\n        () => {\n            r.attr({\n                \"stroke\": \"blue\"\n            });\n        },\n        () => {\n            r.attr({\n                \"stroke\": \"none\"\n            })\n        }\n    )\n}","module.exports = Snap;"],"sourceRoot":""}