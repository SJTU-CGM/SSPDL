{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/amd-define.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./node_modules/@baliga-lab/sequencelogo.js/seqlogo.js","webpack:///./node_modules/file-saver/FileSaver.js","webpack:///./src/CSV.ts","webpack:///./src/Components/BackgroundDistributionEditor.tsx","webpack:///./src/Components/DefinitionViewer.tsx","webpack:///./src/Components/DistributionEditor.tsx","webpack:///./src/Components/DistributionViewer.tsx","webpack:///./src/Components/ElementDefEditor.tsx","webpack:///./src/Components/IndexViewer.tsx","webpack:///./src/Components/ModelEditor.tsx","webpack:///./src/Components/ModuleViewer.tsx","webpack:///./src/Components/MotifEditor.tsx","webpack:///./src/Components/PWMEditor.tsx","webpack:///./src/Components/SpacerEditor.tsx","webpack:///./src/JSUtility.ts","webpack:///./src/JSX/HTMLFactory.ts","webpack:///./src/JSX/SVGFactory.ts","webpack:///./src/SSPDL/SSPDL.ts","webpack:///./src/SSPDL/Utility.ts","webpack:///./src/SVGComponents/Box.tsx","webpack:///./src/Widget/Button.tsx","webpack:///./src/Widget/ColorEditor.tsx","webpack:///./src/Widget/Menubar.tsx","webpack:///./src/Widget/NumberEditor.tsx","webpack:///./src/Widget/Pile.tsx","webpack:///./src/Widget/StringEditor.tsx","webpack:///./src/Widget/StringViewer.tsx","webpack:///./src/Widget/Utility.tsx","webpack:///./src/Widget/Widget.tsx","webpack:///./src/Widget/Wrapper.tsx","webpack:///./src/index.tsx","webpack:///./src/widget.ts","webpack:///external \"Snap\""],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;ACnEA;AACA;AACA;;;;;;;;;;;;ACFA;AACA;;;;;;;;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB,oCAAoC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0BAA0B,+BAA+B;AACzD;AACA;AACA;AACA;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,wBAAwB;AAC7C,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,UAAU;AAClD,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mBAAmB,cAAc;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA,mBAAmB,0BAA0B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE,wDAAwD;AACxD,kCAAkC;AAClC,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2KAAgK,gBAAgB,EAAE;AAAA;AAClL,CAAC;;;;;;;;;;;;AChVD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA,KAAK,OAAO;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D,0DAA0D,gBAAgB;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,GAAG,yBAAyB;AAC7G;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;AACA,GAAG;AAAA;AACH;;;;;;;;;;;;;;;AC3LA,IAAiB,GAAG,CA4CnB;AA5CD,WAAiB,GAAG;IAKhB,oBAAoB,CAAS;QACzB,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;QACb,IAAI,UAAU,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;YACvB,OAAO,UAAU,CAAC,CAAC,CAAC,CAAC;SACxB;aAAM;YACH,OAAO,CAAC,CAAC;SACZ;IACL,CAAC;IACD,eAAsB,GAAW;QAC7B,MAAM,KAAK,GAAG,GAAG,CAAC,IAAI,EAAE,CAA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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.tsx\");\n","module.exports = function() {\r\n\tthrow new Error(\"define cannot be used indirect\");\r\n};\r\n","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n","/* seqlogo.js - see README and LICENSE for details */\n(function (glob) {\n    \"use strict\";\n    // some default settings\n    var MARGIN_LEFT = 40, MARGIN_TOP = 20, MARGIN_RIGHT = 20,\n        MARGIN_BOTTOM = 30, DEFAULT_OPTIONS, NUCLEOTIDE_COLORS,\n        AMINO_COLORS, MEASURE_CANVAS, STRETCH = 0.65;\n    NUCLEOTIDE_COLORS = {\n        'A': 'rgb(0, 128, 0)',\n        'G': 'rgb(255, 165, 0)',\n        'T': 'rgb(255, 0, 0)',\n        'U': 'rgb(255, 0, 0)',\n        'C': 'rgb(0, 0, 255)'\n    };\n    AMINO_COLORS = {\n        // polar amino acids\n        'G': 'rgb(0, 200, 50)',\n        'S': 'rgb(0, 200, 50)',\n        'T': 'rgb(0, 200, 50)',\n        'Y': 'rgb(0, 200, 50)',\n        'C': 'rgb(0, 200, 50)',\n        'Q': 'rgb(0, 200, 50)',\n        'N': 'rgb(0, 200, 50)',\n        // basic\n        'K': 'rgb(0, 0, 230)',\n        'R': 'rgb(0, 0, 230)',\n        'H': 'rgb(0, 0, 230)',\n        // acidic\n        'D': 'rgb(255, 0, 0)',\n        'E': 'rgb(255, 0, 0)',\n        // hydrophobic\n        'A': 'rgb(0, 0, 0)',\n        'V': 'rgb(0, 0, 0)',\n        'L': 'rgb(0, 0, 0)',\n        'I': 'rgb(0, 0, 0)',\n        'P': 'rgb(0, 0, 0)',\n        'W': 'rgb(0, 0, 0)',\n        'F': 'rgb(0, 0, 0)',\n        'M': 'rgb(0, 0, 0)'\n    };\n    DEFAULT_OPTIONS = {\n        type: 'canvas',\n        width: 400,\n        height: 300,\n        style: {\n            width: 400,\n            height: 300,\n            font: '20pt Helvetica'\n        }\n    };\n    MEASURE_CANVAS = document.createElement('canvas');\n    MEASURE_CANVAS.setAttribute('width', 500);\n    MEASURE_CANVAS.setAttribute('height', 500);\n\n    // **********************************************************************\n    // ****** Common Functions\n    // **********************************************************************\n\n    function rank(arr) {\n        var result = [], i;\n        for (i = 0; i < arr.length; i += 1) {\n            result.push([i, arr[i]]);\n        }\n        return result.sort(function (a, b) {\n            return a[1] - b[1];\n        });\n    }\n\n    function log(n, base) {\n        return Math.log(n) / Math.log(base);\n    }\n    function uncertaintyAt(pssm, motifPos) {\n        var row, freq, sum = 0;\n        for (row = 0; row < pssm.values[motifPos].length; row += 1) {\n            freq = pssm.values[motifPos][row];\n            if (freq > 0) {\n                sum += freq * log(freq, 2);\n            }\n        }\n        return -sum;\n    }\n    function rsequence(pssm, motifPos) {\n        var correctionFactor = 0.0, numBits;\n        numBits = Math.ceil(log(pssm.alphabet.length, 2));\n        return numBits - (uncertaintyAt(pssm, motifPos) + correctionFactor);\n    }\n\n    // Generic PSSM drawing function\n    function drawPSSM(pssm, scalex, y0, yHeight, drawFun) {\n        var x, y, motifPos, size, columnRanks, currentGlyph, row, maxWidth, rseq;\n        x = MARGIN_LEFT;\n\n        for (motifPos = 0; motifPos < pssm.values.length; motifPos += 1) {\n            y = y0;\n            columnRanks = rank(pssm.values[motifPos]);\n            maxWidth = 0;\n            rseq = rsequence(pssm, motifPos);\n            for (row = 0; row < columnRanks.length; row += 1) {\n                currentGlyph = pssm.alphabet[columnRanks[row][0]];\n                size = drawFun(currentGlyph, x, y, scalex, yHeight,\n                               rseq * columnRanks[row][1]);\n                if (size.width > maxWidth) {\n                    maxWidth = size.width;\n                }\n                y -= size.height;\n            }\n            x += maxWidth;\n        }\n        return x;\n    }\n\n    // **********************************************************************\n    // ****** Canvas-based Implementation\n    // **********************************************************************\n\n    function firstLine(imageData) {\n        var pixels = imageData.data, row, col, index;\n        for (row = 0; row < imageData.height; row += 1) {\n            for (col = 0; col < imageData.width; col += 1) {\n                index = (row * imageData.width * 4) + col * 4;\n                if (pixels[index + 3] !== 0) {\n                    return row;\n                }\n            }\n        }\n        return imageData.height;\n    }\n    function lastLine(imageData) {\n        var pixels = imageData.data, row, col, index;\n        for (row = imageData.height - 1; row >= 0; row -= 1) {\n            for (col = 0; col < imageData.width; col += 1) {\n                index = (row * imageData.width * 4) + col * 4;\n                if (pixels[index + 3] !== 0) {\n                    return row;\n                }\n            }\n        }\n        return imageData.height - 1;\n    }\n\n    function measureText(text, font, scalex, scaley) {\n        var imageData, context, first;\n        if (scaley === 0) {\n            return 0;\n        }\n        context = MEASURE_CANVAS.getContext('2d');\n        context.fillStyle = \"rgb(0, 0, 0)\";\n        context.font = font;\n        context.textBaseline = 'top';\n        context.save();\n        context.scale(scalex, scaley);\n        context.fillText(text, 0, 0);\n        context.restore();\n\n        imageData = context.getImageData(0, 0, MEASURE_CANVAS.width, MEASURE_CANVAS.height);\n        first = firstLine(imageData);\n        context.clearRect(0, 0, MEASURE_CANVAS.width, MEASURE_CANVAS.height);\n        return lastLine(imageData) - first + 1;\n    }\n\n    function drawLabelsY(context, numBits, x0, y0, yHeight) {\n        var i, label, ydist = yHeight / numBits, y = y0;\n\n        context.font = '12pt Arial';\n        context.fillText('bits', x0 + 10, MARGIN_TOP - 5);\n        var textHeight = measureText('M', context.font, 1.0, 1.0);\n        y += textHeight / 2;\n\n        for (i = 0; i <= numBits; i += 1) {\n            label = i.toString();\n            context.fillText(label, x0, y);\n            y -= ydist;\n        }\n    }\n\n    function drawMinorTicksY(context, y0, y1, numDivisions) {\n        var interval = (y1 - y0) / numDivisions, y = y0, i;\n        for (i = 0; i < numDivisions; i += 1) {\n            if (i > 0) {\n                context.beginPath();\n                context.moveTo(MARGIN_LEFT - 5, y);\n                context.lineTo(MARGIN_LEFT, y);\n                context.stroke();\n            }\n            y += interval;\n        }\n    }\n\n    function drawTicksY(context, numBits, bottom) {\n        var mainIntervalY = (bottom - MARGIN_TOP) / numBits;\n        var y = MARGIN_TOP, i;\n        for (i = 0; i <= numBits; i += 1) {\n            context.beginPath();\n            context.moveTo(MARGIN_LEFT - 10, y);\n            context.lineTo(MARGIN_LEFT, y);\n            context.stroke();\n            if (i < numBits) {\n                drawMinorTicksY(context, y, y + mainIntervalY, 5);\n            }\n            y += mainIntervalY;\n        }\n    }\n\n    function drawAxis(context, numBits, right, bottom) {\n        // main axis\n        context.beginPath();\n        context.moveTo(MARGIN_LEFT, MARGIN_TOP);\n        context.lineTo(MARGIN_LEFT, bottom);\n        context.lineTo(right, bottom);\n        context.stroke();\n\n        drawTicksY(context, numBits, bottom);\n    }\n\n    function drawScale(canvas, pssm) {\n        var context = canvas.getContext('2d'), right = canvas.width - MARGIN_RIGHT,\n            numBits = Math.ceil(log(pssm.alphabet.length, 2)),\n            bottom = canvas.height - MARGIN_BOTTOM;\n        drawAxis(context, numBits, right, bottom);\n        drawLabelsY(context, numBits, MARGIN_LEFT - 25, bottom, bottom - MARGIN_TOP);\n    }\n\n    function drawGlyph(context, glyph, colors, x, y, scalex,\n                       yHeight, maxFontHeightNormal,\n                       weight) {\n        var glyphWidth, scaley, glyphHeightScaled;\n        glyphWidth = context.measureText(glyph).width * scalex;\n        scaley = weight * (yHeight / maxFontHeightNormal) * STRETCH;\n        glyphHeightScaled = measureText(glyph, context.font, scalex, scaley);\n        if (scaley > 0) {\n            context.fillStyle = colors[glyph];\n            context.save();\n            context.translate(x, y);\n            context.scale(scalex, scaley);\n            context.translate(-x, -y);\n            context.fillText(glyph, x, y);\n            context.restore();\n        }\n        return { width: glyphWidth, height: glyphHeightScaled };\n    }\n\n    function colorTableFor(pssm) {\n        var i, c;\n        for (i = 0; i < pssm.alphabet.length; i += 1) {\n            c = pssm.alphabet[i];\n            if (c !== 'A' && c !== 'G' && c !== 'T' && c !== 'C' && c !== 'U') {\n                return AMINO_COLORS;\n            }\n        }\n        return NUCLEOTIDE_COLORS;\n    }\n\n    function drawGlyphs(canvas, options, pssm) {\n        var context, yHeight, maxFontHeightNormal, sumColumnWidthsNormal, xWidth, scalex;\n        context = canvas.getContext('2d');\n        context.textBaseline = 'alphabetic';\n        if (options.style && options.style.font) {\n            context.font = options.style.font;\n        } else {\n            context.font = DEFAULT_OPTIONS.style.font;\n        }\n        yHeight = canvas.height - (MARGIN_BOTTOM + MARGIN_TOP);\n        maxFontHeightNormal = measureText('Mg', context.font, 1.0, 1.0);\n        sumColumnWidthsNormal = context.measureText('W').width * pssm.values.length;\n        xWidth = canvas.width - (MARGIN_LEFT + MARGIN_RIGHT);\n        scalex = xWidth / sumColumnWidthsNormal;\n        var lastX = drawPSSM(pssm, scalex,\n                             canvas.height - MARGIN_BOTTOM, yHeight,\n                             function (currentGlyph, x, y, scalex, yHeight, weight) {\n                                 return drawGlyph(context, currentGlyph,\n                                                  colorTableFor(pssm), x, y,\n                                                  scalex, yHeight,\n                                                  maxFontHeightNormal, weight);\n                             });\n        return (lastX - MARGIN_LEFT) / pssm.values.length;\n    }\n\n    function drawTicksX(canvas, pssm, interval) {\n        var context = canvas.getContext('2d'), bottom = canvas.height - MARGIN_BOTTOM, i, x, xi, tickHeight, label, textdim, textHeight;\n        context.font = '12pt Arial';\n        context.fillStyle = 'black';\n        for (i = 1; i <= pssm.values.length; i += 1) {\n            x = MARGIN_LEFT + i * interval;\n            xi = x - interval / 2;\n            tickHeight = (i % 5 === 0) ? 10 : 5;\n            context.beginPath();\n            context.moveTo(xi, bottom);\n            context.lineTo(xi, bottom + tickHeight);\n            context.stroke();\n            if (i % 5 === 0) {\n                label = i.toString();\n                textdim = context.measureText(label);\n                // the TextMetrics object currently does not have any other attributes\n                // than width, so we simply specify a text height\n                textHeight = 14;\n                context.fillText(label, xi - textdim.width / 2, bottom + tickHeight + textHeight);\n            }\n        }\n    }\n\n    function makeCanvas(id, options, pssm) {\n        var elem = document.getElementById(id);\n        var canvas = document.createElement(\"canvas\");\n        canvas.setAttribute('width', options.width);\n        canvas.setAttribute('height', options.height);\n        if (options.style) {\n            canvas.setAttribute('style', 'border: 1px solid black; width: ' +\n                                options.style.width + '; height: ' + options.style.height +\n                                '; font: ' + options.font);\n        } else {\n            canvas.setAttribute('style', 'border: 1px solid black');\n        }\n        elem.parentNode.replaceChild(canvas, elem);\n        canvas.id = id;\n        drawScale(canvas, pssm);\n        var interval = drawGlyphs(canvas, options, pssm);\n        drawTicksX(canvas, pssm, interval);\n    }\n\n    // **********************************************************************\n    // ****** Public API\n    // **********************************************************************\n    var seqlogo = { };\n    seqlogo.version = '1.0.0';\n    seqlogo.makeLogo = function (id, pssm, options) {\n        if (options === null) {\n            options = DEFAULT_OPTIONS;\n        }\n        // TODO: copy the options from DEFAULT_OPTIONS that are missing\n        makeCanvas(id, options, pssm);\n    };\n\n    // These lines needed to support a NPM/ES6 environment, the define() call\n    // is to support RequireJS\n    glob.seqlogo = seqlogo;\n    typeof module != 'undefined' && module.exports ? module.exports = seqlogo : typeof define === \"function\" && define.amd ? define(\"seqlogo\", [], function () { return seqlogo; }) : glob.seqlogo = seqlogo;\n})(typeof window != \"undefined\" ? window : this);\n","/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 1.3.2\n * 2016-06-16 18:25:19\n *\n * By Eli Grey, http://eligrey.com\n * License: MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\nvar saveAs = saveAs || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof view === \"undefined\" || typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = new MouseEvent(\"click\");\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, is_safari = /constructor/i.test(view.HTMLElement) || view.safari\n\t\t, is_chrome_ios =/CriOS\\/[\\d]+/.test(navigator.userAgent)\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t// the Blob API is fundamentally broken as there is no \"downloadfinished\" event to subscribe to\n\t\t, arbitrary_revoke_timeout = 1000 * 40 // in ms\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, auto_bom = function(blob) {\n\t\t\t// prepend BOM for UTF-8 XML and text/* types (including HTML)\n\t\t\t// note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\t\t\tif (/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n\t\t\t\treturn new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});\n\t\t\t}\n\t\t\treturn blob;\n\t\t}\n\t\t, FileSaver = function(blob, name, no_auto_bom) {\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, force = type === force_saveable_type\n\t\t\t\t, object_url\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\tif ((is_chrome_ios || (force && is_safari)) && view.FileReader) {\n\t\t\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\t\treader.onloadend = function() {\n\t\t\t\t\t\t\tvar url = is_chrome_ios ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\t\t\tvar popup = view.open(url, '_blank');\n\t\t\t\t\t\t\tif(!popup) view.location.href = url;\n\t\t\t\t\t\t\turl=undefined; // release reference before dispatching\n\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\tdispatch_all();\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (!object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (force) {\n\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar opened = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (!opened) {\n\t\t\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\n\t\t\tif (can_use_save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tsave_link.href = object_url;\n\t\t\t\t\tsave_link.download = name;\n\t\t\t\t\tclick(save_link);\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfs_error();\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name, no_auto_bom) {\n\t\t\treturn new FileSaver(blob, name || blob.name || \"download\", no_auto_bom);\n\t\t}\n\t;\n\t// IE 10+ (native saveAs)\n\tif (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n\t\treturn function(blob, name, no_auto_bom) {\n\t\t\tname = name || blob.name || \"download\";\n\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tFS_proto.abort = function(){};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this.content\n));\n// `self` is undefined in Firefox for Android content script context\n// while `this` is nsIContentFrameMessageManager\n// with an attribute `content` that corresponds to the window\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports.saveAs = saveAs;\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd !== null)) {\n  define(\"FileSaver.js\", function() {\n    return saveAs;\n  });\n}\n","export namespace CSV {\n    interface CSV {\n        head: string[];\n        body: { [key: string]: any }[];\n    }\n    function parseField(f: string): string | number {\n        f = f.trim();\n        if (parseFloat(f) !== NaN) {\n            return parseFloat(f);\n        } else {\n            return f;\n        }\n    }\n    export function parse(txt: string): CSV {\n        const lines = txt.trim().split(\"\\n\");\n        const header = lines[0];\n        const fieldNames = header.split(',');\n        const lineToRecord = (line: string) => {\n            const fields = line.split(',');\n            const record: CSV[\"body\"][0] = {};\n            fieldNames.forEach((fn, i) => {\n                record[fn] = parseField(fields[i]);\n            })\n            return record;\n        };\n        return {\n            head: fieldNames,\n            body: lines.slice(1).map(lineToRecord)\n        }\n    }\n    export function dump(csv: CSV): string {\n        const lines: string[] = [];\n        // head\n        lines.push(csv.head.join(','))\n        // body\n        for (const r of csv.body) {\n            const fields = [];\n            for (const fn of csv.head) {\n                fields.push(r[fn]);\n            }\n            lines.push(fields.join(','));\n        }\n        return lines.join('\\n');\n    }\n}","import * as JSXFactory from \"../JSX/HTMLFactory\";\n\n\nimport { CodeDistribution, Alphabet } from \"../SSPDL/SSPDL\";\nimport { Editor } from \"../Widget/Widget\";\nimport { popup, ask } from \"../Widget/Utility\";\nimport { NumberEditor } from \"../Widget/NumberEditor\";\nimport { zip2, sum, min } from \"../JSUtility\";\n\n\nexport class BackgroundDistributionEditor extends Editor<CodeDistribution, { alphabet: Alphabet }> {\n    protected makeContainer(): HTMLElement {\n        return (\n            <div\n                style={{\n                    \"border-bottom\": \"1px solid black\",\n                    \"display\": \"flex\",\n                    \"flex-direction\": \"row\",\n                    \"padding-left\": \"0.5ex\",\n                    \"padding-right\": \"0.5ex\"\n                }}\n            ></div>\n        )\n    }\n    protected displayData(data: CodeDistribution, minor: { alphabet: Alphabet }): void {\n        const alphabet = minor.alphabet\n        const content = alphabet.map((code) => {\n            return (\n                <span><strong>{code}</strong>: {data[code]}; </span>\n            )\n        })\n        const btn = <span style={{\"color\": \"blue\", cursor: \"pointer\"}}>Edit</span>\n        JSXFactory.render(this.getDOM(),\n            (<span>Background Distribution: </span>),\n            <span style={{ \"flex-grow\": \"1\" }}>{content}</span>,\n            btn\n        )\n        btn.addEventListener(\"click\", () => {\n            const ed = new BEditor()\n            ed.initData(data, minor)\n            ask(ed, {\n                cancel: () => { },\n                ok: () => {\n                    const d = ed.getMajorData()\n                    if (sum(...alphabet.map((code) => d[code])) === 1) {\n                        this.updateMajorData(ed.getMajorData())\n                    } else {\n                        alert(\"Invalid background distribution\")\n                    }\n                }\n            })\n        })\n    }\n}\n\n\n\nclass BEditor extends Editor<CodeDistribution, { alphabet: Alphabet; }> {\n    private editorTable: { [key: string]: NumberEditor }\n    protected makeContainer() { return <table /> }\n    protected displayData(data: CodeDistribution, minor: { alphabet: Alphabet; }): void {\n        const alphabet = minor.alphabet;\n        // create editors\n        const editorTable: { [key: string]: NumberEditor } = {}\n        for (const code of alphabet) {\n            editorTable[code] = new NumberEditor()\n        }\n        // build dom\n        const doms = []\n        for (const code of alphabet) {\n            doms.push(\n                <tr><td>{code}</td><td>{editorTable[code].getDOM()}</td></tr>\n            )\n        }\n        const header = <tr><th>Code</th><th>Probability</th></tr>\n        JSXFactory.render(this.getDOM(), header, ...doms)\n        // initialize data\n        for (const code of alphabet) {\n            const ed = editorTable[code]\n            ed.initData(data[code], {\n                min: 0,\n                max: 1,\n                step: 0.001\n            })\n        }\n        // others\n        this.editorTable = editorTable\n    }\n    public getMajorData() {\n        const dist: CodeDistribution = {}\n        for (const code of Object.keys(this.editorTable)) {\n            dist[code] = this.editorTable[code].getMajorData()\n        }\n        return dist;\n    }\n}","import * as JSXFactory from \"../JSX/HTMLFactory\";\n\nimport { Viewer, Controller, Controllee } from \"../Widget/Widget\";\nimport { IndexCmd } from \"./IndexViewer\";\n\n\nexport type Definition = _Definition | null\ninterface _Definition {\n    name: string;\n    useless: boolean;\n}\n\n\nexport type ChangeDefinitionCmd = DeleteDefCmd | RenameDefCmd;\ninterface DeleteDefCmd {\n    kind: \"delete-def\"\n    name: string\n}\ninterface RenameDefCmd {\n    kind: 'rename-def'\n    oldName: string\n    newName: string\n}\n\n\nexport class DefinitionViewer extends Controller<Definition, ChangeDefinitionCmd> {\n    protected displayData(data: Definition): void {\n        if (data === null) {\n            JSXFactory.render(this.getDOM())\n        } else {\n            const renameButton = <button style={{ \"margin-right\": \"1em\" }}>Rename</button>\n            const deleteButton = <button>Delete</button> as HTMLButtonElement;\n            if (data.useless) {\n                deleteButton.disabled = true\n                deleteButton.title = \"You cannot delete this element, because it's currently in use.\"\n            }\n            renameButton.addEventListener(\"click\", () => {\n                const newName = prompt(\"A new name\")\n                if (newName !== null && newName.length > 0) {\n                    this.send({\n                        kind: \"rename-def\",\n                        oldName: data.name,\n                        newName: newName\n                    })\n                }\n            })\n            deleteButton.addEventListener(\"click\", () => {\n                this.send({\n                    kind: \"delete-def\",\n                    name: data.name\n                })\n            })\n            JSXFactory.render(this.getDOM(),\n                <div\n                    style={{\n                        \"display\": \"flex\", \"flex-direction\": \"row\", \"border-bottom\": \"1px solid grey\",\n                        \"padding-top\": \"0.5ex\",\n                        \"padding-bottom\": \"0.5ex\"\n                    }}\n                >\n                    <span\n                        style={{\n                            \"flex-grow\": \"1\",\n                            \"display\": \"flex\",\n                            \"align-items\": \"center\",\n                            \"justify-content\": \"center\",\n                            \"font-weight\": \"bold\"\n                        }}\n                    >\n                        {data.name}\n                    </span>\n                    {renameButton}\n                    {deleteButton}\n                </div>\n            )\n        }\n    }\n}","import * as JSXFactory from \"../JSX/HTMLFactory\";\n\nimport { Editor, Controllee, Viewer, Controller } from \"../Widget/Widget\";\nimport { Distribution } from \"../SSPDL/SSPDL\";\nimport { StringEditor } from \"../Widget/StringEditor\";\nimport { StringViewer } from \"../Widget/StringViewer\";\nimport { Button, ButtonCmd } from \"../Widget/Button\";\nimport { HPile } from \"../Widget/Pile\";\nimport Snap = require(\"snapsvg\");\nimport { later, format, sum, floatEqual, equal } from \"../JSUtility\";\nimport { tell, ask } from \"../Widget/Utility\";\nimport { DistributionViewer } from \"./DistributionViewer\";\nimport { NumberEditor } from \"../Widget/NumberEditor\";\nimport { CSV } from \"../CSV\";\nimport { Wrapper } from \"../Widget/Wrapper\";\n\n\nexport class DistributionEditor extends Editor<Distribution, void> {\n    private viewer: DistributionViewer;\n    init(): void {\n        this.viewer = new DistributionViewer();\n        JSXFactory.render(this.getDOM(), this.viewer.getDOM())\n        this.viewer.bind({\n            handle: (cmd) => {\n                const ed = new DEditor();\n                ed.initData(this.getMajorData(), undefined);\n                ask(ed, {\n                    ok: () => {\n                        const newData = ed.getMajorData();\n                        if (newData.probs.every((n) => { return 0 <= n && n <= 1; }) && floatEqual(sum(...newData.probs), 1)) {\n                            this.updateMajorData(newData);\n                        } else {\n                            console.log(newData)\n                            alert(\"invalid distribution: either some probability is out of [0,1] or their sum does not equal to 1.\");\n                        }\n                    },\n                    cancel: () => {\n                    }\n                });\n            }\n        })\n    }\n    getMajorData(): Distribution {\n        return this.viewer.getData();\n    }\n    displayData(data: Distribution): void {\n        this.viewer.initData(data);\n    }\n}\n\n\nclass DEditor extends Editor<Distribution, void> {\n    private fromEr: NumberEditor;\n    private probsEr: ProbsEditor;\n    protected init(): void {\n        super.init();\n    }\n    protected makeContainer(): HTMLElement {\n        return <div style={{\"display\": \"flex\", \"flex-direction\": \"column\"}}></div>\n    }\n    public getMajorData(): Distribution {\n        return {\n            from: this.fromEr.getMajorData(),\n            probs: this.probsEr.getMajorData()\n        };\n    }\n    protected displayData(data: Distribution): void {\n        this.fromEr = new NumberEditor();\n        this.fromEr.initData(data.from, {\n            min: 1,\n            step: 1\n        });\n        this.fromEr.register(this, (d) => {\n            this.probsEr.updateMinorData({\n                from: d\n            });\n        })\n        this.probsEr = new ProbsEditor();\n        this.probsEr.initData(data.probs, {\n            from: data.from\n        });\n\n        let csvButton = <button>To/From CSV</button>\n        csvButton.addEventListener(\"click\", () => {\n            let probs = this.probsEr.getMajorData()\n            let csvText = CSV.dump({ head: [ \"Pr\" ], body: probs.map((p)=>({ \"Pr\": p })) })\n\n            const textarea = <textarea cols=\"30\" rows=\"10\"></textarea> as HTMLTextAreaElement;\n            textarea.value = csvText;\n            ask(new Wrapper(textarea), {\n                cancel: () => {},\n                ok: () => {\n                    let tab = CSV.parse(textarea.value)\n                    if (equal(tab.head, [\"Pr\"])) {\n                        let probs = tab.body.map((r)=>(r[\"Pr\"]))\n                        this.probsEr.updateMajorData(probs)\n                    }\n                }\n            })\n        })\n\n        JSXFactory.render(this.getDOM(),\n            <label style={{\"margin-bottom\": \"1ex\"}}>From: {this.fromEr.getDOM()}</label>,\n            this.probsEr.getDOM(),\n            csvButton\n        )\n    }\n}\n\n\ntype Probs = number[];\nclass ProbsEditor extends Editor<Probs, { from: number }> implements Controllee<ButtonCmd> {\n    handle(cmd: ButtonCmd): void {\n        switch (cmd.message) {\n            case \"add-row\": {\n                const data = this.getMajorData()\n                this.updateMajorData([...data, 0]);\n                return;\n            }\n            case \"del-row\": {\n                const data = this.getMajorData()\n                this.updateMajorData((data.length > 0) ? data.slice(0, data.length - 1) : [])\n                return;\n            }\n        }\n    }\n    private editors: NumberEditor[] = [];\n    private addRowButton: Button;\n    private delRowButton: Button;\n    protected makeContainer(): HTMLElement {\n        return <div style={{\"display\": \"flex\", \"flex-direction\": \"column\"}}></div>\n    }\n    init(): void {\n        super.init();\n\n        this.addRowButton = new Button();\n        this.addRowButton.initData({\n            label: \"+\",\n            message: \"add-row\"\n        });\n        this.addRowButton.bind(this);\n\n        this.delRowButton = new Button();\n        this.delRowButton.initData({\n            label: \"-\",\n            message: \"del-row\"\n        });\n        this.delRowButton.bind(this)\n    }\n    getMajorData(): Probs {\n        return this.editors.map((e) => { return e.getMajorData(); });\n    }\n    displayData(data: Probs, minor: { from: number }): void {\n        this.editors = []\n        for (let i = 0; i < data.length; i++) {\n            const ed = new NumberEditor()\n            ed.initData(data[i], {\n                min: 0,\n                max: 1,\n                step: 0.001\n            });\n            this.editors.push(ed);\n        }\n        const pile = new HPile();\n        pile.setChildren([this.addRowButton, this.delRowButton]);\n        JSXFactory.render(this.getDOM(),\n            ...this.editors.map((e, i) => (<label>{minor.from+i}: {e.getDOM()}</label>)),\n            <div style={{\"padding-top\": \"1ex\"}}>{pile.getDOM()}</div>\n        )\n    }\n}","import * as JSXFactory from \"../JSX/SVGFactory\";\nimport { Controller } from \"../Widget/Widget\";\nimport { Distribution } from \"../SSPDL/SSPDL\";\nimport { format } from \"../JSUtility\";\n\n\nexport class DistributionViewer extends Controller<Distribution, \"click\"> {\n    private svg: SVGSVGElement;\n    init(): void {\n        super.init();\n        this.svg = (\n            <svg\n                height=\"0\"\n                width=\"0\"\n                style={{\n                    \"stroke\": \"black\",\n                    \"fill\": \"white\"\n                }}\n            />\n        ) as SVGSVGElement;\n        this.svg.addEventListener(\"click\", () => {\n            this.send(\"click\");\n        })\n        this.getDOM().innerHTML = \"\";\n        this.getDOM().appendChild(this.svg);\n    }\n    displayData(data: Distribution): void {\n        const contentHeight = 100;\n        const unitWidth = 30;\n        const topPadding = 20;\n        const bottomPadding = 20;\n        const leftPadding = 10;\n        const rightPadding = 10;\n        const height = contentHeight + topPadding + bottomPadding;\n\n        const heightProbRatio = contentHeight / Math.max(0, ...data.probs);\n        const width = leftPadding + unitWidth * data.probs.length + rightPadding;\n\n        this.svg.setAttribute('width', width.toString())\n        this.svg.setAttribute('height', height.toString())\n\n        JSXFactory.render(this.svg,\n            ...data.probs.map((p, i) => {\n                const index = data.from + i;\n                const h = p * heightProbRatio;\n                const w = unitWidth;\n                const top = topPadding + contentHeight;\n                const left = leftPadding + unitWidth * i;\n                const label = p.toFixed(2);\n                return (\n                    <g transform={format(\"translate(%,%)\", left, top)}>\n                        <rect x={0} y={-h} width={w} height={h} fill=\"lightblue\" stroke=\"white\" />\n                        <text\n                            x={unitWidth / 2}\n                            y={-h}\n                            fill=\"black\"\n                            stroke=\"black\"\n                            dominant-baseline=\"baseline\"\n                            text-anchor=\"middle\"\n                            pointer-events=\"none\"\n                            font-size=\"0.6em\"\n                        >\n                            {label}\n                        </text>\n                        <text\n                            x={unitWidth / 2}\n                            y={0}\n                            fill=\"black\"\n                            stroke=\"black\"\n                            dominant-baseline=\"hanging\"\n                            text-anchor=\"middle\"\n                            pointer-events=\"none\"\n                        >\n                            {index}\n                        </text>\n                    </g >\n                )\n            }),\n            <line\n                x1={0}\n                y1={topPadding + contentHeight}\n                x2={width}\n                y2={topPadding + contentHeight}\n                stroke=\"black\"\n                fill=\"black\"\n            />\n        );\n    }\n}","import * as JSXFactory from \"../JSX/HTMLFactory\";\n\nimport { ElementDef, Alphabet, CodeDistribution, ElementKind } from \"../SSPDL/SSPDL\";\nimport { Editor } from \"../Widget/Widget\";\nimport { GMotifEditor, MotifEditor } from \"./MotifEditor\";\nimport { SpacerEditor } from \"./SpacerEditor\";\n\n\ninterface ElementDefEditorMinorData {\n    alphabet: Alphabet\n    background: CodeDistribution\n}\n\n\n\n\n\nexport class ElementDefEditor extends Editor<ElementDef | null, ElementDefEditorMinorData> {\n    private editor: MotifEditor | GMotifEditor | SpacerEditor;\n    protected displayData(data: ElementDef | null, extra: ElementDefEditorMinorData): void {\n        const makeEditor = (def: ElementDef, alphabet: Alphabet, background: CodeDistribution) => {\n            switch (def.kind) {\n                case ElementKind.Motif: {\n                    // editor\n                    const ed = new MotifEditor()\n                    ed.initData(def, {\n                        alphabet: alphabet,\n                        background: background\n                    })\n                    ed.register(this, (newMotif) => {\n                        const data: ElementDef = {\n                            kind: ElementKind.Motif,\n                            color: newMotif.color,\n                            matrix: newMotif.matrix\n                        }\n                        this.updateMajorData(data)\n                    })\n                    return ed\n                }\n                case ElementKind.GMotif: {\n                    // editor\n                    const ed = new GMotifEditor()\n                    ed.initData(def, {\n                        alphabet: alphabet,\n                        background: background\n                    })\n                    ed.register(this, (newGMotif) => {\n                        const data: ElementDef = {\n                            kind: ElementKind.GMotif,\n                            color: newGMotif.color,\n                            matrix: newGMotif.matrix,\n                            distribution: newGMotif.distribution\n                        }\n                        this.updateMajorData(data)\n                    })\n                    return ed\n                }\n                case ElementKind.Spacer: {\n                    // editor\n                    const ed = new SpacerEditor()\n                    ed.initData(def, undefined)\n                    ed.register(this, (newSpacer) => {\n                        const data: ElementDef = {\n                            kind: ElementKind.Spacer,\n                            distribution: newSpacer.distribution\n                        }\n                        this.updateMajorData(data)\n                    })\n                    return ed\n                }\n                default: {\n                    throw new Error(\"internal\")\n                }\n            }\n        }\n\n        if (data === null) {\n            JSXFactory.render(this.getDOM())\n        } else {\n            const ed = makeEditor(data, extra.alphabet, extra.background)\n            JSXFactory.render(\n                this.getDOM(),\n                <div style={{ \"padding-left\": \"1em\", \"padding-top\": \"1ex\" }}>\n                    {ed.getDOM()}\n                </div>\n            )\n        }\n    }\n}","import * as JSXFactory from \"../JSX/HTMLFactory\";\nimport { ElementKind } from \"../SSPDL/SSPDL\";\nimport { Controller } from \"../Widget/Widget\";\nimport { Box } from \"../SVGComponents/Box\";\n\n\nexport type IndexItem = MotifIndexItem | SpacerIndexItem;\n\n\ninterface MotifIndexItem {\n    name: string;\n    kind: ElementKind.Motif | ElementKind.GMotif;\n    color: string;\n    useCount: number;\n}\ninterface SpacerIndexItem {\n    name: string;\n    kind: ElementKind.Spacer;\n    useCount: number;\n}\n\n\nexport type Index = IndexItem[];\nexport type IndexCmd = FocusCmd | NewElementCmd;\ninterface FocusCmd {\n    kind: \"focus\"\n    name: string;\n}\ninterface NewElementCmd {\n    kind: \"new-element\"\n    elementKind: ElementKind\n}\nexport class IndexViewer extends Controller<Index, IndexCmd> {\n    protected makeContainer() {\n        return (\n            <div\n                style={{\n                    \"flex-grow\": \"0\",\n                    \"width\": \"10em\",\n                    \"display\": \"flex\",\n                    \"flex-direction\": \"column\",\n                    \"flex-shrink\": \"0\"\n                }}\n            ></div>\n        )\n    }\n    private itemContainer: HTMLElement\n    protected init() {\n        const motifButton = <button>New Motif</button>\n        const gmotifButton = <button>New G-Motif</button>\n        const spacerButton = <button>New Spacer</button>\n        motifButton.addEventListener(\"click\", ()=>{\n            this.send({\n                kind: \"new-element\",\n                elementKind: ElementKind.Motif\n            })\n        })\n        gmotifButton.addEventListener(\"click\", ()=>{\n            this.send({\n                kind: \"new-element\",\n                elementKind: ElementKind.GMotif\n            })\n        })\n        spacerButton.addEventListener(\"click\", ()=>{\n            this.send({\n                kind: \"new-element\",\n                elementKind: ElementKind.Spacer\n            })\n        })\n        JSXFactory.render(this.getDOM(),\n            this.itemContainer = <div style={{\"flex-grow\": \"1\", \"overflow-y\": \"auto\"}}></div>,\n            motifButton,\n            gmotifButton,\n            spacerButton\n        )\n    }\n    protected displayData(data: IndexItem[]): void {\n        JSXFactory.render(this.itemContainer,\n            ...data.map((x) => {\n                const box = Box({\n                    size: 10,\n                    fill: (x.kind === ElementKind.Spacer) ? \"white\" : x.color,\n                    stroke: (x.kind === ElementKind.Spacer) ? \"black\" : x.color,\n                });\n                const btn = (\n                    <button\n                        style={{\n                            'display': \"flex\",\n                            \"flex-direction\": \"row\",\n                            'width': \"100%\"\n                        }}\n                    >\n                        <span style={{ \"flex-grow\": \"0\" }}>{box}</span>\n                        <span style={{ \"flex-grow\": \"1\" }}>{x.name}</span>\n                        <span style={{ \"flex-grow\": \"0\" }}>({x.useCount})</span>\n                    </button>\n                );\n                btn.addEventListener(\"click\", () => {\n                    this.send({\n                        kind: \"focus\",\n                        name: x.name\n                    })\n                })\n                return btn;\n            })\n        )\n    }\n}","import * as JSXFactory from \"../JSX/HTMLFactory\";\n\nimport { ModuleViewer, ColoredElement } from \"./ModuleViewer\";\nimport { Rider, StandardRider, Path, transformModule, tranverseModule } from \"../SSPDL/Utility\";\nimport { equal, min, max, sum, zip2, requestFile, copy, floatEqual } from \"../JSUtility\";\nimport { StringViewer } from \"../Widget/StringViewer\";\nimport { Menubar, MenubarCommand } from \"../Widget/Menubar\";\n\nimport { Controllee, Editor } from \"../Widget/Widget\";\nimport { Model, Namespace, Element, ModuleItem, ElementDef, Module, Alphabet, CodeDistribution, ElementKind } from \"../SSPDL/SSPDL\";\nimport { tell, popup, ask } from \"../Widget/Utility\";\nimport { Pile, HPile } from \"../Widget/Pile\";\nimport { StringEditor } from \"../Widget/StringEditor\";\nimport { Button, ButtonCmd } from \"../Widget/Button\";\nimport FileSaver = require('file-saver');\nimport { NumberEditor } from \"../Widget/NumberEditor\";\nimport { BackgroundDistributionEditor } from \"./BackgroundDistributionEditor\";\nimport { Wrapper } from \"../Widget/Wrapper\";\nimport { IndexViewer, Index, IndexItem, IndexCmd } from \"./IndexViewer\";\nimport { DefinitionViewer, ChangeDefinitionCmd, Definition } from \"./DefinitionViewer\";\nimport { ElementDefEditor } from \"./ElementDefEditor\";\nimport { CSV } from \"../CSV\";\n\n\ntype NodePath = {\n    kind: \"node\";\n    path: Path;\n    index: number;\n}\ntype ElementPath = {\n    kind: \"element\";\n    path: Path;\n}\ninterface AlterPath {\n    kind: \"alternation\",\n    path: Path\n}\ninterface RepetPath {\n    kind: \"repetition\",\n    path: Path\n}\nexport type UPath = NodePath | ElementPath | AlterPath | RepetPath | { kind: \"background\" };\n\n\ninterface DragCmd {\n    kind: \"drag\";\n    path1: UPath;\n    path2: UPath;\n    ctrlPressed: boolean\n}\ninterface ClickCmd {\n    kind: \"click\";\n    path: UPath;\n}\n\nexport type ModuleEditCmd = InspectElemCmd | CopyElemCmd | MoveElemCmd | LinkCmd | EditAlterCmd | EditRepetCmd | EditElemCmd | EditNodeCmd;\ninterface InspectElemCmd {\n    kind: \"insp\";\n    path: Path;\n}\ninterface CopyElemCmd {\n    kind: \"copy\";\n    epath: Path;\n    mpath: Path;\n    mindex: number;\n}\ninterface MoveElemCmd {\n    kind: \"move\";\n    epath: Path;\n    mpath: Path;\n    mindex: number;\n}\ninterface LinkCmd {\n    kind: \"link\";\n    mpath: Path;\n    p: number;\n    q: number;\n}\ninterface EditAlterCmd {\n    kind: \"edit-alternation\";\n    path: Path;\n}\ninterface EditRepetCmd {\n    kind: \"edit-repetition\";\n    path: Path;\n}\ninterface EditElemCmd {\n    kind: \"edit-element\";\n    path: Path;\n}\ninterface EditNodeCmd {\n    kind: \"edit-node\";\n    path: Path;\n    index: number;\n}\n\n\ntype GlobalEditCmd = RenameCmd\ninterface RenameCmd {\n    kind: \"rename-element\"\n    oldName: string\n    newName: string\n}\n\n\n\nexport interface ElementUse {\n    [key: string]: number;\n}\n\n\n\nclass ProbabilityEditor extends NumberEditor {\n    initData(data: number, extra: { min?: number; max?: number; step?: number; } = { min: 0, max: 1, step: 0.001 }) {\n        super.initData(data, extra);\n    }\n}\n\n\nexport class ModelEditor extends Editor<Model, void> implements Controllee<ModuleEditCmd | MenubarCommand | ChangeDefinitionCmd | IndexCmd> {\n    interpreteNewElement(elementKind: ElementKind): void {\n        const model = this.getMajorData()\n        const namespace: Namespace = model.namespace;\n        switch (elementKind) {\n            case ElementKind.Motif: {\n                const name = window.prompt(\"The name of new motif:\");\n                if (name !== null && name.length > 0) {\n                    if (namespace[name] !== undefined) {\n                        alert(\"Duplicated definition for \" + name)\n                    } else {\n                        namespace[name] = {\n                            kind: ElementKind.Motif,\n                            color: \"#888888\",\n                            matrix: []\n                        }\n                        this.updateMajorData(model)\n                        this.handle({\n                            kind: \"focus\",\n                            name: name\n                        })\n                    }\n                }\n                return;\n            }\n            case ElementKind.GMotif: {\n                const name = window.prompt(\"The name of new generalized motif:\");\n                if (name !== null && name.length > 0) {\n                    if (namespace[name] !== undefined) {\n                        alert(\"Duplicated definition for \" + name)\n                    } else {\n                        namespace[name] = {\n                            kind: ElementKind.GMotif,\n                            distribution: { from: 1, probs: [1] },\n                            color: \"#000000\",\n                            matrix: []\n                        }\n                        this.updateMajorData(model)\n                        this.handle({\n                            kind: \"focus\",\n                            name: name\n                        })\n                    }\n                }\n                return\n            }\n            case ElementKind.Spacer: {\n                const name = window.prompt(\"The name of new spacer:\");\n                if (name !== null && name.length > 0) {\n                    if (namespace[name] !== undefined) {\n                        alert(\"Duplicated definition for \" + name)\n                    } else {\n                        namespace[name] = {\n                            kind: ElementKind.Spacer,\n                            distribution: { from: 1, probs: [1] },\n                        }\n                        this.updateMajorData(model)\n                        this.handle({\n                            kind: \"focus\",\n                            name: name\n                        })\n                    }\n                }\n                return\n            }\n        }\n    }\n    interpreteFocus(name: string): void {\n        const model = this.getMajorData()\n        if (model.namespace[name] !== undefined) {\n            let useless = false\n            tranverseModule(model.root, (e) => {\n                if (e.name === name) {\n                    useless = true\n                }\n            })\n            this.definitionViewer.initData({\n                name: name,\n                useless: useless\n            })\n            this.elementDefEr.initData(model.namespace[name], {\n                alphabet: model.alphabet,\n                background: model.background\n            })\n        } else {\n            this.definitionViewer.initData(null)\n            this.elementDefEr.initData(null, {\n                alphabet: model.alphabet,\n                background: model.background\n            })\n        }\n    }\n    interpreteRenameDef(oldName: string, newName: string): void {\n        const model = this.getMajorData()\n        if (model.namespace[newName] !== undefined) {\n            alert(\"The new name is already in use.\")\n            return\n        } else {\n            model.namespace[newName] = model.namespace[oldName]\n            delete model.namespace[oldName]\n            model.root = transformModule(model.root, (e) => {\n                if (e.name === oldName) {\n                    return {\n                        name: newName\n                    }\n                } else {\n                    return e;\n                }\n            })\n            this.updateMajorData(model)\n            this.handle({\n                kind: \"focus\",\n                name: newName\n            })\n            return\n        }\n    }\n    private backgroundEr: BackgroundDistributionEditor;\n    private undoCount = 0;\n    private undoStack: Model[] = [];\n    private redoStack: Model[] = [];\n    private handleUndo(): void {\n        if (this.undoStack.length > 0) {\n            this.redoStack.push(this.getMajorData());\n            this.updateMajorData(this.undoStack.pop() as Model);\n        } else {\n            alert(\"no more undoable action\");\n        }\n    }\n    private handleRedo(): void {\n        if (this.redoStack.length > 0) {\n            this.undoStack.push(this.getMajorData());\n            this.updateMajorData(this.redoStack.pop() as Model);\n        } else {\n            alert(\"no more redoable action\");\n        }\n    }\n    private handleNeitherUndoNorRedo(): void {\n        this.undoStack.push(this.getMajorData());\n        this.redoStack = [];\n    }\n    private alphabet: Alphabet;\n    interpreteEditNode(path: Path, index: number): void {\n        const insertableElements = Object.keys(this.getMajorData().namespace);\n        const that = this;\n        const insertionControllee = new class implements Controllee<ButtonCmd> {\n            handle(cmd: ButtonCmd): void {\n                // insert element to node at *path*.\n                const model = that.getMajorData();\n                const rider = new StandardRider(model.root, path);\n                rider.getModule().splice(index, 0, {\n                    kind: \"element\",\n                    name: cmd.message\n                });\n                that.updateMajorData(model);\n                // close the popup\n                popupConrollee.handle({\n                    kind: \"popup\",\n                    command: \"close\"\n                });\n            }\n        }\n        const widget = new Pile();\n        widget.setChildren([\n            new Wrapper(<span>You may insert one of the elements.</span>),\n            ...insertableElements.map((name) => {\n                const btn = new Button()\n                btn.initData({\n                    label: name,\n                    message: name\n                })\n                btn.bind(insertionControllee)\n                return btn\n            })\n        ])\n        const popupConrollee = tell(widget, \"Cancel\");\n    }\n    interpreteEditElement(path: Path): void {\n        const widget = new StringViewer()\n        widget.initData(\"You may delete this element.\");\n        popup(widget,\n            [\n                { label: <span style={{ \"color\": 'red' }}>Delete</span>, key: \"delete\" },\n                { label: \"Cancel\", key: \"cancel\" }\n            ],\n            {\n                delete: () => {\n                    const data = this.getMajorData();\n                    const rider = new StandardRider(data.root, path);\n                    console.log(rider.getNodeKind(), rider, path);\n                    // return;\n                    rider.up()\n                    rider.getModule().splice(path[path.length - 1], 1);\n                    this.updateMajorData(data);\n                    return;\n                },\n                cancel: () => { }\n            }\n        )\n    }\n    interpreteEditRepetition(path: Path): void {\n\n        class RepetetionEditor extends Editor<number, void> {\n            private editor: ProbabilityEditor;\n            init() {\n                this.editor = new ProbabilityEditor();\n                JSXFactory.render(this.getDOM(),\n                    <label>Pr(looping back) = {this.editor.getDOM()}</label>\n                );\n            }\n            getMajorData(): number {\n                return this.editor.getMajorData();\n            }\n            displayData(data: number): void {\n                this.editor.initData(data);\n            }\n        }\n\n        const data = copy(this.getMajorData())\n        const rider = new StandardRider(data.root, path);\n        const repet = rider.getRepetition();\n        const ed = new RepetetionEditor();\n        ed.initData(repet.prob, undefined);\n\n        popup(ed,\n            [\n                { label: <span style={{ \"color\": \"green\" }}>Submit</span>, key: \"submit\" },\n                { label: <span style={{ \"color\": \"red\" }}>Delete</span>, key: \"delete\" },\n                { label: \"Cancel\", key: \"cancel\" }\n            ],\n            {\n                \"submit\": () => {\n                    const prob = ed.getMajorData();\n                    if (0 <= prob && prob <= 1) {\n                        repet.prob = prob;\n                        this.updateMajorData(data);\n                    } else {\n                        alert(\"invalid probability\");\n                    }\n                },\n                \"delete\": () => {\n                    const path = rider.getPath()\n                    const index = path[path.length - 1];\n                    rider.up();\n                    const m = rider.getModule();\n                    m.splice(index, 1);\n                    this.updateMajorData(data);\n                },\n                \"cancel\": () => { }\n            }\n        )\n    }\n    interpreteEditAlternation(path: Path): void {\n        type AlternationProbs = number[];\n        class AlternationEditor extends Editor<AlternationProbs, void> implements Controllee<ButtonCmd> {\n            handle(cmd: ButtonCmd): void {\n                switch (cmd.message) {\n                    case 'add': {\n                        this.updateMajorData(this.getMajorData().concat([0]))\n                        return;\n                    }\n                    case 'del': {\n                        let d = this.getMajorData()\n                        this.updateMajorData(d.slice(0, d.length - 1))\n                        return\n                    }\n                    case 'csv': {\n                        let d = this.getMajorData()\n                        let csvText = CSV.dump({\n                            head: ['Pr'],\n                            body: d.map((p)=> ({'Pr': p}))\n                        })\n                        const textarea = <textarea cols=\"30\" rows=\"10\"></textarea> as HTMLTextAreaElement;\n                        textarea.value = csvText;\n                        ask(new Wrapper(textarea), {\n                            ok: () => {\n                                const csv = CSV.parse(textarea.value);        \n                                if (equal(csv.head, ['Pr'])) {\n                                    this.updateMajorData(csv.body.map((r)=>(r['Pr'])))\n                                } else {\n                                    alert(\"You must not change the header.\")\n                                }\n                            },\n                            cancel: () => { }\n                        })\n                        return;\n                    }\n                    default: {\n                        throw null;\n                    }\n                }\n            }\n            private pile: Pile;\n            private editors: ProbabilityEditor[];\n            init() {\n                this.pile = new Pile();\n                JSXFactory.render(this.getDOM(), this.pile.getDOM());\n            }\n            displayData(data: number[]): void {\n                this.editors = data.map((p) => {\n                    const ed = new ProbabilityEditor();\n                    ed.initData(p);\n                    return ed;\n                })\n                // add/delete row\n                const addRowBtn = new Button();\n                const deleteRowBtn = new Button();\n                addRowBtn.initData({\n                    label: \"+\",\n                    message: \"add\"\n                })\n                deleteRowBtn.initData({\n                    label: \"-\",\n                    message: \"del\"\n                })\n                addRowBtn.bind(this);\n                deleteRowBtn.bind(this);\n                let hp = new HPile()\n                hp.setChildren([addRowBtn, deleteRowBtn]);\n                // input/output as CSV\n                const ioBtn = new Button();\n                ioBtn.initData({\n                    label: \"To/From CSV\",\n                    message: \"csv\"\n                })\n                ioBtn.bind(this)\n                this.pile.setChildren([\n                    ...this.editors.map((ed, i) => {\n                        return new Wrapper(<label>{i.toString() + \": \"}{ed.getDOM()}</label>)\n                    }),\n                    hp,ioBtn\n                ]);\n            }\n            getMajorData(): AlternationProbs {\n                return this.editors.map((ed) => {\n                    return ed.getMajorData();\n                });\n            }\n        }\n\n        const module = copy(this.getMajorData())\n        const rider = new StandardRider(module.root, path);\n        const alter = rider.getAlternation();\n        const probs = alter.psubs.map(ps => ps.prob);\n\n        const ed = new AlternationEditor();\n        ed.initData(probs, undefined);\n\n        function validateDistribution(dist: number[]) {\n            let s = 0;\n            let i = 0;\n            for (let n of dist) {\n                if (typeof n != 'number') {\n                    throw Error('The ' + i + '-th item is not a number.')\n                }\n                if (! (0 <= n && n <= 1)) {\n                    throw Error('The ' + i + '-th number goes out of range 0~1 (' + n + ').')\n                }\n                s += n;\n                i ++;\n            }\n            if (! floatEqual(s, 1)) {\n                throw Error('The sum of probability does not sum up to 1.')\n            }\n        }\n        popup(ed,\n            [\n                { label: <span style={{ \"color\": \"green\" }}>Submit</span>, key: \"submit\" },\n                { label: <span style={{ \"color\": \"red\" }}>Delete</span>, key: \"delete\" },\n                { label: \"Cancel\", key: \"cancel\" }\n            ],\n            {\n                \"submit\": () => {\n                    const newDist = ed.getMajorData();\n                    try {\n                        validateDistribution(newDist);\n                        let psubs = []\n                        for (let i = 0; i < newDist.length; i++) {\n                            psubs.push({\n                                prob: newDist[i],\n                                mod: (i < alter.psubs.length) ? alter.psubs[i].mod : []\n                            })\n                        }\n                        alter.psubs = psubs\n                        this.updateMajorData(module)\n                    }\n                    catch (e) {\n                        alert(e.message)\n                    }\n                },\n                \"delete\": () => {\n                    const path = rider.getPath()\n                    const index = path[path.length - 1];\n                    rider.up();\n                    const m = rider.getModule();\n                    m.splice(index, 1);\n                    this.updateMajorData(module);\n                },\n                \"cancel\": () => { }\n            }\n        )\n    }\n    interpreteDeleteDef(name: string) {\n        let useless = true\n        const model = this.getMajorData()\n        console.log(model, name)\n        tranverseModule(model.root, (e) => {\n            if (e.name === name) {\n                useless = false\n            }\n        })\n        if (useless) {\n            delete model.namespace[name]\n            this.updateMajorData(model)\n            this.handle({\n                kind: \"focus\",\n                name: \"\"\n            })\n            return\n        } else {\n            alert(\"This element is still in use, so you cannot delete it.\")\n            return\n        }\n    }\n    moduleVr: ModuleViewer;\n    indexViewer: IndexViewer;\n    definitionViewer: DefinitionViewer;\n    elementDefEr: ElementDefEditor;\n    makeContainer(): HTMLElement {\n        return (\n            <div\n                style={{\n                    display: \"flex\",\n                    \"flex-direction\": \"column\",\n                    height: \"100%\"\n                }}\n            ></div>\n        )\n    }\n    init() {\n        super.init();\n\n        const menubar = new Menubar();\n        menubar.initData([\n            {\n                name: \"File\",\n                content: [\"New\", \"Load\", \"Save\"]\n            },\n            {\n                name: \"Edit\",\n                content: [\"Undo\", \"Redo\"]\n            },\n            {\n                name: \"About\",\n                content: [\"Website\"]\n            }\n        ]);\n        menubar.bind(this);\n\n        this.moduleVr = new ModuleViewer();\n        this.moduleVr.bind(this);\n\n        this.elementDefEr = new ElementDefEditor()\n        this.elementDefEr.register(this, (def) => {\n            if (def !== null) {\n                const model = this.getMajorData()\n                const name = (this.definitionViewer.getData() as { name: string }).name\n                model.namespace[name] = def\n                this.updateMajorData(model)\n            }\n        })\n\n        this.definitionViewer = new DefinitionViewer()\n        this.definitionViewer.bind(this)\n\n        this.indexViewer = new IndexViewer()\n        this.indexViewer.bind(this)\n\n        this.backgroundEr = new BackgroundDistributionEditor();\n\n        JSXFactory.render(this.getDOM(),\n            <div style={{ \"flex-grow\": \"0\" }}>{menubar.getDOM()}</div>,\n            <div style={{ \"flex-grow\": \"0\" }}>{this.backgroundEr.getDOM()}</div>,\n            <div style={{ \"flex-grow\": \"1\", \"height\": \"30%\", \"overflow\": \"auto\" }}>{this.moduleVr.getDOM()}</div>,\n            <div style={{ \"flex-grow\": \"1\", \"height\": \"50%\" }}>\n                <div\n                    style={{\n                        \"display\": \"flex\",\n                        \"flex-direction\": \"row\",\n                        \"border-top\": \"1px solid black\",\n                        \"height\": \"100%\"\n                    }}\n                >\n                    {this.indexViewer.getDOM()}\n                    <div\n                        style={{\n                            \"flex-grow\": \"1\",\n                            \"border-left\": \"1px solid black\",\n                            \"overflow-y\": \"scroll\"\n                        }}\n                    >\n                        {this.definitionViewer.getDOM()}\n                        {this.elementDefEr.getDOM()}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n    displayData(data: Model): void {\n        function getElementUse(module: Module): { [key: string]: number } {\n            const elementUse: { [key: string]: number } = {};\n            const rider = new StandardRider(data.root);\n            function walk(rider: StandardRider) {\n                if (rider.isElement()) {\n                    const name = rider.getElementContent().name;\n                    elementUse[name] = (elementUse[name] || 0) + 1;\n                } else {\n                    for (const r of rider.getChildRiders()) {\n                        walk(r);\n                    }\n                }\n            }\n            walk(rider);\n            return elementUse\n        }\n        this.alphabet = data.alphabet\n        this.moduleVr.initData(transformModule<Element, ColoredElement>(data.root,\n            (e: Element): ColoredElement => {\n                const name = e.name;\n                const elem = data.namespace[name];\n                switch (elem.kind) {\n                    case ElementKind.Motif: {\n                        return {\n                            type: ElementKind.Motif,\n                            name: name,\n                            color: elem.color,\n                        } as ColoredElement;\n                    }\n                    case ElementKind.GMotif: {\n                        return {\n                            type: ElementKind.GMotif,\n                            name: name,\n                            dist: elem.distribution,\n                            color: elem.color,\n                        } as ColoredElement;\n                    }\n                    case ElementKind.Spacer: {\n                        return {\n                            type: ElementKind.Spacer,\n                            name: name\n                        } as ColoredElement;\n                    }\n                    default: {\n                        throw new Error()\n                    }\n                }\n            })\n        );\n        const elementUse = getElementUse(data.root);\n        const makeIndex = (data: Namespace, alphabet: Alphabet, elementUse: ElementUse): Index => {\n            const index: Index = []\n            const makeIndexItem = (name: string, def: ElementDef): IndexItem => {\n                switch (def.kind) {\n                    case \"motif\": {\n                        return {\n                            name: name,\n                            kind: ElementKind.Motif,\n                            color: def.color,\n                            useCount: elementUse[name] || 0\n                        }\n                    }\n                    case \"g-motif\": {\n                        return {\n                            name: name,\n                            kind: ElementKind.GMotif,\n                            color: def.color,\n                            useCount: elementUse[name] || 0\n                        }\n                    }\n                    case \"spacer\": {\n                        return {\n                            name: name,\n                            kind: ElementKind.Spacer,\n                            useCount: elementUse[name] || 0\n                        }\n                    }\n                    default: {\n                        throw new Error(\"internal\")\n                    }\n                }\n            }\n            for (const name of Object.keys(data).sort()) {\n                index.push(makeIndexItem(name, data[name]))\n            }\n            return index;\n        }\n        this.indexViewer.initData(makeIndex(data.namespace, data.alphabet, elementUse))\n\n        this.backgroundEr.initData(data.background, {\n            alphabet: this.alphabet\n        })\n    }\n    getMajorData(): Model {\n        return copy(super.getMajorData())\n    }\n    handle(cmd: MenubarCommand | ModuleEditCmd | ChangeDefinitionCmd | IndexCmd): void {\n        if (cmd.kind === \"menubar\") {\n            const cmdString = cmd.firstLevel + \".\" + cmd.secondLevel;\n            if (cmdString === \"Edit.Undo\") {\n                this.handleUndo();\n                return;\n            } else if (cmdString === \"Edit.Redo\") {\n                this.handleRedo();\n                return;\n            } else {\n                this.handleNeitherUndoNorRedo();\n                switch (cmdString) {\n                    case \"File.New\": {\n                        const alphabet = \"ACGT\".split(\"\");\n                        const bgd: CodeDistribution = {};\n                        for (const code of alphabet) {\n                            bgd[code] = 1 / alphabet.length;\n                        }\n                        this.updateMajorData({\n                            namespace: {},\n                            background: bgd,\n                            alphabet: alphabet,\n                            root: []\n                        });\n                        return;\n                    }\n                    case \"File.Load\": {\n                        const file = requestFile((file: File | null) => {\n                            if (file) {\n                                const reader = new FileReader();\n                                reader.addEventListener(\"load\", () => {\n                                    const text = reader.result as string;\n                                    const json = JSON.parse(text);\n                                    this.updateMajorData(json as Model);\n                                })\n                                reader.readAsText(file)\n                            }\n                        });\n                        return;\n                    }\n                    case \"File.Save\": {\n                        const blob = new Blob([JSON.stringify(this.getMajorData(), null, \"\\t\")], { type: \"text/plain;charset=utf-8\" });\n                        FileSaver.saveAs(blob, \"model.json\");\n                        return;\n                    }\n                    default: {\n                        console.log(\"unhandled menu command\");\n                        return;\n                    }\n                }\n            }\n        } else {\n            this.handleNeitherUndoNorRedo();\n            switch (cmd.kind) {\n                case \"move\": {\n                    return this.interpreteMoveElementToNode(cmd.epath, cmd.mpath, cmd.mindex);\n                }\n                case \"copy\": {\n                    return this.interpreteCopyElementToNode(cmd.epath, cmd.mpath, cmd.mindex);\n                }\n                case \"link\": {\n                    return this.interpreteLinkNodes(cmd.mpath, cmd.p, cmd.q);\n                }\n                case \"edit-alternation\": {\n                    return this.interpreteEditAlternation(cmd.path);\n                }\n                case \"edit-repetition\": {\n                    return this.interpreteEditRepetition(cmd.path);\n                }\n                case \"edit-element\": {\n                    return this.interpreteEditElement(cmd.path);\n                }\n                case \"edit-node\": {\n                    return this.interpreteEditNode(cmd.path, cmd.index);\n                }\n                case \"delete-def\": {\n                    return this.interpreteDeleteDef(cmd.name);\n                }\n                case \"rename-def\": {\n                    return this.interpreteRenameDef(cmd.oldName, cmd.newName);\n                }\n                case \"focus\": {\n                    return this.interpreteFocus(cmd.name)\n                }\n                case \"new-element\": {\n                    return this.interpreteNewElement(cmd.elementKind)\n                }\n                default: {\n                    console.log(cmd);\n                    return;\n                }\n            }\n        }\n    }\n    interpreteMoveElementToNode(ePath: Path, nPath: Path, nindex: number) {\n        const root1 = this.getMajorData().root;\n        if (equal(ePath.slice(0, ePath.length - 1), nPath)) {\n            // same parent\n            const parentPath = nPath;\n            const eindex = ePath[ePath.length - 1];\n            const m = new StandardRider(root1, parentPath).getModule();\n            const e = m[eindex];\n            m.splice(eindex, 1);\n            m.splice((nindex <= eindex) ? nindex : (nindex - 1), 0, e);\n        } else {\n            const rider = new StandardRider(root1, ePath.slice(0, ePath.length - 1));\n            const m = rider.getModule();\n            const eindex = ePath[ePath.length - 1];\n            const e = m[eindex];\n            m.splice(eindex, 1);\n            rider.go(nPath);\n            rider.getModule().splice(nindex, 0, e);\n        }\n        const model = this.getMajorData()\n        model.root = root1\n        this.updateMajorData(model);\n    }\n    interpreteCopyElementToNode(ePath: Path, nPath: Path, nindex: number) {\n        const data = this.getMajorData()\n        const root1 = data.root;\n        if (equal(ePath.slice(0, ePath.length - 1), nPath)) {\n            // same parent\n            const parentPath = nPath;\n            const eindex = ePath[ePath.length - 1];\n            const m = new StandardRider(root1, parentPath).getModule();\n            const e = m[eindex];\n            m.splice(nindex, 0, e);\n        } else {\n            const rider = new StandardRider(root1, ePath);\n            const e = rider.getItem();\n            rider.go(nPath);\n            rider.getModule().splice(nindex, 0, e);\n        }\n        this.updateMajorData({\n            alphabet: this.alphabet,\n            namespace: data.namespace,\n            background: data.background,\n            root: root1\n        });\n    }\n    interpreteLinkNodes(path: Path, p: number, q: number): void {\n        const data = this.getMajorData()\n        const root1 = data.root;\n        const rider = new StandardRider(root1, path);\n        const module = rider.getModule();\n        const piece = module.slice(min(p, q), max(p, q));\n        const item: ModuleItem = ((p < q)\n            ? { kind: \"alternation\", psubs: [{ prob: 0.5, mod: piece }, { prob: 0.5, mod: [] }] }\n            : { kind: \"repetition\", prob: 0.5, sub: piece });\n        module.splice(min(p, q), Math.abs(p - q), item);\n        return this.updateMajorData({\n            alphabet: data.alphabet,\n            namespace: data.namespace,\n            background: data.background,\n            root: root1\n        });\n    }\n}","import * as JSXFactory from \"../JSX/SVGFactory\";\n\nimport { Paper } from \"snapsvg\";\nimport { maxof, equal, zip, zip2, sum } from \"../JSUtility\";\nimport Snap = require(\"snapsvg\");\nimport { PWMBox, InternalBox, SpacerBox, HandlerGroup } from \"../widget\";\nimport { UPath, ModuleEditCmd } from \"./ModelEditor\";\nimport { Controller, Editor } from \"../Widget/Widget\";\n\nimport { QuasiModule } from \"../SSPDL/SSPDL\";\nimport { Rider, Path } from \"../SSPDL/Utility\";\n\n\nexport type ColoredElement = ColoredMotif | ColoredGMotif | ColoredSpacer;\n\n\ninterface ColoredMotif {\n    type: \"motif\";\n    name: string;\n    color: string;\n}\n\n\ninterface ColoredGMotif {\n    type: \"g-motif\";\n    name: string;\n    color: string;\n}\n\n\ninterface ColoredSpacer {\n    type: \"spacer\";\n    name: string;\n}\n\n\ntype ModelRider = Rider<ColoredElement>;\n\n\nexport class ModuleViewer extends Controller<QuasiModule<ColoredElement>, ModuleEditCmd>{\n    svg: SVGElement;\n    paper: Paper;\n    init() {\n        super.init();\n        this.svg = <svg width=\"0\" height=\"0\" />;\n        this.paper = Snap(this.svg);\n        this.getDOM().innerHTML = \"\"\n        this.getDOM().appendChild(this.svg);\n    }\n    displayData(data: QuasiModule<ColoredElement>): void {\n        this.paper.clear();\n        const go = renderModel(this.paper, data, {\n            onDoubleClick: (path: UPath) => {\n                // snap cannot distinguish click and double click\n\n                // switch (path.kind) {\n                //     case \"element\": {\n                //         this.send({\n                //             kind: \"insp\",\n                //             path: path.path\n                //         });\n                //         return;\n                //     }\n                // }\n            },\n            onClick: (path: UPath) => {\n                switch (path.kind) {\n                    case \"node\": {\n                        return this.send({\n                            kind: \"edit-node\",\n                            path: path.path,\n                            index: path.index\n                        });\n                    }\n                    case \"element\": {\n                        return this.send({\n                            kind: \"edit-element\",\n                            path: path.path\n                        });\n                    }\n                    case \"alternation\": {\n                        this.send({\n                            kind: \"edit-alternation\",\n                            path: path.path\n                        });\n                        return;\n                    }\n                    case \"repetition\": {\n                        this.send({\n                            kind: \"edit-repetition\",\n                            path: path.path\n                        });\n                        return;\n                    }\n                    default: {\n                        return;\n                    }\n                }\n            },\n            onDragStart: (path: UPath) => { },\n            onDrop: (path1: UPath, path2: UPath, ctrlPressed: boolean) => {\n                if (path2 === null) {\n                    return;\n                } else if (path1.kind === \"element\" && path2.kind === \"node\") {\n                    if (ctrlPressed) {\n                        return this.send({\n                            kind: \"copy\",\n                            epath: path1.path,\n                            mpath: path2.path,\n                            mindex: path2.index\n                        });\n                    } else {\n                        return this.send({\n                            kind: \"move\",\n                            epath: path1.path,\n                            mpath: path2.path,\n                            mindex: path2.index\n                        });\n                    }\n                } else if (path1.kind === \"node\" && path2.kind === \"node\") {\n                    if (equal(path1.path, path2.path) && path1.index !== path2.index) {\n                        return this.send({\n                            kind: \"link\",\n                            mpath: path1.path,\n                            p: path1.index,\n                            q: path2.index\n                        });\n                    }\n                } else {\n                    return;\n                }\n            }\n        });\n        this.svg.setAttribute(\"width\", go.w.toString());\n        this.svg.setAttribute(\"height\", (go.a + go.d).toString());\n    }\n}\n\n\ninterface HighLevelHandlerGroup {\n    onDoubleClick: (path: UPath) => void;\n    onClick: (path: UPath) => void;\n    onDragStart: (path: UPath) => void;\n    onDrop: (path1: UPath, path2: UPath, ctrlPressed: boolean) => void;\n}\n\n\ninterface GObject {\n    a: number; // vertical distance above baseline \n    d: number; // vertical distance below baseline\n    w: number; // width\n    node: Snap.Element;\n}\n\n\nfunction renderModel(paper: Paper, m: QuasiModule<ColoredElement>, hg: HighLevelHandlerGroup) {\n\n    function profaneHandlerGroup(path: UPath): HandlerGroup {\n        return {\n            onDoubleClick: () => {\n                hg.onDoubleClick(path);\n            },\n            onClick: () => {\n                hg.onClick(path);\n            },\n            onDragStart: () => {\n                hg.onDragStart(path);\n            },\n            onDrop: (node: Node, ctrlPressed: boolean) => {\n                let attr;\n                if (node instanceof SVGElement && (attr = node.getAttribute(\"smdl-path\"))) {\n                    const path1 = JSON.parse(attr);\n                    hg.onDrop(path, path1, ctrlPressed);\n                    return;\n                } else {\n                    // hg.onDrop(path, null, ctrlPressed);\n                    return;\n                }\n            }\n        }\n    }\n\n    function renderModule(paper: Paper, rider: ModelRider): GObject {\n        paper.attr({\n            \"stroke\": \"black\",\n            \"fill\": \"black\"\n        });\n        const subs = rider.getChildRiders().map((rider) => {\n            return renderModuleItem(paper.g(), rider);\n        });\n        const a = subs.length == 0 ? 30 : maxof(subs.map((s) => s.a));\n        const d = subs.length == 0 ? 30 : maxof(subs.map((s) => s.d));\n\n        const len = 60;\n        let w = 0;\n        let n = 0;\n        const pushInternalElements = (w: number, pos: number): void => {\n            paper.line(w, a, w + len, a);\n            // little triangle\n            paper.path(Snap.format(\"M{x},{y} l-10,-5 v10\", {\n                \"x\": w + len,\n                \"y\": a\n            })).attr({\n                \"fill\": \"black\"\n            });\n\n            const path: UPath = {\n                kind: \"node\",\n                path: rider.getPath(),\n                index: n\n            }\n            InternalBox(paper, JSON.stringify(path), w + len / 2, a, len / 8, profaneHandlerGroup(path));\n        }\n        pushInternalElements(w, 0);\n        w += len;\n        n++;\n        for (const x of subs) {\n            // childElements.push(transloc(x.node, w, a - x.a));\n            x.node.transform(Snap.format(\"translate({x},{y})\", {\n                \"x\": w,\n                \"y\": a - x.a\n            }));\n            w += x.w;\n            pushInternalElements(w, n);\n            w += len;\n            n++;\n        }\n        return {\n            a: a,\n            d: d,\n            w: w,\n            node: paper\n        };\n    }\n\n    function renderModuleItem(paper: Paper, rider: ModelRider): GObject {\n        switch (rider.getItemKind()) {\n            case \"element\": {\n                return renderElement(paper, rider);\n            }\n            case \"alternation\": {\n                return renderAlternation(paper, rider);\n            }\n            case \"repetition\": {\n                return renderRepetition(paper, rider);\n            }\n            default: {\n                throw new Error();\n            }\n        }\n    }\n\n    function renderElement(paper: Paper, rider: ModelRider): GObject {\n\n        const renderMotif = (p: Path, name: string, color: string): GObject => {\n            const totalWidth = 100;\n            const totalHeight = 50;\n            const elementWidgth = totalWidth;\n            const elementHeight = 30;\n            let [x, y, w, h] = [\n                (totalWidth - elementWidgth) / 2,\n                (totalHeight - elementHeight) / 2,\n                elementWidgth,\n                elementHeight\n            ];\n            const path: UPath = {\n                kind: \"element\",\n                path: rider.getPath()\n            };\n            PWMBox(\n                paper, name, color, JSON.stringify(path),\n                x, y, w, h,\n                profaneHandlerGroup(path)\n            );\n            return {\n                a: totalHeight / 2,\n                d: totalHeight / 2,\n                w: totalWidth,\n                node: paper\n            };\n        }\n\n        const renderGMotif = (p: Path, name: string, color: string): GObject => {\n            const totalWidth = 100;\n            const totalHeight = 50;\n            const elementWidth = totalWidth;\n            const elementHeight = 30;\n            let [x, y, w, h] = [\n                (totalWidth - elementWidth) / 2,\n                (totalHeight - elementHeight) / 2,\n                elementWidth,\n                elementHeight\n            ];\n            const path: UPath = {\n                kind: \"element\",\n                path: rider.getPath()\n            };\n            PWMBox(\n                paper, name, color, JSON.stringify(path),\n                x, y, w, h,\n                profaneHandlerGroup(path)\n            );\n            return {\n                a: totalHeight / 2,\n                d: totalHeight / 2,\n                w: totalWidth,\n                node: paper\n            };\n            // const w = 100;\n            // const h = 60;\n            // const path: UPath = {\n            //     kind: \"element\",\n            //     path: rider.getPath()\n            // };\n            // PWMBox(paper, name, color, JSON.stringify(path), 0, 15, w, 30, profaneHandlerGroup(path));\n            // // PWMBox(paper, name, color, JSON.stringify(path), w, h, profaneHandlerGroup(path));\n            // return {\n            //     a: h / 2,\n            //     d: h / 2,\n            //     w: w,\n            //     node: paper\n            // };\n        }\n\n        const renderSpacer = (p: Path, name: string): GObject => {\n            const totalWidth = 60;\n            const totalHeight = 30;\n            const elementWidth = 60;\n            const elementHeight = 20;\n            let [x, y, w, h] = [\n                (totalWidth - elementWidth) / 2,\n                (totalHeight - elementHeight) / 2,\n                elementWidth,\n                elementHeight\n            ];\n            const path: UPath = {\n                kind: \"element\",\n                path: rider.getPath()\n            };\n            SpacerBox(paper, name, JSON.stringify(path), x, y, w, h, profaneHandlerGroup(path));\n            return {\n                a: totalHeight / 2,\n                d: totalHeight / 2,\n                w: totalWidth,\n                node: paper\n            };\n        }\n\n        const elem = rider.getElementContent();\n        switch (elem.type) {\n            case \"motif\": {\n                return renderMotif(rider.getPath(), elem.name, elem.color);\n            }\n            case \"g-motif\": {\n                return renderGMotif(rider.getPath(), elem.name, elem.color);\n            }\n            case \"spacer\": {\n                return renderSpacer(rider.getPath(), elem.name);\n            }\n        }\n    }\n\n    function renderAlternation(paper: Paper, rider: ModelRider): GObject {\n        const leftPadding = 20;\n        const rightPadding = 10;\n        const topPadding = 5;\n        const botPadding = 5;\n        const interModulePadding = 5;\n        const probLabelOffsetY = -3;\n        const probLabelOffsetX = 3;\n\n        const alter = rider.getAlternation();\n        const subGOs: GObject[] = rider.getChildRiders().map((m) => renderModule(paper.g(), m));\n        const subWidth = maxof(subGOs.map((go) => {\n            return go.w;\n        }));\n        const subLayoutParas: { x0: number; x1: number; y: number; z: number, prob: number; elem: Snap.Element }[] = [];\n        let offsetY = topPadding;\n        for (const [go, ps] of zip2(subGOs, alter.psubs)) {\n            subLayoutParas.push({\n                x0: leftPadding + (subWidth - go.w) / 2,\n                x1: leftPadding + (subWidth + go.w) / 2,\n                y: offsetY,\n                z: offsetY + go.a,\n                prob: ps.prob,\n                elem: go.node\n            });\n            offsetY += go.a + go.d + interModulePadding;\n        }\n        const totalHeight = offsetY - interModulePadding + botPadding;\n        const totalWidth = leftPadding + subWidth + rightPadding;\n        const leftEnd = 0;\n        const rightEnd = leftPadding + subWidth + rightPadding;\n        for (const para of subLayoutParas) {\n            // translate position\n            paper.add(para.elem.transform(Snap.format(\"translate({x},{y})\", {\n                \"x\": para.x0,\n                \"y\": para.y\n            })));\n            // left/right extension\n            paper.line(leftEnd, para.z, para.x0, para.z);\n            paper.line(para.x1, para.z, rightEnd, para.z);\n        }\n        // probability labels\n        const pp = paper.g();\n        const probs = subLayoutParas.map((para) => {\n            return para.prob;\n        });\n        for (const para of subLayoutParas) {\n            pp.text(leftEnd + probLabelOffsetX, para.z + probLabelOffsetY, para.prob.toFixed(2))\n        }\n        const jointTop = subGOs[0].a + topPadding;\n        const jointBot = totalHeight - subGOs[subGOs.length - 1].d - botPadding;\n        pp.line(leftEnd, jointTop, leftEnd, jointBot);\n        pp.line(rightEnd, jointTop, rightEnd, jointBot);\n        pp.hover(\n            () => {\n                pp.attr({\n                    \"stroke\": \"blue\",\n                    \"fill\": \"blue\"\n                });\n            },\n            () => {\n                pp.attr({\n                    \"stroke\": \"black\",\n                    \"fill\": \"black\"\n                });\n            })\n        pp.click(() => {\n            hg.onClick({\n                kind: \"alternation\",\n                path: rider.getPath()\n            });\n        });\n        const jointMid = (jointTop + jointBot) / 2\n        return {\n            a: jointMid,\n            d: totalHeight - jointMid,\n            w: totalWidth,\n            node: paper\n        };\n    }\n\n    function renderRepetition(paper: Paper, rider: ModelRider): GObject {\n        const arrowHeight = 20;\n        const horizontalPadding = 5;\n        const probLabelOffsetX = 3\n\n        const rep = rider.getRepetition();\n        const x = renderModule(paper.g(), rider.getChildRiders()[0]);\n        x.node.transform(Snap.format(\"translate({x},{y})\", {\n            \"x\": horizontalPadding,\n            \"y\": arrowHeight\n        }));\n        const pp = paper.g();\n        // reverse arrow\n        pp.path(Snap.format(\"M{x},{y} v-{h} h{w} v{h}\", {\n            \"x\": horizontalPadding / 2,\n            \"y\": x.a + arrowHeight,\n            \"h\": x.a + arrowHeight / 2,\n            \"w\": x.w + horizontalPadding\n        })).attr({\n            \"fill\": \"none\"\n        });\n        // triangle\n        pp.path(Snap.format(\"M{x},{y} l-5,-10 h10\", {\n            \"x\": horizontalPadding / 2,\n            \"y\": x.a + arrowHeight - horizontalPadding / 2\n        }));\n        // dots\n        const dotRadius = horizontalPadding / 2;\n        pp.circle(dotRadius, x.a + arrowHeight, dotRadius);\n        pp.circle(x.w + dotRadius * 3, x.a + arrowHeight, dotRadius);\n        // probability label\n        const labelX = x.w + dotRadius * 3 + probLabelOffsetX;\n        const labelY = (x.a + arrowHeight) - (x.a + arrowHeight / 2) / 2;\n        pp.text(labelX, labelY, rep.prob.toFixed(2)).attr({\n            \"dominant-baseline\": \"central\"\n        });\n        pp.hover(\n            () => {\n                pp.attr({\n                    \"stroke\": \"blue\",\n                    \"fill\": \"blue\"\n                });\n            },\n            () => {\n                pp.attr({\n                    \"stroke\": \"black\",\n                    \"fill\": \"black\"\n                });\n            }\n        )\n        pp.click(\n            () => {\n                hg.onClick({\n                    kind: \"repetition\",\n                    path: rider.getPath()\n                })\n            }\n        )\n        return {\n            a: x.a + arrowHeight,\n            d: x.d,\n            w: x.w + 2 * horizontalPadding,\n            node: paper\n        }\n    }\n\n    return renderModule(paper, new Rider(m));\n}\n\n\n","import * as JSXFactory from \"../JSX/HTMLFactory\";\n\nimport { Editor, Viewer, Controllee } from \"../Widget/Widget\";\nimport { StringEditor } from \"../Widget/StringEditor\";\nimport { PWM, Distribution, Alphabet, CodeDistribution } from \"../SSPDL/SSPDL\";\nimport * as SeqLogo from \"@baliga-lab/sequencelogo.js\";\nimport { later } from \"../JSUtility\";\nimport { ColorEditor } from \"../Widget/ColorEditor\";\nimport { DistributionEditor } from \"./DistributionEditor\";\nimport { NumberEditor } from \"../Widget/NumberEditor\";\nimport { Button, ButtonCmd } from \"../Widget/Button\";\nimport { popup, ask } from \"../Widget/Utility\";\nimport { PWMEditor } from \"./PWMEditor\";\n\n\ninterface Motif {\n    color: string;\n    matrix: PWM;\n}\n\n\ninterface MotifEditorMinorData { alphabet: Alphabet; background: CodeDistribution; }\nexport class MotifEditor extends Editor<Motif, MotifEditorMinorData> {\n    colorEr: ColorEditor;\n    pwmEr: PWMEditor;\n    init() {\n        this.colorEr = new ColorEditor();\n        this.pwmEr = new PWMEditor();\n        JSXFactory.render(this.getDOM(),\n            <label>Color: {this.colorEr.getDOM()}</label>,\n            <label>PWM:{this.pwmEr.getDOM()}</label>\n        )\n        this.colorEr.register(this, (data) => {\n            this.emitDataChange()\n        })\n        this.pwmEr.register(this, (data) => {\n            this.emitDataChange()\n        })\n    }\n    displayData(data: Motif, minor: MotifEditorMinorData): void {\n        this.colorEr.initData(data.color, undefined);\n        this.pwmEr.initData(data.matrix, {\n            alphabet: minor.alphabet,\n            background: minor.background\n        });\n    }\n    getMajorData(): Motif {\n        return {\n            color: this.colorEr.getMajorData(),\n            matrix: this.pwmEr.getMajorData()\n        };\n    }\n}\n\n\ninterface GMotif {\n    distribution: Distribution;\n    color: string;\n    matrix: PWM;\n}\n\n\nexport class GMotifEditor extends Editor<GMotif, MotifEditorMinorData> {\n    distEr: DistributionEditor;\n    colorEr: ColorEditor;\n    pwmEr: PWMEditor;\n    init() {\n        super.init();\n        this.distEr = new DistributionEditor();\n        this.colorEr = new ColorEditor();\n        this.pwmEr = new PWMEditor();\n        JSXFactory.render(this.getDOM(),\n            <label>Color: {this.colorEr.getDOM()}</label>,\n            <label>PWM:{this.pwmEr.getDOM()}</label>,\n            <label>Distribution of #repetition:{this.distEr.getDOM()}</label>\n        )\n        const emitChange = () => this.emitDataChange()\n        this.distEr.register(this, emitChange)\n        this.colorEr.register(this, emitChange)\n        this.pwmEr.register(this, emitChange)\n    }\n    displayData(data: GMotif, minor: MotifEditorMinorData): void {\n        this.distEr.initData(data.distribution, undefined);\n        this.colorEr.initData(data.color, undefined);\n        this.pwmEr.initData(data.matrix, {\n            alphabet: minor.alphabet,\n            background: minor.background\n        });\n    }\n    getMajorData(): GMotif {\n        return {\n            distribution: this.distEr.getMajorData(),\n            color: this.colorEr.getMajorData(),\n            matrix: this.pwmEr.getMajorData()\n        };\n    }\n}\n","import * as JSXFactory from \"../JSX/HTMLFactory\";\n\nimport { Editor, Controllee, Viewer } from \"../Widget/Widget\";\nimport { ButtonCmd, Button } from \"../Widget/Button\";\nimport { PWM, Alphabet, CodeDistribution } from \"../SSPDL/SSPDL\";\nimport { NumberEditor } from \"../Widget/NumberEditor\";\nimport { ask, tell } from \"../Widget/Utility\";\nimport { later, copy, zip2, min, floatEqual, equal } from \"../JSUtility\";\nimport * as SeqLogo from \"@baliga-lab/sequencelogo.js\";\nimport { CSV } from \"../CSV\";\nimport { Wrapper } from \"../Widget/Wrapper\";\nimport { StringEditor } from \"../Widget/StringEditor\";\n\n\n\n\n\nclass PEditor extends Editor<PWM, PWMEditorMinorData> implements Controllee<ButtonCmd> {\n    handle(cmd: ButtonCmd): void {\n        const handleFromConsensus = () => {\n            let ed = new StringEditor()\n            ed.initData(\"\", undefined);\n            ask(ed, {\n                cancel: () => {},\n                ok: () => {\n                    let newData = [];\n                    let alphabet = this.getMinorData().alphabet;\n                    for (let ch of ed.getMajorData()) {\n                        let d: { [key: string]: number } = {}\n                        if (alphabet.indexOf(ch) >= 0) {\n                            for (let code of alphabet) {\n                                d[code] = (code == ch) ? 1 : 0;\n                            }\n                        } else {\n                            for (let code of alphabet) {\n                                d[code] = 1 / alphabet.length;\n                            }\n                        }\n                        newData.push(d)\n                    }\n                    this.updateMajorData(newData)\n                }\n            })\n        }\n        switch (cmd.message) {\n            case \"add-row\": {\n                const data: PWM = this.getMajorData();\n                this.updateMajorData(data.concat([copy(this.getMinorData().background)]));\n                return\n            }\n            case \"del-row\": {\n                const data: PWM = this.getMajorData();\n                this.updateMajorData(data.slice(0, data.length - 1));\n                return\n            }\n            case \"csv\": {\n                const alpha = this.getMinorData().alphabet;\n                const data = this.getMajorData();\n                const csvText = CSV.dump({ head: alpha, body: data })\n\n                const textarea = <textarea cols=\"30\" rows=\"10\"></textarea> as HTMLTextAreaElement;\n                textarea.value = csvText;\n                ask(new Wrapper(textarea), {\n                    ok: () => {\n                        const csv = CSV.parse(textarea.value);\n                        console.log(\"ehhhh?\", csv);\n\n                        if (equal(csv.head, alpha)) {\n                            this.updateMajorData(csv.body)\n                        } else {\n                            alert(\"You must not change the header.\")\n                        }\n                    },\n                    cancel: () => { }\n                })\n                return;\n            }\n            case \"consensus\": {\n                handleFromConsensus();\n                return;\n            }\n        }\n    }\n    private editorMaps: { [key: string]: NumberEditor }[];\n    displayData(data: PWM, minor: PWMEditorMinorData): void {\n        // To/From CSV\n        const csvButton = new Button();\n        csvButton.initData({\n            label: \"To/From CSV\",\n            message: \"csv\"\n        });\n        csvButton.bind(this);\n\n        // From Consensus\n        const cssButton = new Button();\n        cssButton.initData({\n            label: \"From consensus\",\n            message: \"consensus\"\n        })\n        cssButton.bind(this)\n\n        // add/delete row\n        const addRowBtn = new Button();\n        const deleteRowBtn = new Button();\n        addRowBtn.initData({\n            label: \"+\",\n            message: \"add-row\"\n        })\n        deleteRowBtn.initData({\n            label: \"-\",\n            message: \"del-row\"\n        })\n        addRowBtn.bind(this);\n        deleteRowBtn.bind(this);\n\n        this.editorMaps = []\n        for (const row of data) {\n            const editorMap: { [key: string]: NumberEditor } = {}\n            for (const code of minor.alphabet) {\n                const e = new NumberEditor();\n                e.initData(\n                    row[code],\n                    {\n                        min: 0,\n                        max: 1,\n                        step: 0.001\n                    }\n                );\n                editorMap[code] = e\n            }\n            this.editorMaps.push(editorMap)\n        }\n        JSXFactory.render(this.getDOM(),\n            <div>\n                <table>\n                    <tr>\n                        {minor.alphabet.map((b) => (<th style={{ width: \"6em\" }}>{b}</th>))}\n                    </tr>\n                    {\n                        this.editorMaps.map((table) => (\n                            <tr>\n                                {\n                                    minor.alphabet.map((code) => {\n                                        return <td style={{ width: \"6em\" }}>{table[code].getDOM()}</td>\n                                    })\n                                }\n                            </tr>\n                        ))\n                    }\n                    <tr>\n                        <td colspan=\"2\">{addRowBtn.getDOM()}</td>\n                        <td colspan=\"2\">{deleteRowBtn.getDOM()}</td>\n                    </tr>\n                </table>\n                {csvButton.getDOM()}\n                {cssButton.getDOM()}\n            </div>\n        );\n    }\n    getMajorData(): PWM {\n        return this.editorMaps.map((table) => {\n            const d: CodeDistribution = {}\n            for (const code of Object.keys(table)) {\n                d[code] = table[code].getMajorData()\n            }\n            return d;\n        })\n    }\n}\n\n\ninterface PWMEditorMinorData { alphabet: Alphabet, background: CodeDistribution }\n\n\nfunction validatePWM(alphabet: Alphabet, pwm: PWM) {\n    pwm.forEach((record, rowIndex) => {\n        let sum = 0;\n        for (const symbol of alphabet) {\n            const p = record[symbol];\n            if (!(0 <= p && p <= 1)) {\n                throw Error(\"The probability at (\" + rowIndex + \",\" + symbol + \") out of range.\");\n            }\n            sum += p;\n        }\n        if (!floatEqual(sum, 1)) {\n            throw Error(\"Row#\" + (rowIndex+1) + \" sums up to \" + sum + \" (1 expected).\")\n        }\n    })\n}\n\n\nexport class PWMEditor extends Editor<PWM, PWMEditorMinorData> {\n    private viewer: SeqLogoViewer;\n    protected init() {\n        super.init();\n        this.viewer = new SeqLogoViewer();\n        const content = <div>{this.viewer.getDOM()}</div>\n        content.addEventListener(\"click\", () => {\n            const ed = new PEditor();\n            ed.initData(this.getMajorData(), this.getMinorData())\n            ask(ed, {\n                ok: () => {\n                    const newData = ed.getMajorData();\n                    try {\n                        validatePWM(this.getMinorData().alphabet, newData);\n                        this.updateMajorData(newData);\n                    }\n                    catch (e) {\n                        alert(\"Invalid pwm: \" + e.message);\n                    }\n                },\n                cancel: () => { }\n            })\n        })\n\n        JSXFactory.render(this.getDOM(), content);\n    }\n    protected displayData(data: PWM, minor: PWMEditorMinorData): void {\n        this.viewer.initData({\n            alphabet: minor.alphabet,\n            pwm: data\n        });\n    }\n}\n\n\ninterface SeqLogoData {\n    pwm: PWM;\n    alphabet: Alphabet;\n}\nclass SeqLogoViewer extends Viewer<SeqLogoData> {\n    static count = 0;\n    static newID(): string {\n        SeqLogoViewer.count++;\n        return \"motif-viewer-canvas\" + SeqLogoViewer.count.toString();\n    }\n    private id: string;\n    init() {\n        super.init()\n        this.id = SeqLogoViewer.newID();\n        const logoEl = <div id={this.id}></div>\n        JSXFactory.render(this.getDOM(), logoEl);\n    }\n    displayData(data: SeqLogoData): void {\n\n        const transformMotif = (alphabet: Alphabet, pwm: PWM): SeqLogo.PSSM => {\n            return {\n                alphabet: alphabet,\n                values: pwm.map((row) => alphabet.map((code) => row[code]))\n            };\n        }\n        later(() => {\n            SeqLogo.makeLogo(this.id, transformMotif(data.alphabet, data.pwm), {});\n        })\n    }\n}\n","import * as JSXFactory from \"../JSX/HTMLFactory\";\n\nimport { Editor } from \"../Widget/Widget\";\nimport { DistributionEditor } from \"./DistributionEditor\";\nimport { Distribution } from \"../SSPDL/SSPDL\";\n\n\ninterface Spacer {\n    distribution: Distribution;\n};\n\n\nexport class SpacerEditor extends Editor<Spacer, void> {\n    distEd: DistributionEditor;\n    init() {\n        super.init()\n        this.distEd = new DistributionEditor();\n        this.distEd.register(this, () => this.emitDataChange())\n        JSXFactory.render(this.getDOM(),\n            <label>Length distribution: {this.distEd.getDOM()}</label>\n        )\n    }\n    displayData(data: Spacer): void {\n        this.distEd.initData(data.distribution, undefined);\n    }\n    getMajorData(): Spacer {\n        return {\n            distribution: this.distEd.getMajorData()\n        };\n    }\n}","export { sum, max, min, maxof, minof, format, later, assert, dummy, equal, enumerate, zip, zip2, copy };\n\n\nconst sum = (...nums: number[]): number => {\n    let s = 0;\n    for (let n of nums) {\n        s += n;\n    }\n    return s;\n}\n\n\nconst max = Math.max;\nconst min = Math.min;\nconst maxof = (a: number[]): number => max(...a);\nconst minof = (a: number[]): number => min(...a);\n\n\nconst format = (temp: string, ...fill: (string | number)[]): string => {\n    let result = \"\";\n    let i = 0;\n    let j = 0;\n    while (i < temp.length) {\n        if (temp[i] == \"%\") {\n            result += fill[j];\n            j++;\n            i++;\n        }\n        else {\n            result += temp[i];\n            i++;\n        }\n    }\n    return result;\n}\n\n\nconst later = (p: () => void): void => {\n    setTimeout(p, 100);\n}\n\n\nfunction assert(condition: boolean, message?: string) {\n    if (!condition) {\n        message = message || \"Assertion failed\";\n        if (typeof Error !== \"undefined\") {\n            throw new Error(message);\n        }\n        throw message; // Fallback\n    }\n}\n\n\nfunction dummy() {\n    return;\n}\n\n\nfunction equal(a: any, b: any): boolean {\n    return JSON.stringify(a) === JSON.stringify(b);\n}\n\n\nfunction enumerate(ls: any): { i: number, x: any }[] {\n    const items = [];\n    for (const [i, x] of Array.from(ls).entries()) {\n        items.push({\n            i: i,\n            x: x\n        });\n    };\n    return items;\n}\n\n\nfunction zip2<T1,T2>(ls0: T1[], ls1: T2[]): [T1, T2][] {\n    const lim = min(ls0.length, ls1.length);\n    const ls: [T1, T2][] = []\n    for (let i = 0; i < lim; i++) {\n        ls.push([ls0[i], ls1[i]]);\n    }\n    return ls;\n}\n\n\nfunction zip(... ls: any[][]): any[][] {\n    if (ls.length === 0) {\n        return [];\n    } else {\n        const ls1 = ls[0];\n        const r = [];\n        for (let i = 0; i < ls1.length; i++) {\n            if (ls.every((l)=>i<l.length)) {\n                r.push(ls.map(x => x[i]));\n            } else {\n                break;\n            }\n        }\n        return r;\n    }\n}\n\n\nexport function requestFile(callback: (f: File | null)=>void): void {\n    const inputElement = document.createElement(\"input\");\n    inputElement.setAttribute(\"type\", \"file\");\n    inputElement.addEventListener(\"change\", ()=>{\n        const fileList = inputElement.files;\n        callback(fileList ? fileList[0] : null);\n    })\n    inputElement.click();\n}\n\n\nfunction copy<T>(x: T): T {\n    return JSON.parse(JSON.stringify(x));\n}\n\n\nexport function floatEqual(x: number, y: number) {\n    const delta = 1E-5;\n    return Math.abs(x-y) < delta;\n}","export namespace JSX {\n    export type Attribute = {\n        id?: string;\n        class?: string[];\n        style?: {\n            \"display\"?: \"flex\" | \"unset\" | \"none\" | \"block\" | \"inline\";\n            \"flex-direction\"?: \"column\" | \"row\";\n            \"flex-grow\"?: number | string;\n            \"justify-content\"?: \"flex-end\" | \"center\";\n            \"cursor\"?: \"pointer\";\n            \"position\"?: \"relative\" | \"absolute\" | \"fixed\" ;\n            \"padding-left\"?: string;\n            \"padding-right\"?: string;\n            \"padding-top\"?: string;\n            \"padding-bottom\"?: string;\n            \"margin-left\"?: string;\n            \"margin-right\"?: string;\n            \"margin-top\"?: string;\n            \"margin-bottom\"?: string;\n            \"width\"?: string;\n            \"height\"?: string;\n            \"background-color\"?: string;\n            \"color\"?: string;\n            \"border-bottom\"?: string;\n        } & { [key: string]: string };\n    };\n    interface TextareaAttribute {\n        rows: string;\n        cols: string;\n    }\n    type InputAttribute = ColorInputAttribute | TextInputAttribute | NumberInputAttribute;\n    interface ColorInputAttribute {\n        type: \"color\";\n    }\n    interface TextInputAttribute {\n        type: \"text\";\n    }\n    interface NumberInputAttribute {\n        type: \"number\";\n        step: string | number;\n        min?: string | number;\n        max?: string | number;\n    }\n    interface TdAttribute {\n        colspan?: string | number;\n    }\n    export interface IntrinsicElements {\n        // user interface\n        div: Attribute;\n        button: Attribute;\n        input: InputAttribute & Attribute;\n        textarea: TextareaAttribute & Attribute;\n        label: Attribute;\n        // documentory\n        h1: Attribute;\n        h2: Attribute;\n        h3: Attribute;\n        h4: Attribute;\n        p: Attribute;\n        article: Attribute;\n        span: Attribute;\n        strong: Attribute;\n        em: Attribute;\n        table: Attribute;\n        tr: Attribute;\n        th: Attribute;\n        td: Attribute & TdAttribute;\n    }\n    export type Element = HTMLElement;\n    export interface ClassElement {\n        render(): HTMLElement;\n    }\n}\nexport function render(container: HTMLElement, ...children: HTMLElement[]): void {\n    container.innerHTML = \"\";\n    for (const ch of children) {\n        container.appendChild(ch)\n    }\n}\nexport type Builder<Prop> = (prop: Prop) => HTMLElement;\nexport function createElement(tag: string | Function, attr: JSX.Attribute, ...children: (JSX.Element | JSX.Element[])[]): Element {\n    if (typeof tag === \"function\") {\n        const builder = tag;\n        const prop = attr;\n        return builder(attr);\n    } else {\n        const e = document.createElement(tag);\n        if (attr) {\n            for (const key of Object.keys(attr)) {\n                if (key === \"id\") {\n                    e.id = attr.id as string;\n                } else if (key === \"class\") {\n                    for (const cls of (attr.class as string[])) {\n                        e.classList.add(cls);\n                    }\n                } else if (key === \"style\") {\n                    const st = attr.style as { [key: string]: string };\n                    const styleList = Object.keys(st).map((k) => ({\n                        name: k,\n                        value: st[k] as string\n                    }));\n                    const styleString = styleList.map((x) => (x.name + \":\" + x.value + \";\")).join(\"\");\n                    e.setAttribute(\"style\", styleString);\n                } else {\n                    const a = attr as { [key: string]: string };\n                    e.setAttribute(key, a[key] as string);\n                }\n            }\n            if (attr.style) {\n                const st = attr.style;\n                const styleList = Object.keys(st).map((k) => ({\n                    name: k,\n                    value: st[k] as string\n                }));\n                const styleString = styleList.map((x) => (x.name + \":\" + x.value + \";\")).join(\"\");\n                e.setAttribute(\"style\", styleString);\n            }\n        }\n        if (children) {\n            for (const ch of children) {\n                if (typeof ch === \"string\" || typeof ch === 'number') {\n                    e.appendChild(document.createTextNode(ch));\n                } else if (ch instanceof Array) {\n                    for (const c of ch) {\n                        e.appendChild(c);\n                    }\n                } else if (ch instanceof Node) {\n                    e.appendChild(ch);\n                } else {\n                    console.error(\"what's this?\", ch)\n                    throw new Error()\n                }\n            }\n        }\n        return e;\n    }\n}\n","interface SVGCommonAttributes {\n    class?: string[];\n    style?: { [key: string]: string };\n    transform?: string;\n    fill?: string;\n    stroke?: string;\n}\ninterface SVGSVGAttribute {\n    width: SVGLength;\n    height: SVGLength;\n}\ntype SVGLength = number | string;\nexport namespace JSX {\n    export interface IntrinsicElements {\n        svg: SVGCommonAttributes & SVGSVGAttribute;\n        rect: SVGCommonAttributes & {\n            x: SVGLength;\n            y: SVGLength;\n            width: SVGLength;\n            height: SVGLength;\n        }\n        g: SVGCommonAttributes;\n        text: SVGCommonAttributes & {\n            x: SVGLength;\n            y: SVGLength;\n        };\n        line: SVGCommonAttributes & {\n            x1: SVGLength;\n            y1: SVGLength;\n            x2: SVGLength;\n            y2: SVGLength;\n        }\n    }\n    export type Element = SVGElement;\n}\nexport function createElement<T>(tag: string, attr: any, ...children: JSX.Element[]): Element {\n    const e = document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n    if (attr) {\n        for (const k of Object.keys(attr)) {\n            if (k === \"class\") {\n                for (const cls of attr.class) {\n                    e.classList.add(cls);\n                }\n            } else if (k === \"style\") {\n                const styleList = Object.keys(attr.style).map((k) => ({\n                    name: k,\n                    value: attr.style[k]\n                }));\n                const styleString = styleList.map((x) => (x.name + \":\" + x.value + \";\")).join(\"\");\n                e.setAttribute(\"style\", styleString);\n            } else {\n                e.setAttribute(k, attr[k])\n            }\n        }\n    }\n    if (children) {\n        for (const ch of children) {\n            if (typeof ch === \"string\" || typeof ch === \"number\") {\n                e.appendChild(document.createTextNode(ch + \"\"));\n            } else if (ch instanceof SVGElement){\n                e.appendChild(ch);\n            } else {\n                console.log(\"???\", ch)\n            }\n        }\n    }\n    return e;\n}\nexport function render(container: SVGElement, ...children: SVGElement[]): void {\n    container.innerHTML = \"\";\n    for (const ch of children) {\n        container.appendChild(ch)\n    }\n}\nexport type Builder<Prop> = (prop: Prop) => SVGElement;","export {\n    Model, Namespace, ElementDef, Module, ModuleItem, Element,\n    PWM, Distribution, CodeDistribution, Alphabet, ElementKind,\n    QuasiModule, QuasiModuleItem, QuasiAlternation, QuasiRepetition\n};\n\n\ninterface Namespace { [key : string] : ElementDef };\n\n\ntype Alphabet = string[]\n\ninterface Model {\n    alphabet: Alphabet\n    namespace: Namespace;\n    background: CodeDistribution;\n    root: Module;\n};\n\n\ntype ElementDef = MotifDef | GeneralizedMotifDef | SpacerDef;\n\ninterface Distribution {\n    from: number;\n    probs: number[];\n};\ninterface CodeDistribution {\n    [key: string]: number;\n}\ntype PWM = CodeDistribution[];\n\n\nenum ElementKind {\n    Motif = \"motif\",\n    GMotif = \"g-motif\",\n    Spacer = \"spacer\"\n}\n\n\ninterface MotifDef {\n    kind : \"motif\";\n    color: string;\n    matrix : PWM;\n}\n\n\ninterface GeneralizedMotifDef {\n    kind: \"g-motif\";\n    color: string;\n    distribution: Distribution;\n    matrix: PWM\n}\n\n\ninterface SpacerDef {\n    kind : \"spacer\";\n    distribution: Distribution;\n}\n\ntype Element = {\n    name: string\n};\ntype Module = QuasiModule<Element>;\ntype ModuleItem = QuasiModuleItem<Element>\ntype QuasiModule<E> = QuasiModuleItem<E>[];\ntype QuasiModuleItem<E> = QuasiElement<E> | QuasiAlternation<E> | QuasiRepetition<E>;\n\n\ntype QuasiElement<E> = E & {\n    kind: \"element\";\n};\n\n\ninterface QuasiAlternation<E> {\n    kind: \"alternation\";\n    psubs: { prob: number; mod: QuasiModule<E>; }[];\n}\n\n\ninterface QuasiRepetition<E> {\n    kind: \"repetition\";\n    prob: number;\n    sub: QuasiModule<E>;\n}","import { QuasiModule, QuasiModuleItem, Element, QuasiAlternation, QuasiRepetition } from \"./SSPDL\";\n\nexport { StandardRider, Rider, Path };\n\n\ntype Path = number[];\ntype Node<E> = ModuleNode<E> | ModuleItemNode<E>;\ninterface ModuleNode<E> {\n    kind: \"module\";\n    module: QuasiModule<E>;\n};\ninterface ModuleItemNode<E> {\n    kind: \"item\";\n    item: QuasiModuleItem<E>;\n}\n\n\nclass Rider<E> {\n    private root: QuasiModule<E>;\n    node: Node<E>;\n    path: Path;\n    constructor(root: QuasiModule<E>, path: Path = [], node?: Node<E>) {\n        this.root = root;\n        if (node === undefined) {\n            this.path = [];\n            this.node = { kind: \"module\", module: root };\n            this.go(path);\n        } else {\n            this.path = path;\n            this.node = node;\n        }\n    }\n    copy(): Rider<E> {\n        return new Rider<E>(this.root, this.path);\n    }\n    up(): void {\n        this.go(this.path.slice(0, this.path.length-1));\n    }\n    go(path: Path): void {\n        this.node = travel({\n            kind: \"module\",\n            module: this.root\n        }, path);\n        this.path = path;\n    }\n    getPath(): Path {\n        return this.path;\n    }\n    getNodeKind(): \"module\" | \"item\" {\n        return this.node.kind;\n    }\n    getModule(): QuasiModule<E> {\n        if (this.node.kind == \"module\") {\n            return this.node.module;\n        }\n        else {\n            throw new Error(\"not a module\");\n        }\n    }\n    getItem(): QuasiModuleItem<E> {\n        if (this.node.kind == \"item\") {\n            return this.node.item;\n        }\n        else {\n            throw new Error(\"not an item\");\n        }\n    }\n    getAlternation(): QuasiAlternation<E> {\n        const item = this.getItem();\n        if (item.kind === \"alternation\") {\n            return item;\n        } else {\n            throw new Error(\"not an alternation\");\n        }\n    }\n    getRepetition(): QuasiRepetition<E> {\n        const item = this.getItem();\n        if (item.kind === \"repetition\") {\n            return item;\n        } else {\n            throw new Error(\"not a rep\");\n        }\n    }\n    getItemKind(): \"element\" | \"alternation\" | \"repetition\" {\n        return this.getItem().kind;\n    }\n    isElement(): boolean {\n        return this.getNodeKind() == \"item\" && this.getItem().kind == \"element\";\n    }\n    getElementContent(): E {\n        const it = this.getItem();\n        if (it.kind == \"element\") {\n            return it;\n        } else {\n            throw new Error();\n        }\n    }\n    getChildRiders(): Rider<E>[] {\n        const node = this.node;\n        if (node.kind == \"module\") {\n            const m = node.module;\n            let n = 0;\n            return m.map((item, index) => {\n                const node: ModuleItemNode<E> = { kind: \"item\", item: item };\n                const path = this.path.concat([index]);\n                return new Rider<E>(this.root, path, node);\n            })\n        } else if (node.kind == \"item\") {\n            const t = node.item;\n            if (t.kind == \"element\") {\n                throw new Error(\"elementary node has no child node\");\n            }\n            else if (t.kind == \"alternation\") {\n                return t.psubs.map((ps, i) => {\n                    const m = ps.mod;\n                    return new Rider<E>(this.root, this.path.concat([i]), { kind: \"module\", module: m });\n                });\n            }\n            else if (t.kind == \"repetition\") {\n                return [\n                    new Rider(this.root, this.path.concat([0]), { kind: \"module\", module: t.sub })\n                ];\n            } else {\n                throw new Error(\"bad item node\");\n            }\n        } else {\n            throw new Error(\"bad node\");\n        }\n    }\n}\n\n\nclass StandardRider extends Rider<Element> { };\n\n\nfunction travel<E>(node: Node<E>, path: Path): Node<E> {\n    for (let i = 0; i < path.length; i++) {\n        const n = path[i];\n        if (node.kind == \"module\") {\n            const m = node.module;\n            node = { kind: \"item\", item: m[n] };\n            continue;\n        } else if (node.kind == \"item\") {\n            const t = node.item;\n            switch (t.kind) {\n                case \"element\": {\n                    throw new Error(\"elementary node has no child node\");\n                }\n                case \"alternation\": {\n                    node = { kind: \"module\", module: t.psubs[n].mod };\n                    continue;\n                }\n                case \"repetition\": {\n                    if (n === 0) {\n                        node = { kind: \"module\", module: t.sub };\n                        continue\n                    } else {\n                        throw new Error(\"bad index\");\n                    }\n                }\n            }\n        } else {\n            throw new Error(\"bad node\");\n        }\n    }\n    return node;\n}\n\n\nexport function transformModule<E1, E2>(m: QuasiModule<E1>, p: (e: E1) => E2) {\n    return m.map((t): QuasiModuleItem<E2> => {\n        switch (t.kind) {\n            case \"element\": {\n                const sign: { kind: \"element\" } = { kind: \"element\" };\n                return Object.assign(p(t), sign);\n            }\n            case \"alternation\": {\n                return {\n                    kind: \"alternation\",\n                    psubs: t.psubs.map((ps) => {\n                        return {\n                            prob: ps.prob,\n                            mod: transformModule<E1, E2>(ps.mod, p)\n                        }\n                    })\n                };\n            }\n            case \"repetition\": {\n                return {\n                    kind: \"repetition\",\n                    prob: t.prob,\n                    sub: transformModule<E1, E2>(t.sub, p)\n                };\n            }\n        }\n    })\n}\n\n\nexport function tranverseModule<E1>(m: QuasiModule<E1>, p: (e: E1) => void) {\n    return m.map((t) => {\n        switch (t.kind) {\n            case \"element\": {\n                p(t)\n                return;\n            }\n            case \"alternation\": {\n                t.psubs.map((ps) => tranverseModule<E1>(ps.mod, p))\n                return\n            }\n            case \"repetition\": {\n                tranverseModule<E1>(t.sub, p)\n                return\n            }\n        }\n    })\n}","import * as JSXFactory from \"../JSX/SVGFactory\";\n\n\nexport const Box: JSXFactory.Builder<{ size: number, fill: string, stroke: string }> = (prop) => {\n    return (\n        <svg\n            width={prop.size.toString()}\n            height={prop.size.toString()}\n        >\n            <rect\n                x={1} y={1}\n                width={prop.size-2} height={prop.size-2}\n                fill={prop.fill}\n                stroke={prop.stroke}\n            />\n        </svg>\n    )\n}","import { Controller } from \"./Widget\";\nimport * as JSXFactory from \"../JSX/HTMLFactory\";\n\n\nexport interface ButtonCmd {\n    kind: \"button\",\n    message: string;\n}\n\n\ninterface ButtonData {\n    label: string | Node | HTMLElement;\n    message: string;\n}\n\n\nexport class Button extends Controller<ButtonData, ButtonCmd> {\n    protected buttonEl: HTMLElement;\n    makeContainer(): HTMLElement {\n        return <button style={{width: \"100%\"}}/>\n    }\n    displayData(data: ButtonData): void {\n        const btn = this.getDOM();\n        btn.addEventListener(\"click\", () => {\n            this.send({\n                kind: \"button\",\n                message: data.message\n            });\n        })\n        JSXFactory.render(this.getDOM(), <span>{data.label}</span>);\n    }\n}\n","import { Editor } from \"./Widget\";\nimport * as JSXFactory from \"../JSX/HTMLFactory\";\n\n\ntype Color = string;\nexport class ColorEditor extends Editor<Color, void> {\n    inputElement: HTMLInputElement;\n    makeContainer() {\n        return <input type=\"color\" />\n    }\n    init() {\n        super.init()\n        this.inputElement = this.getDOM() as HTMLInputElement;\n        this.inputElement.addEventListener(\"change\", () => {\n            this.emitDataChange();\n        });\n    }\n    displayData(data: Color): void {\n        this.inputElement.value = data;\n    }\n    getMajorData(): Color {\n        return this.inputElement.value;\n    }\n}","import { Viewer, Controller } from \"./Widget\";\nimport * as JSXFactory from \"../JSX/HTMLFactory\";\nimport { Builder } from \"../JSX/HTMLFactory\";\n\n\nexport interface MenubarCommand {\n    kind: \"menubar\";\n    firstLevel: string;\n    secondLevel: string;\n}\n\n\ntype MenubarData = {\n    name: string;\n    content: string[];\n}[];\n\n\nexport class Menubar extends Controller<MenubarData, MenubarCommand> {\n    makeContainer(): HTMLElement {\n        return (\n            <div style={{\n                display: \"flex\",\n                \"flex-direction\": \"row\",\n                \"padding\": \"0\",\n                \"margin\": \"0\",\n                \"width\": \"100%\",\n                \"background-color\": \"lightgrey\"\n            }}></div>\n        )\n    }\n    displayData(data: { name: string; content: string[]; }[]): void {\n        interface MenubarItemProps {\n            name: string;\n            content: string;\n        }\n        const Button = (prop: { firstLevel: string; secondLevel: string; }) => {\n            // const btn = (\n            //     <div style={{\n            //         \"display\": \"block\",\n            //         \"cursor\": \"pointer\",\n            //         \"padding\": \"0.2em 1em\"\n            //     }}>{prop.secondLevel}</div>\n            // );\n            const btn = <button>{prop.secondLevel}</button>;\n            btn.addEventListener(\"click\", () => {\n                this.send({\n                    kind: \"menubar\",\n                    firstLevel: prop.firstLevel,\n                    secondLevel: prop.secondLevel\n                });\n            });\n            return btn;\n        }\n        const MenubarItem: Builder<{ name: string; content: string[] }> = (prop) => {\n            let dropdown: HTMLElement;\n            const item = (\n                <div style={{ \"display\": \"inline\" }}>\n                    <div style={{\n                        \"cursor\": \"pointer\",\n                        \"position\": \"relative\",\n                        \"padding-left\": \"1em\",\n                        \"padding-right\": \"1em\",\n                        \"padding-top\": \"0.2em\",\n                        \"padding-bottom\": \"0.2em\",\n                        \"background-color\": \"lightgrey\"\n                    }}>\n                        {prop.name}\n                    </div>\n                    {\n                        dropdown = (\n                            <div style={{\n                                \"flex-direction\": \"column\",\n                                \"position\": \"absolute\",\n                                \"display\": \"none\",\n                                \"background-color\": \"white\",\n                                \"box-shadow\": \"0px 8px 16px 0px rgba(0,0,0,0.2)\"\n                            }}>\n                                {\n                                    prop.content.map((s: string) => (\n                                        <Button firstLevel={prop.name} secondLevel={s}></Button>\n                                    ))\n                                }\n                            </div>\n                        )\n                    }\n                </div>\n            )\n            item.addEventListener(\"mouseenter\", () => {\n                dropdown.style.display = \"flex\";\n            });\n            item.addEventListener(\"mouseleave\", () => {\n                dropdown.style.display = \"none\";\n            });\n            return item;\n        }\n        const container = this.getDOM();\n        container.innerHTML = \"\";\n        for (const m of data) {\n            container.appendChild(<MenubarItem name={m.name} content={m.content} />);\n        }\n    }\n}\n\n","import { Editor } from \"./Widget\";\nimport * as JSXFactory from \"../JSX/HTMLFactory\";\n\n\ninterface Minor {\n    min?: number;\n    max?: number;\n    step?: number;\n}\nexport class NumberEditor extends Editor<number, Minor> {\n    inputElement: HTMLInputElement;\n    makeContainer() {\n        return <input type=\"number\" step={0} />\n    }\n    init() {\n        super.init()\n        this.inputElement = this.getDOM() as HTMLInputElement\n        this.inputElement.addEventListener(\"change\", () => {\n            this.emitDataChange();\n        });\n    }\n    displayData(data: number, minor: Minor): void {\n        this.inputElement.value = data.toString();\n        if (minor.step !== undefined) {\n            this.inputElement.step = minor.step + \"\";\n        }\n        if (minor.min !== undefined) {\n            this.inputElement.min = minor.min + \"\";\n        }\n        if (minor.max !== undefined) {\n            this.inputElement.max = minor.max + \"\";\n        }\n    }\n    getMajorData(): number {\n        return parseFloat(this.inputElement.value);\n    }\n}","import { Frame, Widget } from \"./Widget\";\nimport * as JSXFactory from \"../JSX/HTMLFactory\";\n\n\nexport class Pile extends Frame {\n    protected position(container: HTMLElement, children: Widget[]): void {\n        JSXFactory.render(container, (\n            <div style={{ \"display\": \"flex\", \"flex-direction\": \"column\" }}>\n                { children.map((ch) => (ch.getDOM())) }\n            </div>\n        ));\n    }\n}\n\n\nexport class HPile extends Frame {\n    protected position(container: HTMLElement, children: Widget[]): void {\n        JSXFactory.render(container, (\n            <div style={{ \"display\": \"flex\", \"flex-direction\": \"row\" }}>\n                { children.map((ch) => (ch.getDOM())) }\n            </div>\n        ));\n    }\n}\n","import { Editor } from \"./Widget\";\nimport * as JSXFactory from \"../JSX/HTMLFactory\";\n\n\nexport class StringEditor extends Editor<string, void> {\n    makeContainer() {\n        return <input type=\"text\" />;\n    }\n    init() {\n        super.init()\n        this.getDOM().addEventListener(\"change\", () => {\n            this.emitDataChange();\n        });\n    }\n    displayData(data: string): void {\n        (this.getDOM() as HTMLInputElement).value = data;\n    }\n    getMajorData(): string {\n        return (this.getDOM() as HTMLInputElement).value;\n    }\n}","import { Viewer } from \"./Widget\";\nimport * as JSXFactory from \"../JSX/HTMLFactory\";\n\n\nexport class StringViewer extends Viewer<string> {\n    protected displayData(data: string): void {\n        JSXFactory.render(this.getDOM(), (\n            <span>{data}</span>\n        ))\n    }\n}","import { Widget, Controllee, Editor } from \"./Widget\";\nimport * as JSXFactory from \"../JSX/HTMLFactory\";\nimport { Pile, HPile } from \"./Pile\";\nimport { StringViewer } from \"./StringViewer\";\n\n\ninterface ExitItem { label: string | HTMLElement; key: string };\ninterface Handlers { [key: string]: () => void };\nexport function popup(widget: Widget, exits: ExitItem[], handlers: Handlers): (key: string) => void {\n    const popupBox = (\n        <div style={{\n            \"position\": \"fixed\",\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"top\": \"0\",\n            \"left\": \"0\",\n            \"background-color\": \"rgba(100,100,100,0.5)\",\n            \"display\": \"flex\",\n            \"align-items\": \"center\",\n            \"justify-content\": \"center\"\n        }}>\n            <div style={{\n                \"background-color\": \"white\",\n                \"border\": \"1px solid grey\",\n                \"padding\": \"1em\",\n                \"max-width\": \"100%\",\n                \"max-height\": \"100%\",\n                \"overflow\": \"auto\",\n                \"display\": \"flex\",\n                \"flex-direction\": \"column\",\n                'align-items': 'center',\n                'box-shadow': '0px 0px 3px 3px grey'\n            }}>\n                <div>\n                    {widget.getDOM()}\n                </div>\n                <div\n                    style={{\n                        display: \"flex\",\n                        \"margin-top\": \"1em\",\n                        \"flex-direction\": \"row\",\n                        \"justify-content\": \"flex-end\",\n                        \"width\": '100%'\n                    }}\n                >\n                    {\n                        exits.map((action) => {\n                            const btn = <button style={{ width: \"10em\", \"margin-left\": \"1em\" }}>{action.label}</button>;\n                            btn.addEventListener(\"click\", () => {\n                                popupBox.remove();\n                                handlers[action.key]();\n                            });\n                            return btn;\n                        })\n                    }\n                </div>\n            </div>\n        </div>\n    )\n    document.body.appendChild(popupBox);\n    return (key: string) => {\n        popupBox.remove();\n        if (handlers[key]) {\n            handlers[key]();\n            return\n        } else {\n            console.error(key, handlers)\n            throw Error()\n        }\n    }\n}\n\n\n\ninterface TellCmd {\n    kind: \"popup\";\n    command: \"close\";\n}\nexport function tell(widget: Widget, cypher: string = \"OK\"): Controllee<TellCmd> {\n    const exit = popup(widget,\n        [\n            {\n                label: cypher,\n                key: \"close\"\n            }\n        ],\n        {\n            \"close\": () => {}\n        }\n    );\n    return new class implements Controllee<TellCmd> {\n        handle(cmd: TellCmd) {\n            exit(\"close\")\n        }\n    }\n}\n\n\ninterface AskCmd {\n    kind: \"confirm\";\n    command: \"ok\" | \"cancel\";\n}\nexport function ask(widget: Widget, handlers: { cancel: () => void; ok: () => void }): Controllee<AskCmd> {\n    const exit = popup(widget,\n        [\n            {\n                label: <span style={{ color: \"green\" }}>Ok</span>,\n                key: \"ok\"\n            },\n            {\n                label: \"Cancel\",\n                key: \"cancel\"\n            }\n        ],\n        handlers\n    );\n    return new class implements Controllee<AskCmd> {\n        handle(cmd: AskCmd) {\n            if (cmd.command === \"ok\") {\n                exit(\"ok\")\n            } else if (cmd.command === \"cancel\") {\n                exit(\"cancel\");\n            }\n        }\n    }\n}\n\n\nexport function simpleAsk<Data>(question: string, ed: Editor<Data, any>, success: (d: Data) => void, fail: ()=>void) {\n    const vr = new StringViewer();\n    vr.initData(question)\n    const pile = new Pile()\n    pile.setChildren([vr, ed]);\n    ask(pile, {\n        ok: () => {\n            success(ed.getMajorData());\n        },\n        cancel: () => {\n            fail();\n        }\n    })\n}","import * as JSXFactory from \"../JSX/HTMLFactory\";\n\n\nexport {\n    Widget, Frame, Viewer, Editor, Controller, Controllee\n}\n\n\nabstract class Widget {\n    private dom: HTMLElement;\n    constructor() {\n        this.dom = this.makeContainer();\n        this.init();\n    }\n    protected makeContainer(): HTMLElement {\n        return <div />\n    }\n    protected init(): void {\n        // for those who want to initialize without overriding constructor procedure\n    }\n    public getDOM(): HTMLElement {\n        return this.dom;\n    }\n}\n\n\nabstract class Frame extends Widget {\n    private children: Widget[] = [];\n    protected abstract position(container: HTMLElement, children: Widget[]): void;\n    public setChildren(children: Widget[]): void {\n        this.children = children;\n        this.position(this.getDOM(), children);\n    }\n    public getChildren(): Widget[] {\n        return this.children.slice(0, this.children.length);\n    }\n}\n\n\nabstract class Viewer<D> extends Widget {\n    private dataSetted: boolean = false;\n    private data: D;\n    public initData(data: D): void {\n        this.dataSetted = true;\n        this.data = data;\n        this.display()\n    }\n    public getData(): D {\n        if (this.dataSetted) {\n            return this.data;\n        } else {\n            throw new Error(\"tried getting data before initialization\");\n        }\n    }\n    private display(): void {\n        this.displayData(this.getData());\n    }\n    protected abstract displayData(data: D): void;\n}\n\n\nabstract class Editor<MajorData, MinorData> extends Widget {\n    /*\n     * Major Data: data editable by user input\n     * Minor Data: not editable\n     */\n    private dataChangeHandlers: Set<(data: MajorData, changeSource: any) => void> = new Set();\n    public register(listener: any, handler: (data: MajorData) => void) {\n        this.dataChangeHandlers.add((data, source)=>{\n            if (source !== listener) {\n                handler(data)\n            }\n        });\n    }\n    public cancel(handler: (data: MajorData) => void) {\n        this.dataChangeHandlers.delete(handler);\n    }\n    protected emitDataChange(changeSource?: any): void {\n        const data = this.getMajorData();\n        changeSource = changeSource || this;\n        for (const handler of this.dataChangeHandlers) {\n            handler(data, changeSource);\n        }\n    }\n    private majorDataSetted: boolean = false;\n    private majorData: MajorData;\n    private minorDataSetted: boolean = false;\n    private minorData: MinorData;\n    public initData(data: MajorData, extra: MinorData): void {\n        this.majorDataSetted = true;\n        this.majorData = data;\n        this.minorData = extra\n        this.minorDataSetted = true;\n        this.display()\n    }\n    public updateMajorData(data: MajorData, source?: any): void {\n        if (!this.majorDataSetted) {\n            debugger\n            throw new Error(\"update data before initialization\")\n        } else {\n            this.majorData = data;\n            this.display()\n            this.emitDataChange(source || this)\n        }\n    }\n    public updateMinorData(extra: MinorData): void {\n        if (!this.minorDataSetted) {\n            debugger\n            throw new Error(\"update data before initialization\")\n        } else {\n            this.minorData = extra\n            this.display()\n        }\n    }\n    public getMajorData(): MajorData {\n        if (this.majorDataSetted) {\n            return this.majorData;\n        } else {\n            throw new Error(\"tried getting data before initialization\");\n        }\n    }\n    public getMinorData(): MinorData {\n        if (this.minorDataSetted) {\n            return this.minorData;\n        } else {\n            throw new Error(\"tried getting extra data before initialization\");\n        }\n    }\n    protected display(): void {\n        this.displayData(this.majorData, this.minorData)\n    }\n    protected abstract displayData(data: MajorData, extra: MinorData): void;\n}\n\n\nabstract class Controller<D, Command> extends Viewer<D> {\n    private eeSet = new Set<Controllee<Command>>();\n    public bind(ee: Controllee<Command>): void {\n        this.eeSet.add(ee);\n    }\n    protected send(cmd: Command) {\n        for (const ee of this.eeSet) {\n            ee.handle(cmd);\n        }\n    }\n}\n\n\ninterface Controllee<Cmd> {\n    handle(cmd: Cmd): void;\n}","import { Widget } from \"./Widget\";\n\n\nexport class Wrapper extends Widget {\n    private content: HTMLElement;\n    constructor(content: HTMLElement) {\n        super();\n        this.content = content;\n    }\n    getDOM(): HTMLElement {\n        return this.content;\n    }\n}","import { ModelEditor } from \"./Components/ModelEditor\";\nimport * as JSXFactory from \"./JSX/HTMLFactory\";\n\n\nconst e = <div />\n\n\nconst editor = new ModelEditor();\neditor.initData({\n    alphabet: [\"A\", 'C', 'G', 'T'],\n    namespace: {},\n    background: { \"A\": 0.25, 'C': 0.25, 'G': 0.25, 'T': 0.25 },\n    root: []\n}, undefined);\ndocument.body.appendChild(editor.getDOM());\ndocument.body.style.padding = \"0\";","import { Paper } from \"snapsvg\";\nimport { min, dummy } from \"./JSUtility\";\nimport Snap = require(\"snapsvg\");\n\nexport type HandlerGroup = {\n    onDoubleClick: () => void;\n    onClick: () => void;\n    onDragStart: () => void;\n    onDrop: (n: Node, ctrlPressed: boolean) => void;\n}\n\n\nfunction registerHandlers(paper: Paper, handlerGroup: HandlerGroup): void {\n    let lastElement: HTMLElement | null = null;\n    paper.drag(\n        (dx, dy, x, y, e) => {\n            const elem = Snap.getElementByPoint(e.clientX, e.clientY);\n            lastElement = elem === null ? null : elem.node;\n        },\n        (x, y, e) => {\n            handlerGroup.onDragStart();\n            const elem = Snap.getElementByPoint(e.clientX, e.clientY);\n            lastElement = elem === null ? null : elem.node;\n        },\n        (e) => {\n            if (lastElement) {\n                handlerGroup.onDrop(lastElement, e.ctrlKey);\n            }\n        }\n    );\n    paper.click(handlerGroup.onClick);\n    // paper.dblclick(handlerGroup.onDoubleClick);\n}\n\n\nfunction registerHoverHandlers(paper: Paper, hg: { enter: () => void; leave: () => void; }) {\n    paper.hover(hg.enter, hg.leave);\n}\n\n\n// function registerHover(paper: Paper, attr: { [key: string]: string }): void {\n//     let oldAttr: { [key: string]: string };\n//     paper.hover(\n//         () => {\n//             oldAttr = {};\n//             for (const key of Object.keys(attr)) {\n//                 console.log(key, paper.attr(\"stroke\"));\n//                 oldAttr[key] = paper.attr(key);\n//             }\n//             paper.attr(attr);\n//         },\n//         () => {\n//             paper.attr(oldAttr);\n//         }\n//     );\n// }\n\n\nexport function InternalBox(paper: Paper, pathString: string, x: number, y: number, radius: number, handlerGroup: HandlerGroup) {\n    paper = paper.g();\n    const c = paper.circle(x, y, radius).attr({\n        \"fill\": \"white\",\n        \"stroke\": \"black\",\n        \"smdl-path\": pathString\n    });\n    c.hover(\n        () => {\n            c.animate({\n                \"r\": (radius * 1.5).toString()\n            }, 100);\n        },\n        () => {\n            c.animate({\n                \"r\": radius.toString()\n            }, 100)\n        }\n    )\n    registerHandlers(paper, handlerGroup);\n}\n\n\nexport function SpacerBox(paper: Paper, label: string, pathString: string, x: number, y: number, width: number, height: number, handlerGroup: HandlerGroup) {\n    paper = paper.g();\n    const r = paper.rect(x, y, width, height).attr({\n        \"stroke\": \"white\",\n        \"fill\": \"white\",\n        \"smdl-path\": pathString\n    });\n    const p = paper.path(Snap.format(\"M{x1},{y} V{h} M{x2},{y} V{h}\", {\n        \"x1\": x,\n        \"x2\": x + width,\n        \"y\": y,\n        \"h\": y + height\n    })).attr({\n        \"pointer-events\": \"none\"\n    });\n    paper.text(x + width / 2, y + height / 2, label).attr({\n        \"stroke\": \"black\",\n        \"fill\": \"black\",\n        \"text-anchor\": \"middle\",\n        \"dominant-baseline\": \"central\",\n        \"pointer-events\": \"none\",\n        \"font-size\": height * 0.6\n    });\n    registerHandlers(paper, handlerGroup);\n    r.hover(\n        () => {\n            p.attr({\n                \"stroke\": \"blue\"\n            });\n        },\n        () => {\n            p.attr({\n                \"stroke\": \"black\"\n            })\n        }\n    )\n}\n\n\nexport function PWMBox(paper: Paper, label: string, fillColor: string, pathString: string, x: number, y: number, width: number, height: number, handlerGroup: HandlerGroup) {\n\n    function fillToStroke(color: string): string {\n        const clr = Snap.color(color);\n        const lightness = clr.l;\n        return (lightness < 0.5) ? \"white\" : \"black\";\n    }\n\n    paper = paper.g()\n    paper.transform(Snap.format(\"translate({x},{y})\", {\n        \"x\": x,\n        \"y\": y\n    }));\n    const strokeColor = fillToStroke(fillColor);\n    const r = paper.rect(0, 0, width, height, min(width / 3, height / 3)).attr({\n        \"stroke\": strokeColor,\n        \"fill\": fillColor,\n        \"smdl-path\": pathString\n    });\n    paper.text(width / 2, height / 2, label).attr({\n        \"stroke\": strokeColor,\n        \"fill\": strokeColor,\n        \"text-anchor\": \"middle\",\n        \"dominant-baseline\": \"central\",\n        \"pointer-events\": \"none\",\n        \"font-size\": height * 0.5 + \"px\"\n    });\n    registerHandlers(paper, handlerGroup);\n    r.hover(\n        () => {\n            r.attr({\n                \"stroke\": \"blue\"\n            });\n        },\n        () => {\n            r.attr({\n                \"stroke\": strokeColor\n            })\n        }\n    )\n}","module.exports = Snap;"],"sourceRoot":""}